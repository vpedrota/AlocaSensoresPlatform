import{l as he,m as C,z as ce,T as bo,p as ee,aa as on,r as X,d as k,i as kt,x as ue,ag as aa,D as Mt,ah as kd,a as _r,ai as su,ab as rt,aj as Po,s as Re,ak as Gi,a1 as Dd,h as Be,w as Ml,A as Nd,j as la,f as ru,b as bn,al as Pn,ac as Gd,n as Dt,y as Oe,q as An,u as ou,t as ne,am as $r,an as Vd,Z as $e,$ as Qi,_ as li,F as Ee,ao as Bd,E as es,G as _e,N as Ht,I as se,O as J,K as mn,J as Zt,ap as ca,a0 as au,aq as ft,a3 as Se,g as Ln,ar as jd,as as ua,af as vn,P as He,B as Wd,e as ha,at as lu,au as zd,av as Xd,ae as yr,v as da,aw as Ud,ax as Yd,ay as It,az as Kd,aA as cu,R as Hd,H as Ze,M as Mi,L as Ai,aB as Ol,Q as kl,aC as vs}from"./index.d96f2f61.js";import{I as Dl,J as qr,K as Jr,L as Nl,M as Gl,m as Ae,w as fa,N as pr,e as ga,C as ma,j as Zd,u as ye,O as vr,P as $d,i as ct,k as ut,x as qd,d as xr,D as Jd,h as Cr,s as ts,Q as Qd,n as ns,p as is,S as ef,R as _a,a as yi,o as Er,b as ya,c as pa,A as uu,q as tf,f as va,B as hu,g as xa,r as nf,G as du,H as fu,l as gu}from"./router.c6279f2f.js";import{V as Ca,a as sf,b as rf,c as of,d as mu,e as Ys,f as _u,g as Ao,h as $n}from"./VCard.8251bd7e.js";import{b as fn,c as yu,d as pu,e as af,f as lf,g as cf,h as uf,a as hf,V as df}from"./VBtn.78286691.js";class ni{constructor(e){let{x:t,y:n,width:s,height:r}=e;this.x=t,this.y=n,this.width=s,this.height=r}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function Vl(i,e){return{x:{before:Math.max(0,e.left-i.left),after:Math.max(0,i.right-e.right)},y:{before:Math.max(0,e.top-i.top),after:Math.max(0,i.bottom-e.bottom)}}}function Ea(i){const e=i.getBoundingClientRect(),t=getComputedStyle(i),n=t.transform;if(n){let s,r,o,a,l;if(n.startsWith("matrix3d("))s=n.slice(9,-1).split(/, /),r=+s[0],o=+s[5],a=+s[12],l=+s[13];else if(n.startsWith("matrix("))s=n.slice(7,-1).split(/, /),r=+s[0],o=+s[3],a=+s[4],l=+s[5];else return new ni(e);const c=t.transformOrigin,u=e.x-a-(1-r)*parseFloat(c),h=e.y-l-(1-o)*parseFloat(c.slice(c.indexOf(" ")+1)),d=r?e.width/r:i.offsetWidth+1,f=o?e.height/o:i.offsetHeight+1;return new ni({x:u,y:h,width:d,height:f})}else return new ni(e)}function qn(i,e,t){if(typeof i.animate>"u")return{finished:Promise.resolve()};let n;try{n=i.animate(e,t)}catch{return{finished:Promise.resolve()}}return typeof n.finished>"u"&&(n.finished=new Promise(s=>{n.onfinish=()=>{s(n)}})),n}function vu(i){if(typeof i.getRootNode!="function"){for(;i.parentNode;)i=i.parentNode;return i!==document?null:document}const e=i.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const Ks="cubic-bezier(0.4, 0, 0.2, 1)",ff="cubic-bezier(0.0, 0, 0.2, 1)",gf="cubic-bezier(0.4, 0, 1, 1)";function mf(i){for(;i;){if(Sa(i))return i;i=i.parentElement}return document.scrollingElement}function Hs(i,e){const t=[];if(e&&i&&!e.contains(i))return t;for(;i&&(Sa(i)&&t.push(i),i!==e);)i=i.parentElement;return t}function Sa(i){if(!i||i.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(i);return e.overflowY==="scroll"||e.overflowY==="auto"&&i.scrollHeight>i.clientHeight}function _f(i){for(;i;){if(window.getComputedStyle(i).position==="fixed")return!0;i=i.offsetParent}return!1}const yf=ee({target:Object},"v-dialog-transition"),wa=he()({name:"VDialogTransition",props:yf(),setup(i,e){let{slots:t}=e;const n={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,r){var d;await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),s.style.visibility="";const{x:o,y:a,sx:l,sy:c,speed:u}=jl(i.target,s),h=qn(s,[{transform:`translate(${o}px, ${a}px) scale(${l}, ${c})`,opacity:0},{}],{duration:225*u,easing:ff});(d=Bl(s))==null||d.forEach(f=>{qn(f,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*u,easing:Ks})}),h.finished.then(()=>r())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,r){var d;await new Promise(f=>requestAnimationFrame(f));const{x:o,y:a,sx:l,sy:c,speed:u}=jl(i.target,s);qn(s,[{},{transform:`translate(${o}px, ${a}px) scale(${l}, ${c})`,opacity:0}],{duration:125*u,easing:gf}).finished.then(()=>r()),(d=Bl(s))==null||d.forEach(f=>{qn(f,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*u,easing:Ks})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>i.target?C(bo,ce({name:"dialog-transition"},n,{css:!1}),t):C(bo,{name:"dialog-transition"},t)}});function Bl(i){var t;const e=(t=i.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:t.children;return e&&[...e]}function jl(i,e){const t=i.getBoundingClientRect(),n=Ea(e),[s,r]=getComputedStyle(e).transformOrigin.split(" ").map(p=>parseFloat(p)),[o,a]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=t.left+t.width/2;o==="left"||a==="left"?l-=t.width/2:(o==="right"||a==="right")&&(l+=t.width/2);let c=t.top+t.height/2;o==="top"||a==="top"?c-=t.height/2:(o==="bottom"||a==="bottom")&&(c+=t.height/2);const u=t.width/n.width,h=t.height/n.height,d=Math.max(1,u,h),f=u/d||0,g=h/d||0,m=n.width*n.height/(window.innerWidth*window.innerHeight),_=m>.12?Math.min(1.5,(m-.12)*10+1):1;return{x:l-(s+n.left),y:c-(r+n.top),sx:f,sy:g,speed:_}}const pf={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class vf extends Error{constructor(e){const t=pf[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const xu=vf;function $(i,e){if(!i)throw new xu(e)}class xf{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return $(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return $(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(!!this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){$(!(e in this.entries_),16);const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}const Cf=xf,xe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Me(i){const e=Xe();for(let t=0,n=i.length;t<n;++t)Oi(e,i[t]);return e}function Ef(i,e,t){const n=Math.min.apply(null,i),s=Math.min.apply(null,e),r=Math.max.apply(null,i),o=Math.max.apply(null,e);return ot(n,s,r,o,t)}function ss(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function Cu(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function Fn(i,e,t){let n,s;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?s=i[1]-t:i[3]<t?s=t-i[3]:s=0,n*n+s*s}function Sr(i,e){return Ra(i,e[0],e[1])}function Jn(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function Ra(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function Lo(i,e){const t=i[0],n=i[1],s=i[2],r=i[3],o=e[0],a=e[1];let l=xe.UNKNOWN;return o<t?l=l|xe.LEFT:o>s&&(l=l|xe.RIGHT),a<n?l=l|xe.BELOW:a>r&&(l=l|xe.ABOVE),l===xe.UNKNOWN&&(l=xe.INTERSECTING),l}function Xe(){return[1/0,1/0,-1/0,-1/0]}function ot(i,e,t,n,s){return s?(s[0]=i,s[1]=e,s[2]=t,s[3]=n,s):[i,e,t,n]}function rs(i){return ot(1/0,1/0,-1/0,-1/0,i)}function Vs(i,e){const t=i[0],n=i[1];return ot(t,n,t,n,e)}function Eu(i,e,t,n,s){const r=rs(s);return wu(r,i,e,t,n)}function Vi(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function Su(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function Oi(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function wu(i,e,t,n,s){for(;t<n;t+=s)Sf(i,e[t],e[t+1]);return i}function Sf(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function Ta(i,e){let t;return t=e(wr(i)),t||(t=e(Rr(i)),t)||(t=e(Tr(i)),t)||(t=e(Mn(i)),t)?t:!1}function Fo(i){let e=0;return Ia(i)||(e=ae(i)*_t(i)),e}function wr(i){return[i[0],i[1]]}function Rr(i){return[i[2],i[1]]}function wn(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function wf(i,e){let t;return e==="bottom-left"?t=wr(i):e==="bottom-right"?t=Rr(i):e==="top-left"?t=Mn(i):e==="top-right"?t=Tr(i):$(!1,13),t}function Mo(i,e,t,n,s){const[r,o,a,l,c,u,h,d]=Oo(i,e,t,n);return ot(Math.min(r,a,c,h),Math.min(o,l,u,d),Math.max(r,a,c,h),Math.max(o,l,u,d),s)}function Oo(i,e,t,n){const s=e*n[0]/2,r=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=s*o,c=s*a,u=r*o,h=r*a,d=i[0],f=i[1];return[d-l+h,f-c-u,d-l-h,f-c+u,d+l-h,f+c+u,d+l+h,f+c-u,d-l+h,f-c-u]}function _t(i){return i[3]-i[1]}function ki(i,e,t){const n=t||Xe();return Pe(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):rs(n),n}function Mn(i){return[i[0],i[3]]}function Tr(i){return[i[2],i[3]]}function ae(i){return i[2]-i[0]}function Pe(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Ia(i){return i[2]<i[0]||i[3]<i[1]}function Rf(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function Tf(i,e,t){let n=!1;const s=Lo(i,e),r=Lo(i,t);if(s===xe.INTERSECTING||r===xe.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],u=e[0],h=e[1],d=t[0],f=t[1],g=(f-h)/(d-u);let m,_;!!(r&xe.ABOVE)&&!(s&xe.ABOVE)&&(m=d-(f-c)/g,n=m>=o&&m<=l),!n&&!!(r&xe.RIGHT)&&!(s&xe.RIGHT)&&(_=f-(d-l)*g,n=_>=a&&_<=c),!n&&!!(r&xe.BELOW)&&!(s&xe.BELOW)&&(m=d-(f-a)/g,n=m>=o&&m<=l),!n&&!!(r&xe.LEFT)&&!(s&xe.LEFT)&&(_=f-(d-o)*g,n=_>=a&&_<=c)}return n}function If(i,e,t,n){let s=[];if(n>1){const a=i[2]-i[0],l=i[3]-i[1];for(let c=0;c<n;++c)s.push(i[0]+a*c/n,i[1],i[2],i[1]+l*c/n,i[2]-a*c/n,i[3],i[0],i[3]-l*c/n)}else s=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];e(s,s,2);const r=[],o=[];for(let a=0,l=s.length;a<l;a+=2)r.push(s[a]),o.push(s[a+1]);return Ef(r,o,t)}function Ru(i,e){const t=e.getExtent(),n=wn(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=ae(t),o=Math.floor((n[0]-t[0])/s)*s;i[0]-=o,i[2]-=o}return i}function bf(i,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[t[0],i[1],t[2],i[3]]];Ru(i,e);const n=ae(t);if(ae(i)>n)return[[t[0],i[1],t[2],i[3]]];if(i[0]<t[0])return[[i[0]+n,i[1],t[2],i[3]],[t[0],i[1],i[2],i[3]]];if(i[2]>t[2])return[[i[0],i[1],t[2],i[3]],[t[0],i[1],i[2]-n,i[3]]]}return[i]}const Y={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Pf{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const ba=Pf;class Af{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Qe=Af;function Lf(i,e,t){let n,s;t=t||Rn;let r=0,o=i.length,a=!1;for(;r<o;)n=r+(o-r>>1),s=+t(i[n],e),s<0?r=n+1:(o=n,a=!s);return a?r:~r}function Rn(i,e){return i>e?1:i<e?-1:0}function Pa(i,e,t){const n=i.length;if(i[0]<=e)return 0;if(e<=i[n-1])return n-1;let s;if(t>0){for(s=1;s<n;++s)if(i[s]<e)return s-1}else if(t<0){for(s=1;s<n;++s)if(i[s]<=e)return s}else for(s=1;s<n;++s){if(i[s]==e)return s;if(i[s]<e)return typeof t=="function"?t(e,i[s-1],i[s])>0?s-1:s:i[s-1]-e<e-i[s]?s-1:s}return n-1}function Ff(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function st(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)i[i.length]=t[s]}function Nt(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function Mf(i,e,t){const n=e||Rn;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||t&&o===0)})}function Ot(){return!0}function On(){return!1}function ci(){}function Of(i){let e=!1,t,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!Nt(r,n))&&(e=!0,s=this,n=r,t=i.apply(this,arguments)),t}}function pi(i){for(const e in i)delete i[e]}function ui(i){let e;for(e in i)return!1;return!e}class kf extends ba{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=t?new Qe(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,u=s.length;c<u;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,ci);delete o[n]}return l}disposeInternal(){this.listeners_&&pi(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const n=this.listeners_&&this.listeners_[e];if(n){const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=ci,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}}const Ir=kf,j={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function z(){throw new Error("Unimplemented abstract method.")}let Df=0;function U(i){return i.ol_uid||(i.ol_uid=String(++Df))}function Tu(i){return Math.pow(i,3)}function vi(i){return 1-Tu(1-i)}function Nf(i){return 3*i*i-2*i*i*i}function Gf(i){return i}class Vf extends Ir{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Y.CHANGE)}release(){this.state===j.ERROR&&this.setState(j.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==j.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==j.LOADED){e.interimTile=null;break}else e.getState()==j.LOADING?t=e:e.getState()==j.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==j.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){z()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:Tu(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const Iu=Vf,sn=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Bf=sn.includes("firefox"),jf=sn.includes("safari")&&!sn.includes("chrom");jf&&(sn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(sn));const Wf=sn.includes("webkit")&&!sn.includes("edge"),zf=sn.includes("macintosh"),bu=typeof devicePixelRatio<"u"?devicePixelRatio:1,Aa=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Xf=typeof Image<"u"&&Image.prototype.decode,Pu=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function ke(i,e,t,n){let s;return t&&t.length?s=t.shift():Aa?s=new OffscreenCanvas(i||300,e||300):s=document.createElement("canvas"),i&&(s.width=i),e&&(s.height=e),s.getContext("2d",n)}function br(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function Wl(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function ko(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Uf(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function Yf(i,e){const t=i.childNodes;for(let n=0;;++n){const s=t[n],r=e[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}const pe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Z(i,e,t,n,s){if(n&&n!==i&&(t=t.bind(n)),s){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const r={target:i,type:e,listener:t};return i.addEventListener(e,t),r}function Zs(i,e,t,n){return Z(i,e,t,n,!0)}function re(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),pi(i))}function Au(i,e,t){const n=i;let s=!0,r=!1,o=!1;const a=[Zs(n,Y.LOAD,function(){o=!0,r||e()})];return n.src&&Xf?(r=!0,n.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():t())})):a.push(Zs(n,Y.ERROR,t)),function(){s=!1,a.forEach(re)}}class Kf extends Iu{constructor(e,t,n,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=j.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=j.ERROR,this.unlistenImage_(),this.image_=Hf(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=j.LOADED:this.state=j.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==j.ERROR&&(this.state=j.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==j.IDLE&&(this.state=j.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Au(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Hf(){const i=ke(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const Lu=Kf,Zf=.5,Tn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class $f{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Tn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Fu=$f,os=6378137,Qn=Math.PI*os,qf=[-Qn,-Qn,Qn,Qn],Jf=[-180,-85,180,85],xs=os*Math.log(Math.tan(Math.PI/2));class jn extends Fu{constructor(e){super({code:e,units:"m",extent:qf,global:!0,worldExtent:Jf,getPointResolution:function(t,n){return t/Math.cosh(n[1]/os)}})}}const zl=[new jn("EPSG:3857"),new jn("EPSG:102100"),new jn("EPSG:102113"),new jn("EPSG:900913"),new jn("http://www.opengis.net/def/crs/EPSG/0/3857"),new jn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Qf(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t){e[s]=Qn*i[s]/180;let r=os*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));r>xs?r=xs:r<-xs&&(r=-xs),e[s+1]=r}return e}function eg(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t)e[s]=180*i[s]/Qn,e[s+1]=360*Math.atan(Math.exp(i[s+1]/os))/Math.PI-90;return e}const tg=6378137,Xl=[-180,-90,180,90],ng=Math.PI*tg/180;class un extends Fu{constructor(e,t){super({code:e,units:"degrees",extent:Xl,axisOrientation:t,global:!0,metersPerUnit:ng,worldExtent:Xl})}}const Ul=[new un("CRS:84"),new un("EPSG:4326","neu"),new un("urn:ogc:def:crs:OGC:1.3:CRS84"),new un("urn:ogc:def:crs:OGC:2:84"),new un("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new un("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new un("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Do={};function ig(i){return Do[i]||Do[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function sg(i,e){Do[i]=e}let ii={};function $s(i,e,t){const n=i.getCode(),s=e.getCode();n in ii||(ii[n]={}),ii[n][s]=t}function rg(i,e){let t;return i in ii&&e in ii[i]&&(t=ii[i][e]),t}function ge(i,e,t){return Math.min(Math.max(i,e),t)}function og(i,e,t,n,s,r){const o=s-t,a=r-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=s,n=r):l>0&&(t+=o*l,n+=a*l)}return bt(i,e,t,n)}function bt(i,e,t,n){const s=t-i,r=n-e;return s*s+r*r}function ag(i){const e=i.length;for(let n=0;n<e;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<e+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let s=n-1;s>=0;s--)i[s][e]-=i[s][n]*t[n]}return t}function Bs(i){return i*Math.PI/180}function xn(i,e){const t=i%e;return t*e<0?t+e:t}function je(i,e,t){return i+t*(e-i)}function Pr(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function Cs(i,e){return Math.floor(Pr(i,e))}function Es(i,e){return Math.ceil(Pr(i,e))}function lg(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function cg(i,e){const t=e.getRadius(),n=e.getCenter(),s=n[0],r=n[1],o=i[0],a=i[1];let l=o-s;const c=a-r;l===0&&c===0&&(l=1);const u=Math.sqrt(l*l+c*c),h=s+t*l/u,d=r+t*c/u;return[h,d]}function La(i,e){const t=i[0],n=i[1],s=e[0],r=e[1],o=s[0],a=s[1],l=r[0],c=r[1],u=l-o,h=c-a,d=u===0&&h===0?0:(u*(t-o)+h*(n-a))/(u*u+h*h||0);let f,g;return d<=0?(f=o,g=a):d>=1?(f=l,g=c):(f=o+d*u,g=a+d*h),[f,g]}function nt(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function Fa(i,e){const t=Math.cos(e),n=Math.sin(e),s=i[0]*t-i[1]*n,r=i[1]*t+i[0]*n;return i[0]=s,i[1]=r,i}function ug(i,e){return i[0]*=e,i[1]*=e,i}function Pt(i,e){const t=i[0]-e[0],n=i[1]-e[1];return t*t+n*n}function qs(i,e){return Math.sqrt(Pt(i,e))}function hg(i,e){return Pt(i,La(i,e))}function Mu(i,e){if(e.canWrapX()){const t=ae(e.getExtent()),n=dg(i,e,t);n&&(i[0]-=n*t)}return i}function dg(i,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||ae(n),s=Math.floor((i[0]-n[0])/t)),s}const fg=63710088e-1;function Yl(i,e,t){t=t||fg;const n=Bs(i[1]),s=Bs(e[1]),r=(s-n)/2,o=Bs(e[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Ou={info:1,warn:2,error:3,none:4};let gg=Ou.info;function ku(...i){gg>Ou.warn||console.warn(...i)}let No=!0;function mg(i){No=!(i===void 0?!0:i)}function Ma(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function Du(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function _g(i){sg(i.getCode(),i),$s(i,i,Ma)}function yg(i){i.forEach(_g)}function me(i){return typeof i=="string"?ig(i):i||null}function Kl(i,e,t,n){i=me(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(e,t),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/Tn[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=e;else{const a=Ar(i,me("EPSG:4326"));if(a===Du&&o!=="degrees")s=e*i.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=Yl(c.slice(0,2),c.slice(2,4)),h=Yl(c.slice(4,6),c.slice(6,8));s=(u+h)/2}const l=n?Tn[n]:i.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Hl(i){yg(i),i.forEach(function(e){i.forEach(function(t){e!==t&&$s(e,t,Ma)})})}function pg(i,e,t,n){i.forEach(function(s){e.forEach(function(r){$s(s,r,t),$s(r,s,n)})})}function Oa(i,e){if(i){if(typeof i=="string")return me(i)}else return me(e);return i}function gn(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Ar(i,e)===Ma)&&t}function Ar(i,e){const t=i.getCode(),n=e.getCode();let s=rg(t,n);return s||(s=Du),s}function Bi(i,e){const t=me(i),n=me(e);return Ar(t,n)}function ka(i,e,t){return Bi(e,t)(i,void 0,i.length)}function Nu(i,e,t,n){const s=Bi(e,t);return If(i,s,void 0,n)}let Je=null;function vg(i){Je=me(i)}function gt(){return Je}function Gu(){vg("EPSG:4326")}function hi(i,e){return Je?ka(i,e,Je):i}function oe(i,e){return Je?ka(i,Je,e):(No&&!nt(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(No=!1,ku("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i)}function ji(i,e){return Je?Nu(i,e,Je):i}function $t(i,e){return Je?Nu(i,Je,e):i}function xg(i,e){if(!Je)return i;const t=me(e).getUnits(),n=Je.getUnits();return t&&n?i*Tn[t]/Tn[n]:i}function Cg(){Hl(zl),Hl(Ul),pg(Ul,zl,Qf,eg)}Cg();const Eg=10,Zl=.25;class Sg{constructor(e,t,n,s,r,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Bi(this.targetProj_,this.sourceProj_);this.transformInv_=function(v){const y=v[0]+"/"+v[1];return a[y]||(a[y]=l(v)),a[y]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&ae(s)==ae(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ae(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ae(this.targetProj_.getExtent()):null;const c=Mn(n),u=Tr(n),h=Rr(n),d=wr(n),f=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(h),_=this.transformInv_(d),p=Eg+(o?Math.max(0,Math.ceil(Math.log2(Fo(n)/(o*o*256*256)))):0);if(this.addQuad_(c,u,h,d,f,g,m,_,p),this.wrapsXInSource_){let v=1/0;this.triangles_.forEach(function(y,x,E){v=Math.min(v,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(y=>{if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-v>this.sourceWorldWidth_/2){const x=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];x[0][0]-v>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-v>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-v>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const E=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-E<this.sourceWorldWidth_/2&&(y.source=x)}})}a={}}addTriangle_(e,t,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,n]})}addQuad_(e,t,n,s,r,o,a,l,c){const u=Me([r,o,a,l]),h=this.sourceWorldWidth_?ae(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=Me([e,t,n,s]);g=ae(_)/this.targetWorldWidth_>Zl||g}!f&&this.sourceProj_.isGlobal()&&h&&(g=h>Zl||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Pe(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(e[0]+n[0])/2,(e[1]+n[1])/2],p=this.transformInv_(_);let v;f?v=(xn(r[0],d)+xn(a[0],d))/2-xn(p[0],d):v=(r[0]+a[0])/2-p[0];const y=(r[1]+a[1])/2-p[1];g=v*v+y*y>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const _=[(t[0]+n[0])/2,(t[1]+n[1])/2],p=this.transformInv_(_),v=[(s[0]+e[0])/2,(s[1]+e[1])/2],y=this.transformInv_(v);this.addQuad_(e,t,_,v,r,o,p,y,c-1),this.addQuad_(v,_,n,s,y,p,a,l,c-1)}else{const _=[(e[0]+t[0])/2,(e[1]+t[1])/2],p=this.transformInv_(_),v=[(n[0]+s[0])/2,(n[1]+s[1])/2],y=this.transformInv_(v);this.addQuad_(e,_,v,s,r,p,y,l,c-1),this.addQuad_(_,t,n,v,p,o,a,y,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,n,s,r,a,l),(m&14)==0&&this.addTriangle_(e,n,t,r,a,o),m&&((m&13)==0&&this.addTriangle_(t,s,e,o,l,r),(m&7)==0&&this.addTriangle_(t,s,n,o,l,a))}calculateSourceExtent(){const e=Xe();return this.triangles_.forEach(function(t,n,s){const r=t.source;Oi(e,r[0]),Oi(e,r[1]),Oi(e,r[2])}),e}getTriangles(){return this.triangles_}}const wg=Sg;let Qr;const si=[];function $l(i,e,t,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),i.restore()}function eo(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function Rg(){if(Qr===void 0){const i=ke(6,6,si);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",$l(i,4,5,4,0),$l(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;Qr=eo(e,0)||eo(e,4)||eo(e,8),br(i),si.push(i.canvas)}return Qr}function ql(i,e,t,n){const s=ka(t,e,i);let r=Kl(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(r*=o);const a=i.getMetersPerUnit();a!==void 0&&(r/=a);const l=i.getExtent();if(!l||Sr(l,s)){const c=Kl(i,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function Tg(i,e,t,n){const s=wn(t);let r=ql(i,e,s,n);return(!isFinite(r)||r<=0)&&Ta(t,function(o){return r=ql(i,e,o,n),isFinite(r)&&r>0}),r}function Ig(i,e,t,n,s,r,o,a,l,c,u,h){const d=ke(Math.round(t*i),Math.round(t*e),si);if(h||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(t,t);function f(x){return Math.round(x*t)/t}d.globalCompositeOperation="lighter";const g=Xe();l.forEach(function(x,E,S){Su(g,x.extent)});const m=ae(g),_=_t(g),p=ke(Math.round(t*m/n),Math.round(t*_/n),si);h||(p.imageSmoothingEnabled=!1);const v=t/n;l.forEach(function(x,E,S){const w=x.extent[0]-g[0],P=-(x.extent[3]-g[3]),O=ae(x.extent),D=_t(x.extent);x.image.width>0&&x.image.height>0&&p.drawImage(x.image,c,c,x.image.width-2*c,x.image.height-2*c,w*v,P*v,O*v,D*v)});const y=Mn(o);return a.getTriangles().forEach(function(x,E,S){const w=x.source,P=x.target;let O=w[0][0],D=w[0][1],T=w[1][0],F=w[1][1],L=w[2][0],V=w[2][1];const G=f((P[0][0]-y[0])/r),b=f(-(P[0][1]-y[1])/r),M=f((P[1][0]-y[0])/r),R=f(-(P[1][1]-y[1])/r),N=f((P[2][0]-y[0])/r),B=f(-(P[2][1]-y[1])/r),K=O,A=D;O=0,D=0,T-=K,F-=A,L-=K,V-=A;const de=[[T,F,0,0,M-G],[L,V,0,0,N-G],[0,0,T,F,R-b],[0,0,L,V,B-b]],H=ag(de);if(!!H){if(d.save(),d.beginPath(),Rg()||!h){d.moveTo(M,R);const Q=4,le=G-M,Te=b-R;for(let we=0;we<Q;we++)d.lineTo(M+f((we+1)*le/Q),R+f(we*Te/(Q-1))),we!=Q-1&&d.lineTo(M+f((we+1)*le/Q),R+f((we+1)*Te/(Q-1)));d.lineTo(N,B)}else d.moveTo(M,R),d.lineTo(G,b),d.lineTo(N,B);d.clip(),d.transform(H[0],H[2],H[1],H[3],G,b),d.translate(g[0]-K,g[3]-A),d.scale(n/t,-n/t),d.drawImage(p.canvas,0,0),d.restore()}}),br(p),si.push(p.canvas),u&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(x,E,S){const w=x.target,P=(w[0][0]-y[0])/r,O=-(w[0][1]-y[1])/r,D=(w[1][0]-y[0])/r,T=-(w[1][1]-y[1])/r,F=(w[2][0]-y[0])/r,L=-(w[2][1]-y[1])/r;d.beginPath(),d.moveTo(D,T),d.lineTo(P,O),d.lineTo(F,L),d.closePath(),d.stroke()}),d.restore()),d.canvas}class bg extends Iu{constructor(e,t,n,s,r,o,a,l,c,u,h,d){super(r,j.IDLE,{interpolate:!!d}),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?ki(f,g):f;if(Fo(_)===0){this.state=j.EMPTY;return}const p=e.getExtent();p&&(m?m=ki(m,p):m=p);const v=s.getResolution(this.wrappedTileCoord_[0]),y=Tg(e,n,_,v);if(!isFinite(y)||y<=0){this.state=j.EMPTY;return}const x=u!==void 0?u:Zf;if(this.triangulation_=new wg(e,n,_,m,y*x,v),this.triangulation_.getTriangles().length===0){this.state=j.EMPTY;return}this.sourceZ_=t.getZForResolution(y);let E=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(E[1]=ge(E[1],m[1],m[3]),E[3]=ge(E[3],m[1],m[3])):E=ki(E,m)),!Fo(E))this.state=j.EMPTY;else{const S=t.getTileRangeForExtentAndZ(E,this.sourceZ_);for(let w=S.minX;w<=S.maxX;w++)for(let P=S.minY;P<=S.maxY;P++){const O=c(this.sourceZ_,w,P,a);O&&this.sourceTiles_.push(O)}this.sourceTiles_.length===0&&(this.state=j.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==j.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=j.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Ig(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=j.LOADED}this.changed()}load(){if(this.state==j.IDLE){this.state=j.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const n=t.getState();if(n==j.IDLE||n==j.LOADING){e++;const s=Z(t,Y.CHANGE,function(r){const o=t.getState();(o==j.LOADED||o==j.ERROR||o==j.EMPTY)&&(re(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,n,s){t.getState()==j.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(re),this.sourcesListenerKeys_=null}release(){this.canvas_&&(br(this.canvas_.getContext("2d")),si.push(this.canvas_),this.canvas_=null),super.release()}}const Go=bg;function Jl(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function Lr(i,e,t){return i+"/"+e+"/"+t}function Vu(i){return Lr(i[0],i[1],i[2])}function Pg(i){return i.split("/").map(Number)}function Ag(i){return(i[1]<<i[0])+i[2]}function Lg(i,e){const t=i[0],n=i[1],s=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return r?r.containsXY(n,s):!0}class Fg extends Cf{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=Pg(e)[0];this.forEach(s=>{s.tileCoord[0]!==n&&(this.remove(Vu(s.tileCoord)),s.release())})}}const Bu=Fg,to={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},di={PROPERTYCHANGE:"propertychange"};class Fr extends Ir{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Y.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Z(this,e[r],t);return s}return Z(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=Zs(this,e[r],t)}else n=Zs(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)Mg(n);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}Fr.prototype.on;Fr.prototype.once;Fr.prototype.un;function Mg(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)re(i[e]);else re(i)}const ju=Fr;class Ql extends Qe{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Og extends ju{constructor(e){super(),this.on,this.once,this.un,U(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Ql(n,e,t)),n=di.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Ql(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],ui(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const yt=Og;class kg extends yt{constructor(e){super(),this.projection=me(e.projection),this.attributions_=ec(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=ec(e),this.changed()}setState(e){this.state_=e,this.changed()}}function ec(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}const Wu=kg;class zu{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Wn(i,e,t,n,s){return s!==void 0?(s.minX=i,s.maxX=e,s.minY=t,s.maxY=n,s):new zu(i,e,t,n)}const Xu=zu,Dg=42,Da=256;function Uu(i,e,t,n,s){let r;for(e+=n;e<t;e+=n)if(r=s(i.slice(e-n,e),i.slice(e,e+n)),r)return r;return!1}function Ng(i,e,t,n,s){return!Ta(s,function(o){return!_n(i,e,t,n,o[0],o[1])})}function _n(i,e,t,n,s,r){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const c=i[e],u=i[e+1];l<=r?u>r&&(c-a)*(r-l)-(s-a)*(u-l)>0&&o++:u<=r&&(c-a)*(r-l)-(s-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function Na(i,e,t,n,s,r){if(t.length===0||!_n(i,e,t[0],n,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(_n(i,t[o-1],t[o],n,s,r))return!1;return!0}function Gg(i,e,t,n,s,r){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(Na(i,e,l,n,s,r))return!0;e=l[l.length-1]}return!1}function Mr(i,e,t,n,s){const r=wu(Xe(),i,e,t,n);return Pe(s,r)?Jn(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:Uu(i,e,t,n,function(o,a){return Tf(s,o,a)}):!1}function Vg(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){if(Mr(i,e,t[r],n,s))return!0;e=t[r]}return!1}function Yu(i,e,t,n,s){return!!(Mr(i,e,t,n,s)||_n(i,e,t,n,s[0],s[1])||_n(i,e,t,n,s[0],s[3])||_n(i,e,t,n,s[2],s[1])||_n(i,e,t,n,s[2],s[3]))}function Ku(i,e,t,n,s){if(!Yu(i,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let r=1,o=t.length;r<o;++r)if(Ng(i,t[r-1],t[r],n,s)&&!Mr(i,t[r-1],t[r],n,s))return!1;return!0}function Bg(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(Ku(i,e,a,n,s))return!0;e=a[a.length-1]}return!1}function tc(i){return i[0]>0&&i[1]>0}function jg(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function We(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}const zn=[0,0,0],jt=5;class Wg{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,$(Mf(this.resolutions_,function(s,r){return r-s},!0),17);let t;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,$(this.origins_.length==this.resolutions_.length,20));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Mn(n)),$(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,$(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Da,$(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(s,r){const o=new Xu(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([t,r,a])}forEachTileCoordParentTileRange(e,t,n,s){let r,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=Wn(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,c,n),t(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,o=e[2]*2;return Wn(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return Wn(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),c=Math.floor(r*l),u=Math.floor(o*l);if(t<s)return Wn(c,c,u,u,n);const h=Math.floor(l*(r+1))-1,d=Math.floor(l*(o+1))-1;return Wn(c,h,u,d,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeExtent(e,t,n){const s=this.getOrigin(e),r=this.getResolution(e),o=We(this.getTileSize(e),this.tmpSize_),a=s[0]+t.minX*o[0]*r,l=s[0]+(t.maxX+1)*o[0]*r,c=s[1]+t.minY*o[1]*r,u=s[1]+(t.maxY+1)*o[1]*r;return ot(a,c,l,u,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,zn);const s=zn[1],r=zn[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,zn);const o=zn[1],a=zn[2];return Wn(s,o,r,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=We(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=We(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*r[0]*s,a=n[1]-(e[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return ot(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=We(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/n/c[0],h=a*(l[1]-t)/n/c[1];return s?(u=Es(u,jt)-1,h=Es(h,jt)-1):(u=Cs(u,jt),h=Cs(h,jt)),Jl(o,u,h,r)}getTileCoordForXYAndZ_(e,t,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=We(this.getTileSize(n),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return s?(c=Es(c,jt)-1,u=Es(u,jt)-1):(c=Cs(c,jt),u=Cs(u,jt)),Jl(n,c,u,r)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Pa(this.resolutions_,e,t||0);return ge(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Yu(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}const Hu=Wg;function Zu(i){let e=i.getDefaultTileGrid();return e||(e=Yg(i),i.setDefaultTileGrid(e)),e}function zg(i,e,t){const n=e[0],s=i.getTileCoordCenter(e),r=Ga(t);if(!Sr(r,s)){const o=ae(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return e}function Xg(i,e,t,n){n=n!==void 0?n:"top-left";const s=$u(i,e,t);return new Hu({extent:i,origin:wf(i,n),resolutions:s,tileSize:t})}function Ug(i){const e=i||{},t=e.extent||me("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:$u(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Hu(n)}function $u(i,e,t,n){e=e!==void 0?e:Dg,t=We(t!==void 0?t:Da);const s=_t(i),r=ae(i);n=n>0?n:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function Yg(i,e,t,n){const s=Ga(i);return Xg(s,e,t,n)}function Ga(i){i=me(i);let e=i.getExtent();if(!e){const t=180*Tn.degrees/i.getMetersPerUnit();e=ot(-t,-t,t,t)}return e}class Kg extends Wu{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&We(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Bu(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let o=!0,a,l,c;for(let u=n.minX;u<=n.maxX;++u)for(let h=n.minY;h<=n.maxY;++h)l=Lr(t,u,h),c=!1,r.containsKey(l)&&(a=r.get(l),c=a.getState()===j.LOADED,c&&(c=s(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,r){return z()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Zu(e)}getTileCacheForProjection(e){const t=this.getProjection();return $(t===null||gn(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(t),o=We(s.getTileSize(e),this.tmpSize);return r==1?o:jg(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=zg(n,e,t)),Lg(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,s){}}class Hg extends Qe{constructor(e,t){super(e),this.tile=t}}const Zg=Kg;function $g(i,e){const t=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(!!o)return i.replace(t,o[0].toString()).replace(n,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const c=o[0],u=e.getFullTileRange(c);return $(u,55),(u.getHeight()-o[2]-1).toString()})}}function qg(i,e){const t=i.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=$g(i[s],e);return Jg(n)}function Jg(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const s=Ag(e),r=xn(s,i.length);return i[r](e,t,n)}}function Qg(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=n;r<=s;++r)e.push(i.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(i.replace(t[0],s.toString()));return e}return e.push(i),e}class Va extends Zg{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Va.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=U(t),s=t.getState();let r;s==j.LOADING?(this.tileLoadingKeys_[n]=!0,r=to.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==j.ERROR?to.TILELOADERROR:s==j.LOADED?to.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new Hg(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Qg(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(qg(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const s=Lr(e,t,n);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const em=Va;class tm extends em{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:nm,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Lu,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!gn(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!gn(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||gn(t,e)))return this.tileGrid;const n=U(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Zu(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||gn(t,e))return this.tileCache;const n=U(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Bu(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,s,r,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,u=new this.tileClass(a,c!==void 0?j.IDLE:j.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Y.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,n,s,r){const o=this.getProjection();if(!o||!r||gn(o,r))return this.getTileInternal(e,t,n,s,o||r);const a=this.getTileCacheForProjection(r),l=[e,t,n];let c;const u=Vu(l);a.containsKey(u)&&(c=a.get(u));const h=this.getKey();if(c&&c.key==h)return c;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),m=new Go(o,d,r,f,l,g,this.getTilePixelRatio(s),this.getGutter(),(_,p,v,y)=>this.getTileInternal(_,p,v,y,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=h,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(e,t,n,s,r){let o=null;const a=Lr(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,n,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,n,s,r,l),c.getState()==j.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=me(e);if(n){const s=U(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function nm(i,e){i.getImage().src=e}const im=tm;class sm extends im{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:Ug({extent:Ga(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const qu=sm;class Ba extends yt{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ba(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(re(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Z(e,Y.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?rm(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function rm(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:($(typeof i.getZIndex=="function",41),e=[i]),function(){return e}}const it=Ba;new Array(6);function mt(){return[1,0,0,1,0,0]}function om(i,e,t,n,s,r,o){return i[0]=e,i[1]=t,i[2]=n,i[3]=s,i[4]=r,i[5]=o,i}function am(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Ce(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function lm(i,e,t){return om(i,e,0,0,t,0,0)}function rn(i,e,t,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return i[0]=n*c,i[1]=s*l,i[2]=-n*l,i[3]=s*c,i[4]=o*n*c-a*n*l+e,i[5]=o*s*l+a*s*c+t,i}function ja(i,e){const t=cm(e);$(t!==0,32);const n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-s/t,i[2]=-r/t,i[3]=n/t,i[4]=(r*l-o*a)/t,i[5]=-(n*l-s*a)/t,i}function cm(i){return i[0]*i[3]-i[1]*i[2]}let nc;function Ju(i){const e="matrix("+i.join(", ")+")";if(Aa)return e;const t=nc||(nc=document.createElement("div"));return t.style.transform=e,t.style.transform}function Cn(i,e,t,n,s,r){r=r||[];let o=0;for(let a=e;a<t;a+=n){const l=i[a],c=i[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function Wa(i,e,t,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],u=r[1];let h=0;for(let d=e;d<t;d+=n){const f=i[d]-c,g=i[d+1]-u;o[h++]=c+f*a-g*l,o[h++]=u+f*l+g*a;for(let m=d+2;m<d+n;++m)o[h++]=i[m]}return o&&o.length!=h&&(o.length=h),o}function um(i,e,t,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<t;h+=n){const d=i[h]-l,f=i[h+1]-c;a[u++]=l+s*d,a[u++]=c+r*f;for(let g=h+2;g<h+n;++g)a[u++]=i[g]}return a&&a.length!=u&&(a.length=u),a}function Qu(i,e,t,n,s,r,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const ic=mt();class hm extends yt{constructor(){super(),this.extent_=Xe(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Of(function(e,t,n){if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return z()}closestPointXY(e,t,n,s){return z()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return z()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&rs(t),this.extentRevision_=this.getRevision()}return Rf(this.extent_,e)}rotate(e,t){z()}scale(e,t,n){z()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return z()}getType(){return z()}applyTransform(e){z()}intersectsExtent(e){return z()}translate(e,t){z()}transform(e,t){const n=me(e),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),c=n.getWorldExtent(),u=_t(c)/_t(l);return rn(ic,c[0],c[3],u,-u,0,0,0),Cn(r,0,r.length,a,ic,o),Bi(n,t)(r,o,a)}:Bi(n,t);return this.applyTransform(s),this}}const eh=hm;class dm extends eh{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Eu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return z()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Js(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){z()}setLayout(e,t,n){let s;if(e)s=Js(e);else{for(let r=0;r<n;++r){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=fm(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Wa(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=wn(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();um(s,0,s.length,r,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Qu(n,0,n.length,s,e,t,n),this.changed()}}}function fm(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function Js(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function gm(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return Cn(n,0,n.length,s,e,t)}const an=dm;function th(i,e,t,n){for(let s=0,r=t.length;s<r;++s)i[e++]=t[s];return e}function Or(i,e,t,n){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function za(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=Or(i,e,t[o],n);s[r++]=l,e=l}return s.length=r,s}function mm(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=za(i,e,t[o],n,s[r]);l.length===0&&(l[0]=e),s[r++]=l,e=l[l.length-1]}return s.length=r,s}class Xa extends an{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Xa(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=bt(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return Vs(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Ra(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=th(this.flatCoordinates,0,e,this.stride),this.changed()}}const At=Xa,fe={ADD:"add",REMOVE:"remove"},sc={LENGTH:"length"};class Ss extends Qe{constructor(e,t,n){super(e),this.element=t,this.index=n}}class _m extends yt{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(sc.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Ss(fe.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Ss(fe.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Ss(fe.REMOVE,s,e)),this.dispatchEvent(new Ss(fe.ADD,t,e))}updateLength_(){this.set(sc.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new xu(58)}}const ze=_m;function ym(i,e,t,n,s){nh(i,e,t||0,n||i.length-1,s||pm)}function nh(i,e,t,n,s){for(;n>t;){if(n-t>600){var r=n-t+1,o=e-t+1,a=Math.log(r),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),u=Math.max(t,Math.floor(e-o*l/r+c)),h=Math.min(n,Math.floor(e+(r-o)*l/r+c));nh(i,e,u,h,s)}var d=i[e],f=t,g=n;for(Ti(i,t,e),s(i[n],d)>0&&Ti(i,t,n);f<g;){for(Ti(i,f,g),f++,g--;s(i[f],d)<0;)f++;for(;s(i[g],d)>0;)g--}s(i[t],d)===0?Ti(i,t,g):(g++,Ti(i,g,n)),g<=e&&(t=g+1),e<=g&&(n=g-1)}}function Ti(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}function pm(i,e){return i<e?-1:i>e?1:0}class ih{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!Rs(e,t))return n;const s=this.toBBox,r=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;Rs(e,l)&&(t.leaf?n.push(a):io(e,l)?this._all(a,n):r.push(a))}t=r.pop()}return n}collides(e){let t=this.data;if(!Rs(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const r=t.children[s],o=t.leaf?this.toBBox(r):r;if(Rs(e,o)){if(t.leaf||io(e,o))return!0;n.push(r)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Yn([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),r=[],o=[];let a,l,c;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),n.leaf){const u=vm(e,n.children,t);if(u!==-1)return n.children.splice(u,1),r.push(n),this._condense(r),this}!c&&!n.leaf&&io(n,s)?(r.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const r=n-t+1;let o=this._maxEntries,a;if(r<=o)return a=Yn(e.slice(t,n+1)),Xn(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=Yn([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));rc(e,t,n,c,this.compareMinX);for(let u=t;u<=n;u+=c){const h=Math.min(u+c-1,n);rc(e,u,h,l,this.compareMinY);for(let d=u;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,s-1))}}return Xn(a,this.toBBox),a}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let r=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=no(c),h=Em(e,c)-u;h<o?(o=h,r=u<r?u:r,a=c):h===o&&u<r&&(r=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,t,r);for(o.children.push(e),Fi(o,s);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(s,r,t)}_split(e,t){const n=e[t],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),a=Yn(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Xn(n,this.toBBox),Xn(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=Yn([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Xn(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,r=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=Li(e,0,a,this.toBBox),c=Li(e,a,n,this.toBBox),u=Sm(l,c),h=no(l)+no(c);u<r?(r=u,s=a,o=h<o?h:o):u===r&&h<o&&(o=h,s=a)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:xm,r=e.leaf?this.compareMinY:Cm,o=this._allDistMargin(e,t,n,s),a=this._allDistMargin(e,t,n,r);o<a&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const r=this.toBBox,o=Li(e,0,t,r),a=Li(e,n-t,n,r);let l=ws(o)+ws(a);for(let c=t;c<n-t;c++){const u=e.children[c];Fi(o,e.leaf?r(u):u),l+=ws(o)}for(let c=n-t-1;c>=t;c--){const u=e.children[c];Fi(a,e.leaf?r(u):u),l+=ws(a)}return l}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)Fi(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Xn(e[t],this.toBBox)}}function vm(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function Xn(i,e){Li(i,0,i.children.length,e,i)}function Li(i,e,t,n,s){s||(s=Yn(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<t;r++){const o=i.children[r];Fi(s,i.leaf?n(o):o)}return s}function Fi(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function xm(i,e){return i.minX-e.minX}function Cm(i,e){return i.minY-e.minY}function no(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function ws(i){return i.maxX-i.minX+(i.maxY-i.minY)}function Em(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function Sm(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),s=Math.min(i.maxX,e.maxX),r=Math.min(i.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,r-n)}function io(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function Rs(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function Yn(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rc(i,e,t,n,s){const r=[e,t];for(;r.length;){if(t=r.pop(),e=r.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;ym(i,o,e,t,s),r.push(e,o,o,t)}}class wm{constructor(e){this.rbush_=new ih(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[U(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[s]=l,this.items_[U(a)]=l}this.rbush_.load(n)}remove(e){const t=U(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[U(t)],s=[n.minX,n.minY,n.maxX,n.maxY];Vi(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,r=e.length;s<r;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return ui(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return ot(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const Qs=wm,Fe={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Rm(i,e){return[[-1/0,-1/0,1/0,1/0]]}let Tm=!1;function Im(i,e,t,n,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,s):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Tm,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?r(e.readFeatures(u,{extent:t,featureProjection:s}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function oc(i,e){return function(t,n,s,r,o){const a=this;Im(i,e,t,n,s,function(l,c){a.addFeatures(l),r!==void 0&&r(l)},o||ci)}}class Wt extends Qe{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class bm extends Wu{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=ci,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&($(this.format_,7),this.loader_=oc(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Rm;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Qs:null,this.loadedExtentsRtree_=new Qs,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new ze(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=U(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Wt(Fe.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[Z(t,Y.CHANGE,this.handleFeatureChange_,this),Z(t,di.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let n=!0;const s=t.getId();return s!==void 0&&(s.toString()in this.idIndex_?n=!1:this.idIndex_[s.toString()]=t),n&&($(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=U(a);this.addToIndex_(l,a)&&n.push(a)}for(let r=0,o=n.length;r<o;r++){const a=n[r],l=U(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(Fe.ADDFEATURE))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new Wt(Fe.ADDFEATURE,n[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Fe.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Fe.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(fe.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(fe.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(re);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(n);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Wt(Fe.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){if(s.getGeometry().intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){if(n.getGeometry().intersectsExtent(e)){const r=t(n);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ui(this.nullGeometryFeatures_)||st(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=bf(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}else if(this.featuresCollection_)return this.featuresCollection_.getArray().slice(0);return[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Ot,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),h=a;if(a=u.closestPointXY(n,s,o,a),a<h){r=c;const d=Math.sqrt(a);l[0]=n-d,l[1]=s-d,l[2]=n+d,l[3]=s+d}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=U(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const r=t.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Wt(Fe.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:U(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ui(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,n);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(u){return Jn(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Wt(Fe.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Wt(Fe.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Wt(Fe.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(s){if(Vi(s.extent,e))return n=s,!0}),n&&t.remove(n)}removeFeature(e){if(!e)return;const t=U(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=U(e),n=this.featureChangeKeys_[t];if(!n)return;n.forEach(re),delete this.featureChangeKeys_[t];const s=e.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new Wt(Fe.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){$(this.format_,7),this.url_=e,this.setLoader(oc(e,this.format_))}}const En=bm,sh='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Pm extends qu{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[sh];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const ac=Pm,ie={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Am extends yt{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ie.OPACITY]=e.opacity!==void 0?e.opacity:1,$(typeof t[ie.OPACITY]=="number",64),t[ie.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ie.Z_INDEX]=e.zIndex,t[ie.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ie.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ie.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ie.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=ge(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return z()}getLayerStatesArray(e){return z()}getExtent(){return this.get(ie.EXTENT)}getMaxResolution(){return this.get(ie.MAX_RESOLUTION)}getMinResolution(){return this.get(ie.MIN_RESOLUTION)}getMinZoom(){return this.get(ie.MIN_ZOOM)}getMaxZoom(){return this.get(ie.MAX_ZOOM)}getOpacity(){return this.get(ie.OPACITY)}getSourceState(){return z()}getVisible(){return this.get(ie.VISIBLE)}getZIndex(){return this.get(ie.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ie.EXTENT,e)}setMaxResolution(e){this.set(ie.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ie.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ie.MAX_ZOOM,e)}setMinZoom(e){this.set(ie.MIN_ZOOM,e)}setOpacity(e){$(typeof e=="number",64),this.set(ie.OPACITY,e)}setVisible(e){this.set(ie.VISIBLE,e)}setZIndex(e){this.set(ie.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const rh=Am,en={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},be={ANIMATING:0,INTERACTING:1},tt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function lc(i,e,t){return function(n,s,r,o,a){if(!n)return;if(!s&&!e)return n;const l=e?0:r[0]*s,c=e?0:r[1]*s,u=a?a[0]:0,h=a?a[1]:0;let d=i[0]+l/2+u,f=i[2]-l/2+u,g=i[1]+c/2+h,m=i[3]-c/2+h;d>f&&(d=(f+d)/2,f=d),g>m&&(g=(m+g)/2,m=g);let _=ge(n[0],d,f),p=ge(n[1],g,m);if(o&&t&&s){const v=30*s;_+=-v*Math.log(1+Math.max(0,d-n[0])/v)+v*Math.log(1+Math.max(0,n[0]-f)/v),p+=-v*Math.log(1+Math.max(0,g-n[1])/v)+v*Math.log(1+Math.max(0,n[1]-m)/v)}return[_,p]}}function Lm(i){return i}function Ua(i,e,t,n){const s=ae(e)/t[0],r=_t(e)/t[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function Ya(i,e,t){let n=Math.min(i,e);const s=50;return n*=Math.log(1+s*Math.max(0,i/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/i-1))/s+1),ge(n,t/2,e*2)}function Fm(i,e,t,n){return e=e!==void 0?e:!0,function(s,r,o,a){if(s!==void 0){const l=i[0],c=i[i.length-1],u=t?Ua(l,t,o,n):l;if(a)return e?Ya(s,u,c):ge(s,c,u);const h=Math.min(u,s),d=Math.floor(Pa(i,h,r));return i[d]>u&&d<i.length-1?i[d+1]:i[d]}}}function Mm(i,e,t,n,s,r){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const u=s?Ua(e,s,l,r):e;if(c)return n?Ya(o,u,t):ge(o,t,u);const h=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(i)-h),f=-a*(.5-h)+.5,g=Math.min(u,o),m=Math.floor(Math.log(e/g)/Math.log(i)+f),_=Math.max(d,m),p=e/Math.pow(i,_);return ge(p,t,u)}}}function cc(i,e,t,n,s){return t=t!==void 0?t:!0,function(r,o,a,l){if(r!==void 0){const c=n?Ua(i,n,a,s):i;return!t||!l?ge(r,e,c):Ya(r,c,e)}}}function Ka(i){if(i!==void 0)return 0}function uc(i){if(i!==void 0)return i}function Om(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function km(i){return i=i||Bs(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=i?0:e}}function hc(i,e,t,n,s,r,o){const a=i[e],l=i[e+1],c=i[t]-a,u=i[t+1]-l;let h;if(c===0&&u===0)h=e;else{const d=((s-a)*c+(r-l)*u)/(c*c+u*u);if(d>1)h=t;else if(d>0){for(let f=0;f<n;++f)o[f]=je(i[e+f],i[t+f],d);o.length=n;return}else h=e}for(let d=0;d<n;++d)o[d]=i[h+d];o.length=n}function Ha(i,e,t,n,s){let r=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],c=bt(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function Za(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=Ha(i,e,a,n,s),e=a}return s}function Dm(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=Za(i,e,a,n,s),e=a[a.length-1]}return s}function $a(i,e,t,n,s,r,o,a,l,c,u){if(e==t)return c;let h,d;if(s===0){if(d=bt(o,a,i[e],i[e+1]),d<c){for(h=0;h<n;++h)l[h]=i[e+h];return l.length=n,d}return c}u=u||[NaN,NaN];let f=e+n;for(;f<t;)if(hc(i,f-n,f,n,o,a,u),d=bt(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(r&&(hc(i,t-n,e,n,o,a,u),d=bt(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n}return c}function qa(i,e,t,n,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=$a(i,e,f,n,s,r,o,a,l,c,u),e=f}return c}function Nm(i,e,t,n,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=qa(i,e,f,n,s,r,o,a,l,c,u),e=f[f.length-1]}return c}function Ja(i,e,t,n,s,r,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)r[o++]=i[e],r[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-n];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let f=0;const g=i[d],m=i[d+1],_=i[h],p=i[h+1];for(let v=d+n;v<h;v+=n){const y=i[v],x=i[v+1],E=og(y,x,g,m,_,p);E>f&&(u=v,f=E)}f>s&&(l[(u-e)/n]=1,d+n<u&&c.push(d,u),u+n<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(r[o++]=i[e+h*n],r[o++]=i[e+h*n+1]);return o}function Gm(i,e,t,n,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=Ja(i,e,u,n,s,r,o),a.push(o),e=u}return o}function dn(i,e){return e*Math.round(i/e)}function Vm(i,e,t,n,s,r,o){if(e==t)return o;let a=dn(i[e],s),l=dn(i[e+1],s);e+=n,r[o++]=a,r[o++]=l;let c,u;do if(c=dn(i[e],s),u=dn(i[e+1],s),e+=n,e==t)return r[o++]=c,r[o++]=u,o;while(c==a&&u==l);for(;e<t;){const h=dn(i[e],s),d=dn(i[e+1],s);if(e+=n,h==c&&d==u)continue;const f=c-a,g=u-l,m=h-a,_=d-l;if(f*_==g*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(g<0&&_<g||g==_||g>0&&_>g)){c=h,u=d;continue}r[o++]=c,r[o++]=u,a=c,l=u,c=h,u=d}return r[o++]=c,r[o++]=u,o}function oh(i,e,t,n,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=Vm(i,e,u,n,s,r,o),a.push(o),e=u}return o}function Bm(i,e,t,n,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l],h=[];o=oh(i,e,u,n,s,r,o,h),a.push(h),e=u[u.length-1]}return o}function qt(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=e;o<t;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function Wi(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=qt(i,e,l,n,s[r]),e=l}return s.length=r,s}function Vo(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=l.length===1&&l[0]===e?[]:Wi(i,e,l,n,s[r]),e=l[l.length-1]}return s.length=r,s}function ah(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=o*a-r*l,r=a,o=l}return s/2}function lh(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=ah(i,e,a,n),e=a}return s}function jm(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=lh(i,e,a,n),e=a[a.length-1]}return s}class er extends an{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new er(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<Fn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ha(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return ah(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return qt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Ja(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new er(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Or(this.flatCoordinates,0,e,this.stride),this.changed()}}const dc=er;function ch(i,e,t,n,s,r,o){let a,l,c,u,h,d,f;const g=s[r+1],m=[];for(let v=0,y=t.length;v<y;++v){const x=t[v];for(u=i[x-n],d=i[x-n+1],a=e;a<x;a+=n)h=i[a],f=i[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(h-u)+u,m.push(c)),u=h,d=f}let _=NaN,p=-1/0;for(m.sort(Rn),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const v=Math.abs(h-u);v>p&&(c=(u+h)/2,Na(i,e,t,n,c,g)&&(_=c,p=v)),u=h}return isNaN(_)&&(_=s[r]),o?(o.push(_,g,p),o):[_,g,p]}function Wm(i,e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];r=ch(i,e,l,n,s,2*o,r),e=l[l.length-1]}return r}function zm(i,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const r=i[e+s];i[e+s]=i[t-n+s],i[t-n+s]=r}e+=n,t-=n}}function uh(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function hh(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=uh(i,e,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function Xm(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(!hh(i,e,a,n,s))return!1;a.length&&(e=a[a.length-1])}return!0}function Bo(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=uh(i,e,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&zm(i,e,a,n),e=a}return e}function fc(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r)e=Bo(i,e,t[r],n,s);return e}class fi extends an{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?st(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new fi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Za(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qa(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Na(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return lh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Bo(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Wi(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=wn(this.getExtent());this.flatInteriorPoint_=ch(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new At(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new dc(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new dc(t.slice(r,l),e);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;hh(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Bo(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=oh(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new fi(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return Ku(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=za(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}const In=fi;function gc(i){const e=i[0],t=i[1],n=i[2],s=i[3],r=[e,t,e,s,n,s,n,t,e,t];return new fi(r,"XY",[r.length])}function jo(i,e,t){e=e||32;const n=i.getStride(),s=i.getLayout(),r=i.getCenter(),o=n*(e+1),a=new Array(o);for(let u=0;u<o;u+=n){a[u]=0,a[u+1]=0;for(let h=2;h<n;h++)a[u+h]=r[h]}const l=[a.length],c=new fi(a,s,l);return Um(c,r,i.getRadius(),t),c}function Um(i,e,t,n){const s=i.getFlatCoordinates(),r=i.getStride(),o=s.length/r-1,a=n||0;for(let l=0;l<=o;++l){const c=l*r,u=a+xn(l,o)*2*Math.PI/o;s[c]=e[0]+t*Math.cos(u),s[c+1]=e[1]+t*Math.sin(u)}i.changed()}const so=0;class Ym extends yt{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Oa(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&mg(),e.center&&(e.center=oe(e.center,this.projection_)),e.extent&&(e.extent=$t(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in tt)delete t[a];this.setProperties(t,!0);const n=Hm(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=Km(e),r=n.constraint,o=Zm(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-t[3]+t[1]-s[1]),a=r/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=oe(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=oe(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const u=arguments[s];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(s===t){n&&Ts(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<t;++s){const u=arguments[s],h={start:r,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||Nf,callback:n};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const d=xn(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}$m(h)?h.complete=!0:r+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(be.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[be.ANIMATING]>0}getInteracting(){return this.hints_[be.INTERACTING]>0}cancelAnimations(){this.setHint(be.ANIMATING,-this.hints_[be.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&Ts(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):r=!1;const h=l.easing(u);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=d+h*(g-d),p=f+h*(m-f);this.targetCenter_=[_,p]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?xn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(be.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&Ts(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],Fa(n,e-this.getRotation()),lg(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=t[0]-e*(t[0]-s[0])/r,a=t[1]-e*(t[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&hi(e,this.getProjection())}getCenterInternal(){return this.get(tt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return ji(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();$(t,1);const n=this.getResolution();$(n!==void 0,2);const s=this.getRotation();return $(s!==void 0,3),Mo(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(tt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal($t(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=ae(e)/t[0],s=_t(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(tt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/t;return function(o){return Math.log(n/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=ro(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const r=Pa(this.resolutions_,e,1);t=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=ge(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,ge(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if($(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){$(!Ia(e),25);const s=$t(e,this.getProjection());n=gc(s)}else if(e.getType()==="Circle"){const s=$t(e.getExtent(),this.getProjection());n=gc(s),n.rotate(this.getRotation(),wn(s))}else{const s=gt();s?n=e.clone().transform(s,this.getProjection()):n=e}this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,d=r.length;h<d;h+=o){const f=r[h]*n-r[h+1]*s,g=r[h]*s+r[h+1]*n;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],r=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),d=wn(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const f=d[0]*h-d[1]*u,g=d[1]*h+d[0]*u,m=this.getConstrainedCenter([f,g],l),_=t.callback?t.callback:ci;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),Ts(_,!0))}centerOn(e,t,n){this.centerOnInternal(oe(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(ro(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=ro(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,n);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=hi(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&oe(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=oe(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&oe(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(tt.ROTATION)!==s&&this.set(tt.ROTATION,s),this.get(tt.RESOLUTION)!==o&&(this.set(tt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(tt.CENTER)||!nt(this.get(tt.CENTER),a))&&this.set(tt.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!nt(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:vi,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(be.INTERACTING,1)}endInteraction(e,t,n){n=n&&oe(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){!this.getInteracting()||(this.setHint(be.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function Ts(i,e){setTimeout(function(){i(e)},0)}function Km(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return lc(i.extent,i.constrainOnlyCenter,t)}const e=Oa(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,lc(t,!1,!1)}return Lm}function Hm(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:so,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,u=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=Oa(i.projection,"EPSG:3857"),f=d.getExtent();let g=i.constrainOnlyCenter,m=i.extent;if(!c&&!m&&d.isGlobal()&&(g=!1,m=f),i.resolutions!==void 0){const _=i.resolutions;t=_[o],n=_[a]!==void 0?_[a]:_[_.length-1],i.constrainResolution?e=Fm(_,u,!g&&m,h):e=cc(t,n,u,!g&&m,h)}else{const p=(f?Math.max(ae(f),_t(f)):360*Tn.degrees/d.getMetersPerUnit())/Da/Math.pow(2,so),v=p/Math.pow(2,28-so);t=i.maxResolution,t!==void 0?o=0:t=p/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=p/Math.pow(l,a):n=v),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=Mm(l,t,n,u,!g&&m,h):e=cc(t,n,u,!g&&m,h)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function Zm(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?km():t===!1?uc:typeof t=="number"?Om(t):uc}return Ka}function $m(i){return!(i.sourceCenter&&i.targetCenter&&!nt(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function ro(i,e,t,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,l=i[1]*r+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const c=a*r-l*o,u=l*r+a*o;return[c,u]}const at=Ym;class qm extends rh{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ie.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ie.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(re(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Z(e,Y.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;e instanceof at?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e;const n=this.getExtent();return this.getVisible()&&Qa(this.getLayerState(),t.viewState)&&(!n||Pe(n,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];const s=e instanceof at?e.getViewStateAndExtent():e;let r=t(s);return Array.isArray(r)||(r=[r]),r}render(e,t){const n=this.getRenderer();if(n.prepareFrame(e))return this.rendered=!0,n.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(ie.MAP,e)}getMapInternal(){return this.get(ie.MAP)}setMap(e){this.mapPrecomposeKey_&&(re(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(re(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Z(e,en.PRECOMPOSE,function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);$(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=Z(this,Y.CHANGE,e.render,e),this.changed())}setSource(e){this.set(ie.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Qa(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}const kr=qm;class Jm extends ju{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return z()}getData(e){return null}prepareFrame(e){return z()}renderFrame(e,t){return z()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(s,r)=>{const o=this.loadedTileCallback.bind(this,n,s);return e.forEachLoadedTile(t,s,r,o)}}forEachFeatureAtCoordinate(e,t,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===pe.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=pe.LOADED&&t!=pe.ERROR&&e.addEventListener(Y.CHANGE,this.boundHandleImageChange_),t==pe.IDLE&&(e.load(),t=e.getState()),t==pe.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Qm=Jm;class e_ extends Qe{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}const dh=e_,t_=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n_=/^([a-z]*)$|^hsla?\(.*\)$/i;function fh(i){return typeof i=="string"?i:gh(i)}function i_(i){const e=document.createElement("div");if(e.style.color=i,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const s_=function(){const e={};let t=0;return function(n){let s;if(e.hasOwnProperty(n))s=e[n];else{if(t>=1024){let r=0;for(const o in e)(r++&3)===0&&(delete e[o],--t)}s=r_(n),e[n]=s,++t}return s}}();function tr(i){return Array.isArray(i)?i:s_(i)}function r_(i){let e,t,n,s,r;if(n_.exec(i)&&(i=i_(i)),t_.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(i.substr(1+0*a,a),16),t=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),l?s=parseInt(i.substr(1+3*a,a),16):s=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,l&&(s=(s<<4)+s)),r=[e,t,n,s/255]}else i.startsWith("rgba(")?(r=i.slice(5,-1).split(",").map(Number),mc(r)):i.startsWith("rgb(")?(r=i.slice(4,-1).split(",").map(Number),r.push(1),mc(r)):$(!1,14);return r}function mc(i){return i[0]=ge(i[0]+.5|0,0,255),i[1]=ge(i[1]+.5|0,0,255),i[2]=ge(i[2]+.5|0,0,255),i[3]=ge(i[3],0,1),i}function gh(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+e+","+t+","+n+","+s+")"}const _c=[];let Kn=null;function o_(){Kn=ke(1,1,void 0,{willReadFrequently:!0})}class a_ extends Qm{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=mt(),this.pixelTransform=mt(),this.inversePixelTransform=mt(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){Kn||o_(),Kn.clearRect(0,0,1,1);let s;try{Kn.drawImage(e,t,n,1,1,0,0,1,1),s=Kn.getImageData(0,0,1,1).data}catch{return Kn=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&Nt(tr(e.style.backgroundColor),tr(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=ke();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=Mn(n),r=Tr(n),o=Rr(n),a=wr(n);Ce(t.coordinateToPixelTransform,s),Ce(t.coordinateToPixelTransform,r),Ce(t.coordinateToPixelTransform,o),Ce(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ce(l,s),Ce(l,r),Ce(l,o),Ce(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const r=new dh(e,this.inversePixelTransform,n,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(en.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(en.POSTRENDER,e,t)}getRenderTransform(e,t,n,s,r,o,a){const l=r/2,c=o/2,u=s/t,h=-u,d=-e[0]+a,f=-e[1];return rn(this.tempTransform,l,c,u,h,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const mh=a_,Is={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class l_ extends kr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Is.PRELOAD)}setPreload(e){this.set(Is.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Is.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Is.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const c_=l_;class u_ extends mh{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Xe(),this.tmpTileRange_=new Xu(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),s=t.getUseInterimTilesOnError();return n==j.LOADED||n==j.EMPTY||n==j.ERROR&&!s}getTile(e,t,n,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,n,r,o);return c.getState()==j.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=Ce(t.pixelToCoordinateTransform,e.slice()),r=n.getExtent();if(r&&!Sr(r,s))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=n.getRenderSource(),u=c.getTileGridForProjection(l.projection),h=c.getTilePixelRatio(t.pixelRatio);for(let d=u.getZForResolution(l.resolution);d>=u.getMinZoom();--d){const f=u.getTileCoordForCoordAndZ(s,d),g=c.getTile(d,f[1],f[2],o,a);if(!(g instanceof Lu||g instanceof Go)||g instanceof Go&&g.getState()===j.EMPTY)return null;if(g.getState()!==j.LOADED)continue;const m=u.getOrigin(d),_=We(u.getTileSize(d)),p=u.getResolution(d),v=Math.floor(h*((s[0]-m[0])/p-f[1]*_[0])),y=Math.floor(h*((m[1]-s[1])/p-f[2]*_[1])),x=Math.round(h*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),v+x,y+x)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=e.pixelRatio,u=this.getLayer(),h=u.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(r),g=f.getZForResolution(o,h.zDirection),m=f.getResolution(g);let _=e.extent;const p=e.viewState.resolution,v=h.getTilePixelRatio(c),y=Math.round(ae(_)/p*c),x=Math.round(_t(_)/p*c),E=n.extent&&$t(n.extent,r);E&&(_=ki(_,$t(n.extent,r)));const S=m*y/2/v,w=m*x/2/v,P=[a[0]-S,a[1]-w,a[0]+S,a[1]+w],O=f.getTileRangeForExtentAndZ(_,g),D={};D[g]={};const T=this.createLoadedTileFinder(h,r,D),F=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;const V=l?Oo(s.center,p,l,e.size):void 0;for(let de=O.minX;de<=O.maxX;++de)for(let H=O.minY;H<=O.maxY;++H){if(l&&!f.tileCoordIntersectsViewport([g,de,H],V))continue;const Q=this.getTile(g,de,H,e);if(this.isDrawableTile(Q)){const we=U(this);if(Q.getState()==j.LOADED){D[g][Q.tileCoord.toString()]=Q;let vt=Q.inTransition(we);vt&&n.opacity!==1&&(Q.endTransition(we),vt=!1),!this.newTiles_&&(vt||!this.renderedTiles.includes(Q))&&(this.newTiles_=!0)}if(Q.getAlpha(we,e.time)===1)continue}const le=f.getTileCoordChildTileRange(Q.tileCoord,L,F);let Te=!1;le&&(Te=T(g+1,le)),Te||f.forEachTileCoordParentTileRange(Q.tileCoord,T,L,F)}const G=m/o*c/v;rn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-y/2,-x/2);const b=Ju(this.pixelTransform);this.useContainer(t,b,this.getBackground(e));const M=this.context,R=M.canvas;ja(this.inversePixelTransform,this.pixelTransform),rn(this.tempTransform,y/2,x/2,G,G,0,-y/2,-x/2),R.width!=y||R.height!=x?(R.width=y,R.height=x):this.containerReused||M.clearRect(0,0,y,x),E&&this.clipUnrotated(M,e,E),h.getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,e),this.renderedTiles.length=0;let N=Object.keys(D).map(Number);N.sort(Rn);let B,K,A;n.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?N=N.reverse():(B=[],K=[]);for(let de=N.length-1;de>=0;--de){const H=N[de],Q=h.getTilePixelSize(H,c,r),Te=f.getResolution(H)/m,we=Q[0]*Te*G,vt=Q[1]*Te*G,kn=f.getTileCoordForCoordAndZ(Mn(P),H),hs=f.getTileCoordExtent(kn),Dn=Ce(this.tempTransform,[v*(hs[0]-P[0])/m,v*(P[3]-hs[3])/m]),ds=v*h.getGutterForProjection(r),Gt=D[H];for(const Ei in Gt){const Vt=Gt[Ei],fs=Vt.tileCoord,gs=kn[1]-fs[1],ms=Math.round(Dn[0]-(gs-1)*we),Nn=kn[2]-fs[2],Yr=Math.round(Dn[1]-(Nn-1)*vt),De=Math.round(Dn[0]-gs*we),Ue=Math.round(Dn[1]-Nn*vt),et=ms-De,xt=Yr-Ue,Gn=g===H,cn=Gn&&Vt.getAlpha(U(this),e.time)!==1;let Bt=!1;if(!cn)if(B){A=[De,Ue,De+et,Ue,De+et,Ue+xt,De,Ue+xt];for(let Vn=0,_s=B.length;Vn<_s;++Vn)if(g!==H&&H<K[Vn]){const Le=B[Vn];Pe([De,Ue,De+et,Ue+xt],[Le[0],Le[3],Le[4],Le[7]])&&(Bt||(M.save(),Bt=!0),M.beginPath(),M.moveTo(A[0],A[1]),M.lineTo(A[2],A[3]),M.lineTo(A[4],A[5]),M.lineTo(A[6],A[7]),M.moveTo(Le[6],Le[7]),M.lineTo(Le[4],Le[5]),M.lineTo(Le[2],Le[3]),M.lineTo(Le[0],Le[1]),M.clip())}B.push(A),K.push(H)}else M.clearRect(De,Ue,et,xt);this.drawTileImage(Vt,e,De,Ue,et,xt,ds,Gn),B&&!cn?(Bt&&M.restore(),this.renderedTiles.unshift(Vt)):this.renderedTiles.push(Vt),this.updateUsedTiles(e.usedTiles,h,Vt)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Vi(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(e,h,f,c,r,_,g,u.getPreload()),this.scheduleExpireCache(e,h),this.postRender(M,e),n.extent&&M.restore(),M.imageSmoothingEnabled=!0,b!==R.style.transform&&(R.style.transform=b),this.container}drawTileImage(e,t,n,s,r,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=U(this),h=t.layerStatesArray[t.layerIndex],d=h.opacity*(l?e.getAlpha(u,t.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,s,r,o),f&&this.context.restore(),d!==h.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=function(s,r,o){const a=U(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const s=U(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}manageTilePyramid(e,t,n,s,r,o,a,l,c){const u=U(t);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],d=e.tileQueue,f=n.getMinZoom(),g=e.viewState.rotation,m=g?Oo(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let _=0,p,v,y,x,E,S;for(S=f;S<=a;++S)for(v=n.getTileRangeForExtentAndZ(o,S,v),y=n.getResolution(S),x=v.minX;x<=v.maxX;++x)for(E=v.minY;E<=v.maxY;++E)g&&!n.tileCoordIntersectsViewport([S,x,E],m)||(a-S<=l?(++_,p=t.getTile(S,x,E,s,r),p.getState()==j.IDLE&&(h[p.getKey()]=!0,d.isKeyQueued(p.getKey())||d.enqueue([p,u,n.getTileCoordCenter(p.tileCoord),y])),c!==void 0&&c(p)):t.useTile(S,x,E,r));t.updateCacheSize(_,r)}}const h_=u_;class d_ extends c_{constructor(e){super(e)}createRenderer(){return new h_(this)}}const oo=d_,nr=1/0;class f_{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,pi(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){$(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=nr?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,r=t[e],o=n[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<s&&n[c]<n[l]?c:l;t[e]=t[u],n[e]=n[u],e=u}t[e]=r,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,r=n[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(s[a]>o)n[t]=n[a],s[t]=s[a],t=a;else break}n[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const r=t.length;let o,a,l;for(a=0;a<r;++a)o=t[a],l=e(o),l==nr?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,t[s++]=o);t.length=s,n.length=s,this.heapify_()}}const g_=f_;class m_ extends g_{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Y.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===j.LOADED||n===j.ERROR||n===j.EMPTY){n!==j.ERROR&&t.removeEventListener(Y.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0,s,r,o;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===j.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}const __=m_;function y_(i,e,t,n,s){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return nr;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}const p_=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',sh],v_={terrain:{extension:"png",opaque:!0},"terrain-background":{extension:"png",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},x_={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}};class C_ extends qu{constructor(e){const t=e.layer.indexOf("-"),n=t==-1?e.layer:e.layer.slice(0,t),s=x_[n],r=v_[e.layer],o=e.url!==void 0?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+r.extension;super({attributions:p_,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!=null?e.maxZoom:s.maxZoom,minZoom:e.minZoom!=null?e.minZoom:s.minZoom,opaque:r.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,wrapX:e.wrapX,zDirection:e.zDirection})}}const E_=C_;class ir extends eh{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(re),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(!!this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(Z(this.geometries_[e],Y.CHANGE,this.changed,this))}clone(){const e=new ir(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fn(this.getExtent(),e,t))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(e,t,n,s);return s}containsXY(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)if(n[s].containsXY(e,t))return!0;return!1}computeExtent(e){rs(e);const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)Su(e,t[n].getExtent());return e}getGeometries(){return yc(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let s=!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(s=!0)}if(s){const r=new ir(null);return r.setGeometriesArray(t),r}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].rotate(e,t);this.changed()}scale(e,t,n){n||(n=wn(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(yc(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function yc(i){const e=[];for(let t=0,n=i.length;t<n;++t)e.push(i[t].clone());return e}const _h=ir;class S_{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?me(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=me(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return z()}readFeature(e,t){return z()}readFeatures(e,t){return z()}readGeometry(e,t){return z()}readProjection(e){return z()}writeFeature(e,t){return z()}writeFeatures(e,t){return z()}writeGeometry(e,t){return z()}}function yh(i,e,t){const n=t?me(t.featureProjection):null,s=t?me(t.dataProjection):null;let r;if(n&&s&&!gn(n,s)?r=(e?i.clone():i).transform(e?n:s,e?s:n):r=i,e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};r===i&&(r=i.clone()),r.applyTransform(a)}return r}class w_ extends S_{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(bs(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(bs(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return z()}readFeaturesFromObject(e,t){return z()}readGeometry(e,t){return this.readGeometryFromObject(bs(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return z()}readProjection(e){return this.readProjectionFromObject(bs(e))}readProjectionFromObject(e){return z()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return z()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return z()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return z()}}function bs(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}else if(i!==null)return i;return null}const R_=w_;function ph(i,e,t,n,s,r,o){let a,l;const c=(t-e)/n;if(c===1)a=e;else if(c===2)a=e,l=s;else if(c!==0){let u=i[e],h=i[e+1],d=0;const f=[0];for(let _=e+n;_<t;_+=n){const p=i[_],v=i[_+1];d+=Math.sqrt((p-u)*(p-u)+(v-h)*(v-h)),f.push(d),u=p,h=v}const g=s*d,m=Lf(f,g);m<0?(l=(g-f[-m-2])/(f[-m-1]-f[-m-2]),a=e+(-m-2)*n):a=e+m*n}o=o>1?o:2,r=r||new Array(o);for(let u=0;u<o;++u)r[u]=a===void 0?NaN:l===void 0?i[a+u]:je(i[a+u],i[a+n+u],l);return r}function Wo(i,e,t,n,s,r){if(t==e)return null;let o;if(s<i[e+n-1])return r?(o=i.slice(e,e+n),o[n-1]=s,o):null;if(i[t-1]<s)return r?(o=i.slice(t-n,t),o[n-1]=s,o):null;if(s==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const d=a+l>>1;s<i[(d+1)*n-1]?l=d:a=d+1}const c=i[a*n-1];if(s==c)return i.slice((a-1)*n,(a-1)*n+n);const u=i[(a+1)*n-1],h=(s-c)/(u-c);o=[];for(let d=0;d<n-1;++d)o.push(je(i[(a-1)*n+d],i[a*n+d],h));return o.push(s),o}function T_(i,e,t,n,s,r,o){if(o)return Wo(i,e,t[t.length-1],n,s,r);let a;if(s<i[n-1])return r?(a=i.slice(0,n),a[n-1]=s,a):null;if(i[i.length-1]<s)return r?(a=i.slice(i.length-n),a[n-1]=s,a):null;for(let l=0,c=t.length;l<c;++l){const u=t[l];if(e!=u){if(s<i[e+n-1])return null;if(s<=i[u-1])return Wo(i,e,u,n,s,!1);e=u}}return null}function vh(i,e,t,n){let s=i[e],r=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],c=i[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}class sr extends an{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?st(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new sr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ha(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,s))}forEachSegment(e){return Uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return qt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return ph(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return vh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Ja(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new sr(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Or(this.flatCoordinates,0,e,this.stride),this.changed()}}const Sn=sr;class rr extends an{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{let s=this.getLayout();const r=e,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout()),st(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?st(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new rr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Za(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qa(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,s))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,T_(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Wi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Sn(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,s=[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new Sn(e.slice(r,l),n);s.push(c),r=l}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=ph(t,n,l,r,.5);st(e,c),n=l}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Gm(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new rr(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return Vg(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=za(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}const el=rr;class tl extends an{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?st(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new tl(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fn(this.getExtent(),e,t))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const c=bt(e,t,r[a],r[a+1]);if(c<s){s=c;for(let u=0;u<o;++u)n[u]=r[a+u];n.length=o}}return s}getCoordinates(){return qt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new At(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,s=[];for(let r=0,o=e.length;r<o;r+=n){const a=new At(e.slice(r,r+n),t);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let s=0,r=t.length;s<r;s+=n){const o=t[s],a=t[s+1];if(Ra(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Or(this.flatCoordinates,0,e,this.stride),this.changed()}}const Dr=tl;function I_(i,e,t,n){const s=[];let r=Xe();for(let o=0,a=t.length;o<a;++o){const l=t[o];r=Eu(i,e,l[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return s}class or extends an{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){let s=this.getLayout();const r=e,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout());const h=o.length,d=u.getEnds();for(let f=0,g=d.length;f<g;++f)d[f]+=h;st(o,u.getFlatCoordinates()),a.push(d)}t=s,e=o,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;st(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,r=t.length;s<r;++s)t[s]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const n=new or(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,s){return s<Fn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Dm(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Nm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Gg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return jm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),fc(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Vo(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=I_(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Wm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Dr(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Xm(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=fc(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Bm(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new or(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const r=this.endss_[e-1];t=r[r.length-1]}const n=this.endss_[e].slice(),s=n[n.length-1];if(t!==0)for(let r=0,o=n.length;r<o;++r)n[r]-=t;return new In(this.flatCoordinates.slice(t,s),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),c=l[l.length-1];if(r!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=r;const u=new In(t.slice(r,c),e,l);s.push(u),r=c}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return Bg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=mm(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const nl=or;class b_ extends R_{constructor(e){e=e||{},super(),this.dataProjection=me(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=me(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const s=zo(n.geometry,t),r=new it;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&r.setGeometryName(n.geometry_name),r.setGeometry(s),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(e,t){const n=e;let s=null;if(n.type==="FeatureCollection"){const r=e;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],t))}else s=[this.readFeatureFromObject(e,t)];return s}readGeometryFromObject(e,t){return zo(e,t)}readProjectionFromObject(e){const t=e.crs;let n;return t?t.type=="name"?n=me(t.properties.name):t.type==="EPSG"?n=me("EPSG:"+t.properties.code):$(!1,36):n=this.dataProjection,n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},s=e.getId();if(s!==void 0&&(n.id=s),!e.hasProperties())return n;const r=e.getProperties(),o=e.getGeometry();return o&&(n.geometry=Xo(o,t),delete r[e.getGeometryName()]),ui(r)||(n.properties=r),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let s=0,r=e.length;s<r;++s)n.push(this.writeFeatureObject(e[s],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return Xo(e,this.adaptOptions(t))}}function zo(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=A_(i);break}case"LineString":{t=L_(i);break}case"Polygon":{t=k_(i);break}case"MultiPoint":{t=M_(i);break}case"MultiLineString":{t=F_(i);break}case"MultiPolygon":{t=O_(i);break}case"GeometryCollection":{t=P_(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return yh(t,!1,e)}function P_(i,e){const t=i.geometries.map(function(n){return zo(n,e)});return new _h(t)}function A_(i){return new At(i.coordinates)}function L_(i){return new Sn(i.coordinates)}function F_(i){return new el(i.coordinates)}function M_(i){return new Dr(i.coordinates)}function O_(i){return new nl(i.coordinates)}function k_(i){return new In(i.coordinates)}function Xo(i,e){i=yh(i,!0,e);const t=i.getType();let n;switch(t){case"Point":{n=j_(i);break}case"LineString":{n=N_(i);break}case"Polygon":{n=W_(i,e);break}case"MultiPoint":{n=V_(i);break}case"MultiLineString":{n=G_(i);break}case"MultiPolygon":{n=B_(i,e);break}case"GeometryCollection":{n=D_(i,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function D_(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return Xo(n,e)})}}function N_(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function G_(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function V_(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function B_(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function j_(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function W_(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}const Uo=b_;class Nr extends an{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new Nr(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=e-r[0],a=t-r[1],l=o*o+a*a;if(l<s){if(l===0)for(let c=0;c<this.stride;++c)n[c]=r[c];else{const c=this.getRadius()/Math.sqrt(l);n[0]=r[0]+c*o,n[1]=r[1]+c*a;for(let u=2;u<this.stride;++u)n[u]=r[u]}return n.length=this.stride,l}return s}containsXY(e,t){const n=this.flatCoordinates,s=e-n[0],r=t-n[1];return s*s+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return ot(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Pe(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:Ta(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+n;for(let r=1;r<t;++r)s[t+r]=e[r];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let r=th(s,0,e,this.stride);s[r++]=s[0]+t;for(let o=1,a=this.stride;o<a;++o)s[r++]=s[o];s.length=r,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(Wa(n,0,n.length,s,e,t,n)),this.changed()}translate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(Qu(n,0,n.length,s,e,t,n)),this.changed()}}Nr.prototype.transform;const xh=Nr;const z_=ee({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function X_(i,e){const t={},n=s=>()=>{if(!on)return Promise.resolve(!0);const r=s==="openDelay";return t.closeDelay&&window.clearTimeout(t.closeDelay),delete t.closeDelay,t.openDelay&&window.clearTimeout(t.openDelay),delete t.openDelay,new Promise(o=>{var l;const a=parseInt((l=i[s])!=null?l:0,10);t[s]=window.setTimeout(()=>{e==null||e(r),o(r)},a)})};return{runCloseDelay:n("closeDelay"),runOpenDelay:n("openDelay")}}const Yo=Symbol.for("vuetify:v-menu"),U_=ee({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...z_()},"v-overlay-activator");function Y_(i,e){let{isActive:t,isTop:n}=e;const s=X();let r=!1,o=!1,a=!0;const l=k(()=>i.openOnFocus||i.openOnFocus==null&&i.openOnHover),c=k(()=>i.openOnClick||i.openOnClick==null&&!i.openOnHover&&!l.value),{runOpenDelay:u,runCloseDelay:h}=X_(i,y=>{y===(i.openOnHover&&r||l.value&&o)&&!(i.openOnHover&&t.value&&!n.value)&&(t.value!==y&&(a=!0),t.value=y)}),d={click:y=>{y.stopPropagation(),s.value=y.currentTarget||y.target,t.value=!t.value},mouseenter:y=>{var x;(x=y.sourceCapabilities)!=null&&x.firesTouchEvents||(r=!0,s.value=y.currentTarget||y.target,u())},mouseleave:y=>{r=!1,h()},focus:y=>{Po&&!y.target.matches(":focus-visible")||(o=!0,y.stopPropagation(),s.value=y.currentTarget||y.target,u())},blur:y=>{o=!1,y.stopPropagation(),h()}},f=k(()=>{const y={};return c.value&&(y.click=d.click),i.openOnHover&&(y.mouseenter=d.mouseenter,y.mouseleave=d.mouseleave),l.value&&(y.focus=d.focus,y.blur=d.blur),y}),g=k(()=>{const y={};if(i.openOnHover&&(y.mouseenter=()=>{r=!0,u()},y.mouseleave=()=>{r=!1,h()}),i.closeOnContentClick){const x=kt(Yo,null);y.click=()=>{t.value=!1,x==null||x.closeParents()}}return y}),m=k(()=>{const y={};return i.openOnHover&&(y.mouseenter=()=>{a&&(r=!0,a=!1,u())},y.mouseleave=()=>{r=!1,h()}),y});ue(n,y=>{y&&(i.openOnHover&&!r&&(!l.value||!o)||l.value&&!o&&(!i.openOnHover||!r))&&(t.value=!1)});const _=X();aa(()=>{!_.value||Mt(()=>{const y=_.value;s.value=kd(y)?y.$el:y})});const p=_r("useActivator");let v;return ue(()=>!!i.activator,y=>{y&&on?(v=su(),v.run(()=>{K_(i,p,{activatorEl:s,activatorEvents:f})})):v&&v.stop()},{flush:"post",immediate:!0}),rt(()=>{v==null||v.stop()}),{activatorEl:s,activatorRef:_,activatorEvents:f,contentEvents:g,scrimEvents:m}}function K_(i,e,t){let{activatorEl:n,activatorEvents:s}=t;ue(()=>i.activator,(l,c)=>{if(c&&l!==c){const u=a(c);u&&o(u)}l&&Mt(()=>r())},{immediate:!0}),ue(()=>i.activatorProps,()=>{r()}),rt(()=>{o()});function r(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.activatorProps;!l||(Object.entries(s.value).forEach(u=>{let[h,d]=u;l.addEventListener(h,d)}),Object.keys(c).forEach(u=>{c[u]==null?l.removeAttribute(u):l.setAttribute(u,c[u])}))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.activatorProps;!l||(Object.entries(s.value).forEach(u=>{let[h,d]=u;l.removeEventListener(h,d)}),Object.keys(c).forEach(u=>{l.removeAttribute(u)}))}function a(){var u,h;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.activator,c;if(l)if(l==="parent"){let d=(h=(u=e==null?void 0:e.proxy)==null?void 0:u.$el)==null?void 0:h.parentNode;for(;d.hasAttribute("data-no-activator");)d=d.parentNode;c=d}else typeof l=="string"?c=document.querySelector(l):"$el"in l?c=l.$el:c=l;return n.value=(c==null?void 0:c.nodeType)===Node.ELEMENT_NODE?c:null,n.value}}const H_=ee({eager:Boolean},"lazy");function Z_(i,e){const t=Re(!1),n=k(()=>t.value||i.eager||e.value);ue(e,()=>t.value=!0);function s(){i.eager||(t.value=!1)}return{isBooted:t,hasContent:n,onAfterLeave:s}}function ao(i,e){return{x:i.x+e.x,y:i.y+e.y}}function $_(i,e){return{x:i.x-e.x,y:i.y-e.y}}function pc(i,e){if(i.side==="top"||i.side==="bottom"){const{side:t,align:n}=i,s=n==="left"?0:n==="center"?e.width/2:n==="right"?e.width:n,r=t==="top"?0:t==="bottom"?e.height:t;return ao({x:s,y:r},e)}else if(i.side==="left"||i.side==="right"){const{side:t,align:n}=i,s=t==="left"?0:t==="right"?e.width:t,r=n==="top"?0:n==="center"?e.height/2:n==="bottom"?e.height:n;return ao({x:s,y:r},e)}return ao({x:e.width/2,y:e.height/2},e)}const Ch={static:Q_,connected:ty},q_=ee({locationStrategy:{type:[String,Function],default:"static",validator:i=>typeof i=="function"||i in Ch},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"v-overlay-location-strategies");function J_(i,e){const t=X({}),n=X();on&&(Gi(()=>!!(e.isActive.value&&i.locationStrategy),r=>{var o,a;ue(()=>i.locationStrategy,r),rt(()=>{n.value=void 0}),typeof i.locationStrategy=="function"?n.value=(o=i.locationStrategy(e,i,t))==null?void 0:o.updateLocation:n.value=(a=Ch[i.locationStrategy](e,i,t))==null?void 0:a.updateLocation}),window.addEventListener("resize",s,{passive:!0}),rt(()=>{window.removeEventListener("resize",s),n.value=void 0}));function s(r){var o;(o=n.value)==null||o.call(n,r)}return{contentStyles:t,updateLocation:n}}function Q_(){}function ey(i,e){const t=Ea(i);return e?t.x+=parseFloat(i.style.right||0):t.x-=parseFloat(i.style.left||0),t.y-=parseFloat(i.style.top||0),t}function ty(i,e,t){_f(i.activatorEl.value)&&Object.assign(t.value,{position:"fixed",top:0,[i.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:r}=Dd(()=>{const g=Dl(e.location,i.isRtl.value),m=e.origin==="overlap"?g:e.origin==="auto"?qr(g):Dl(e.origin,i.isRtl.value);return g.side===m.side&&g.align===Jr(m).align?{preferredAnchor:Nl(g),preferredOrigin:Nl(m)}:{preferredAnchor:g,preferredOrigin:m}}),[o,a,l,c]=["minWidth","minHeight","maxWidth","maxHeight"].map(g=>k(()=>{const m=parseFloat(e[g]);return isNaN(m)?1/0:m})),u=k(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const g=e.offset.split(" ").map(parseFloat);return g.length<2&&g.push(0),g}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let h=!1;const d=new ResizeObserver(()=>{h&&f()});ue([i.activatorEl,i.contentEl],(g,m)=>{let[_,p]=g,[v,y]=m;v&&d.unobserve(v),_&&d.observe(_),y&&d.unobserve(y),p&&d.observe(p)},{immediate:!0}),rt(()=>{d.disconnect()});function f(){if(h=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>h=!0)}),!i.activatorEl.value||!i.contentEl.value)return;const g=i.activatorEl.value.getBoundingClientRect(),m=ey(i.contentEl.value,i.isRtl.value),_=Hs(i.contentEl.value),p=12;_.length||(_.push(document.documentElement),i.contentEl.value.style.top&&i.contentEl.value.style.left||(m.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),m.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const v=_.reduce((T,F)=>{const L=F.getBoundingClientRect(),V=new ni({x:F===document.documentElement?0:L.x,y:F===document.documentElement?0:L.y,width:F.clientWidth,height:F.clientHeight});return T?new ni({x:Math.max(T.left,V.left),y:Math.max(T.top,V.top),width:Math.min(T.right,V.right)-Math.max(T.left,V.left),height:Math.min(T.bottom,V.bottom)-Math.max(T.top,V.top)}):V},void 0);v.x+=p,v.y+=p,v.width-=p*2,v.height-=p*2;let y={anchor:s.value,origin:r.value};function x(T){const F=new ni(m),L=pc(T.anchor,g),V=pc(T.origin,F);let{x:G,y:b}=$_(L,V);switch(T.anchor.side){case"top":b-=u.value[0];break;case"bottom":b+=u.value[0];break;case"left":G-=u.value[0];break;case"right":G+=u.value[0];break}switch(T.anchor.align){case"top":b-=u.value[1];break;case"bottom":b+=u.value[1];break;case"left":G-=u.value[1];break;case"right":G+=u.value[1];break}return F.x+=G,F.y+=b,F.width=Math.min(F.width,l.value),F.height=Math.min(F.height,c.value),{overflows:Vl(F,v),x:G,y:b}}let E=0,S=0;const w={x:0,y:0},P={x:!1,y:!1};let O=-1;for(;!(O++>10);){const{x:T,y:F,overflows:L}=x(y);E+=T,S+=F,m.x+=T,m.y+=F;{const V=Gl(y.anchor),G=L.x.before||L.x.after,b=L.y.before||L.y.after;let M=!1;if(["x","y"].forEach(R=>{if(R==="x"&&G&&!P.x||R==="y"&&b&&!P.y){const N={anchor:{...y.anchor},origin:{...y.origin}},B=R==="x"?V==="y"?Jr:qr:V==="y"?qr:Jr;N.anchor=B(N.anchor),N.origin=B(N.origin);const{overflows:K}=x(N);(K[R].before<=L[R].before&&K[R].after<=L[R].after||K[R].before+K[R].after<(L[R].before+L[R].after)/2)&&(y=N,M=P[R]=!0)}}),M)continue}L.x.before&&(E+=L.x.before,m.x+=L.x.before),L.x.after&&(E-=L.x.after,m.x-=L.x.after),L.y.before&&(S+=L.y.before,m.y+=L.y.before),L.y.after&&(S-=L.y.after,m.y-=L.y.after);{const V=Vl(m,v);w.x=v.width-V.x.before-V.x.after,w.y=v.height-V.y.before-V.y.after,E+=V.x.before,m.x+=V.x.before,S+=V.y.before,m.y+=V.y.before}break}const D=Gl(y.anchor);return Object.assign(t.value,{"--v-overlay-anchor-origin":`${y.anchor.side} ${y.anchor.align}`,transformOrigin:`${y.origin.side} ${y.origin.align}`,top:Be(lo(S)),left:i.isRtl.value?void 0:Be(lo(E)),right:i.isRtl.value?Be(lo(-E)):void 0,minWidth:Be(D==="y"?Math.min(o.value,g.width):o.value),maxWidth:Be(vc(Ml(w.x,o.value===1/0?0:o.value,l.value))),maxHeight:Be(vc(Ml(w.y,a.value===1/0?0:a.value,c.value)))}),{available:w,contentBox:m}}return ue(()=>[s.value,r.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>f()),Mt(()=>{const g=f();if(!g)return;const{available:m,contentBox:_}=g;_.height>m.y&&requestAnimationFrame(()=>{f(),requestAnimationFrame(()=>{f()})})}),{updateLocation:f}}function lo(i){return Math.round(i*devicePixelRatio)/devicePixelRatio}function vc(i){return Math.ceil(i*devicePixelRatio)/devicePixelRatio}let Ko=!0;const ar=[];function ny(i){!Ko||ar.length?(ar.push(i),Ho()):(Ko=!1,i(),Ho())}let xc=-1;function Ho(){cancelAnimationFrame(xc),xc=requestAnimationFrame(()=>{const i=ar.shift();i&&i(),ar.length?Ho():Ko=!0})}const js={none:null,close:ry,block:oy,reposition:ay},iy=ee({scrollStrategy:{type:[String,Function],default:"block",validator:i=>typeof i=="function"||i in js}},"v-overlay-scroll-strategies");function sy(i,e){if(!on)return;let t;aa(async()=>{t==null||t.stop(),e.isActive.value&&i.scrollStrategy&&(t=su(),await Mt(),t.active&&t.run(()=>{var n;typeof i.scrollStrategy=="function"?i.scrollStrategy(e,i,t):(n=js[i.scrollStrategy])==null||n.call(js,e,i,t)}))}),rt(()=>{t==null||t.stop()})}function ry(i){var t;function e(n){i.isActive.value=!1}Eh((t=i.activatorEl.value)!=null?t:i.contentEl.value,e)}function oy(i,e){var o;const t=(o=i.root.value)==null?void 0:o.offsetParent,n=[...new Set([...Hs(i.activatorEl.value,e.contained?t:void 0),...Hs(i.contentEl.value,e.contained?t:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,r=(a=>Sa(a)&&a)(t||document.documentElement);r&&i.root.value.classList.add("v-overlay--scroll-blocked"),n.forEach((a,l)=>{a.style.setProperty("--v-body-scroll-x",Be(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",Be(-a.scrollTop)),a.style.setProperty("--v-scrollbar-offset",Be(s)),a.classList.add("v-overlay-scroll-blocked")}),rt(()=>{n.forEach((a,l)=>{const c=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),u=parseFloat(a.style.getPropertyValue("--v-body-scroll-y"));a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-c,a.scrollTop=-u}),r&&i.root.value.classList.remove("v-overlay--scroll-blocked")})}function ay(i,e,t){let n=!1,s=-1,r=-1;function o(a){ny(()=>{var u,h;const l=performance.now();(h=(u=i.updateLocation).value)==null||h.call(u,a),n=(performance.now()-l)/(1e3/60)>2})}r=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{t.run(()=>{var a;Eh((a=i.activatorEl.value)!=null?a:i.contentEl.value,l=>{n?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{o(l)})})):o(l)})})}),rt(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(r),cancelAnimationFrame(s)})}function Eh(i,e){const t=[document,...Hs(i)];t.forEach(n=>{n.addEventListener("scroll",e,{passive:!0})}),rt(()=>{t.forEach(n=>{n.removeEventListener("scroll",e)})})}function ly(){if(!on)return Re(!1);const{ssr:i}=Nd();if(i){const e=Re(!1);return la(()=>{e.value=!0}),e}else return Re(!0)}function il(){const e=_r("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const Cc=Symbol.for("vuetify:stack"),Ii=ru([]);function cy(i,e,t){const n=_r("useStack"),s=!t,r=kt(Cc,void 0),o=ru({activeChildren:new Set});bn(Cc,o);const a=Re(+e.value);Gi(i,()=>{var h;const u=(h=Ii.at(-1))==null?void 0:h[1];a.value=u?u+10:+e.value,s&&Ii.push([n.uid,a.value]),r==null||r.activeChildren.add(n.uid),rt(()=>{if(s){const d=Pn(Ii).findIndex(f=>f[0]===n.uid);Ii.splice(d,1)}r==null||r.activeChildren.delete(n.uid)})});const l=Re(!0);s&&aa(()=>{var h;const u=((h=Ii.at(-1))==null?void 0:h[0])===n.uid;setTimeout(()=>l.value=u)});const c=k(()=>!o.activeChildren.size);return{globalTop:Gd(l),localTop:c,stackStyles:k(()=>({zIndex:a.value}))}}function uy(i){return{teleportTarget:k(()=>{const t=i.value;if(t===!0||!on)return;const n=t===!1?document.body:typeof t=="string"?document.querySelector(t):t;if(n==null)return;let s=n.querySelector(":scope > .v-overlay-container");return s||(s=document.createElement("div"),s.className="v-overlay-container",n.appendChild(s)),s})}}function hy(){return!0}function Sh(i,e,t){if(!i||wh(i,t)===!1)return!1;const n=vu(e);if(typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&n.host===i.target)return!1;const s=(typeof t.value=="object"&&t.value.include||(()=>[]))();return s.push(e),!s.some(r=>r==null?void 0:r.contains(i.target))}function wh(i,e){return(typeof e.value=="object"&&e.value.closeConditional||hy)(i)}function dy(i,e,t){const n=typeof t.value=="function"?t.value:t.value.handler;e._clickOutside.lastMousedownWasOutside&&Sh(i,e,t)&&setTimeout(()=>{wh(i,t)&&n&&n(i)},0)}function Ec(i,e){const t=vu(i);e(document),typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&e(t)}const fy={mounted(i,e){const t=s=>dy(s,i,e),n=s=>{i._clickOutside.lastMousedownWasOutside=Sh(s,i,e)};Ec(i,s=>{s.addEventListener("click",t,!0),s.addEventListener("mousedown",n,!0)}),i._clickOutside||(i._clickOutside={lastMousedownWasOutside:!1}),i._clickOutside[e.instance.$.uid]={onClick:t,onMousedown:n}},unmounted(i,e){!i._clickOutside||(Ec(i,t=>{var r;if(!t||!((r=i._clickOutside)!=null&&r[e.instance.$.uid]))return;const{onClick:n,onMousedown:s}=i._clickOutside[e.instance.$.uid];t.removeEventListener("click",n,!0),t.removeEventListener("mousedown",s,!0)}),delete i._clickOutside[e.instance.$.uid])}};function gy(i){const{modelValue:e,color:t,...n}=i;return C(bo,{name:"fade-transition",appear:!0},{default:()=>[i.modelValue&&C("div",ce({class:["v-overlay__scrim",i.color.backgroundColorClasses.value],style:i.color.backgroundColorStyles.value},n),null)]})}const sl=ee({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[String,Boolean],default:!0},zIndex:{type:[Number,String],default:2e3},...U_(),...Ae(),...fa(),...H_(),...q_(),...iy(),...Dt(),...pr()},"v-overlay"),lr=he()({name:"VOverlay",directives:{ClickOutside:fy},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...sl()},emits:{"click:outside":i=>!0,"update:modelValue":i=>!0,afterLeave:()=>!0},setup(i,e){let{slots:t,attrs:n,emit:s}=e;const r=Oe(i,"modelValue"),o=k({get:()=>r.value,set:N=>{N&&i.disabled||(r.value=N)}}),{teleportTarget:a}=uy(k(()=>i.attach||i.contained)),{themeClasses:l}=An(i),{rtlClasses:c,isRtl:u}=ou(),{hasContent:h,onAfterLeave:d}=Z_(i,o),f=ga(k(()=>typeof i.scrim=="string"?i.scrim:null)),{globalTop:g,localTop:m,stackStyles:_}=cy(o,ne(i,"zIndex"),i._disableGlobalStack),{activatorEl:p,activatorRef:v,activatorEvents:y,contentEvents:x,scrimEvents:E}=Y_(i,{isActive:o,isTop:m}),{dimensionStyles:S}=ma(i),w=ly(),{scopeId:P}=il();ue(()=>i.disabled,N=>{N&&(o.value=!1)});const O=X(),D=X(),{contentStyles:T,updateLocation:F}=J_(i,{isRtl:u,contentEl:D,activatorEl:p,isActive:o});sy(i,{root:O,contentEl:D,activatorEl:p,isActive:o,updateLocation:F});function L(N){s("click:outside",N),i.persistent?R():o.value=!1}function V(){return o.value&&g.value}on&&ue(o,N=>{N?window.addEventListener("keydown",G):window.removeEventListener("keydown",G)},{immediate:!0});function G(N){N.key==="Escape"&&g.value&&(i.persistent?R():o.value=!1)}const b=Zd();Gi(()=>i.closeOnBack,()=>{$d(b,N=>{g.value&&o.value?(N(!1),i.persistent?R():o.value=!1):N()})});const M=X();ue(()=>o.value&&(i.absolute||i.contained)&&a.value==null,N=>{if(N){const B=mf(O.value);B&&B!==document.scrollingElement&&(M.value=B.scrollTop)}});function R(){i.noClickAnimation||D.value&&qn(D.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Ks})}return ye(()=>{var N;return C(Ee,null,[(N=t.activator)==null?void 0:N.call(t,{isActive:o.value,props:ce({ref:v},$r(y.value),i.activatorProps)}),w.value&&C(Vd,{disabled:!a.value,to:a.value},{default:()=>[h.value&&C("div",ce({class:["v-overlay",{"v-overlay--absolute":i.absolute||i.contained,"v-overlay--active":o.value,"v-overlay--contained":i.contained},l.value,c.value,i.class],style:[_.value,{top:Be(M.value)},i.style],ref:O},P,n),[C(gy,ce({color:f,modelValue:o.value&&!!i.scrim},$r(E.value)),null),C(vr,{appear:!0,persisted:!0,transition:i.transition,target:p.value,onAfterLeave:()=>{d(),s("afterLeave")}},{default:()=>{var B;return[$e(C("div",ce({ref:D,class:["v-overlay__content",i.contentClass],style:[S.value,T.value]},$r(x.value),i.contentProps),[(B=t.default)==null?void 0:B.call(t,{isActive:o})]),[[Qi,o.value],[li("click-outside"),{handler:L,closeConditional:V,include:()=>[p.value]}]])]}})])]})])}),{activatorEl:p,animateClick:R,contentEl:D,globalTop:g,localTop:m,updateLocation:F}}}),co=Symbol("Forwarded refs");function uo(i,e){let t=i;for(;t;){const n=Reflect.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}}function Gr(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return i[co]=t,new Proxy(i,{get(s,r){if(Reflect.has(s,r))return Reflect.get(s,r);if(!(typeof r=="symbol"||r.startsWith("__"))){for(const o of t)if(o.value&&Reflect.has(o.value,r)){const a=Reflect.get(o.value,r);return typeof a=="function"?a.bind(o.value):a}}},has(s,r){if(Reflect.has(s,r))return!0;if(typeof r=="symbol"||r.startsWith("__"))return!1;for(const o of t)if(o.value&&Reflect.has(o.value,r))return!0;return!1},getOwnPropertyDescriptor(s,r){var a,l;const o=Reflect.getOwnPropertyDescriptor(s,r);if(o)return o;if(!(typeof r=="symbol"||r.startsWith("__"))){for(const c of t){if(!c.value)continue;const u=(l=uo(c.value,r))!=null?l:"_"in c.value?uo((a=c.value._)==null?void 0:a.setupState,r):void 0;if(u)return u}for(const c of t){const u=c.value&&c.value[co];if(!u)continue;const h=u.slice();for(;h.length;){const d=h.shift(),f=uo(d.value,r);if(f)return f;const g=d.value&&d.value[co];g&&h.push(...g)}}}}})}const my=ee({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...sl({origin:"center center",scrollStrategy:"block",transition:{component:wa},zIndex:2400})},"v-dialog"),_y=he()({name:"VDialog",props:my(),emits:{"update:modelValue":i=>!0},setup(i,e){let{slots:t}=e;const n=Oe(i,"modelValue"),{scopeId:s}=il(),r=X();function o(l){var h,d;const c=l.relatedTarget,u=l.target;if(c!==u&&((h=r.value)==null?void 0:h.contentEl)&&((d=r.value)==null?void 0:d.globalTop)&&![document,r.value.contentEl].includes(u)&&!r.value.contentEl.contains(u)){const f=Bd(r.value.contentEl);if(!f.length)return;const g=f[0],m=f[f.length-1];c===g?m.focus():g.focus()}}on&&ue(()=>n.value&&i.retainFocus,l=>{l?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0}),ue(n,async l=>{var c,u;await Mt(),l?(c=r.value.contentEl)==null||c.focus({preventScroll:!0}):(u=r.value.activatorEl)==null||u.focus({preventScroll:!0})});const a=k(()=>ce({"aria-haspopup":"dialog","aria-expanded":String(n.value)},i.activatorProps));return ye(()=>{const[l]=lr.filterProps(i);return C(lr,ce({ref:r,class:["v-dialog",{"v-dialog--fullscreen":i.fullscreen,"v-dialog--scrollable":i.scrollable},i.class],style:i.style},l,{modelValue:n.value,"onUpdate:modelValue":c=>n.value=c,"aria-modal":"true",activatorProps:a.value,role:"dialog"},s),{activator:t.activator,default:function(){for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return C(ct,{root:!0},{default:()=>{var d;return[(d=t.default)==null?void 0:d.call(t,...u)]}})}})}),Gr({},r)}}),yy={class:"headline"},py=es({__name:"Modal",props:{open:Boolean,titulo:String,mensagem:String},setup(i){const e=i;ue(()=>e.open,s=>{t.value=!t.value});const t=X(!1),n=()=>{t.value=!1};return(s,r)=>(_e(),Ht(mu,{fluid:""},{default:se(()=>[C(_y,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=o=>t.value=o),"max-width":"500px"},{default:se(()=>[C(Ca,null,{default:se(()=>[C(sf,null,{default:se(()=>[J("span",yy,mn(e.titulo),1)]),_:1}),C(rf,null,{default:se(()=>[J("p",null,mn(e.mensagem),1)]),_:1}),C(of,null,{default:se(()=>[C(fn,{color:"primary",onClick:n},{default:se(()=>[Zt("Fechar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});function Rh(i,e){return function(){return i.apply(e,arguments)}}const{toString:vy}=Object.prototype,{getPrototypeOf:rl}=Object,Vr=(i=>e=>{const t=vy.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),pt=i=>(i=i.toLowerCase(),e=>Vr(e)===i),Br=i=>e=>typeof e===i,{isArray:xi}=Array,zi=Br("undefined");function xy(i){return i!==null&&!zi(i)&&i.constructor!==null&&!zi(i.constructor)&&qe(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Th=pt("ArrayBuffer");function Cy(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&Th(i.buffer),e}const Ey=Br("string"),qe=Br("function"),Ih=Br("number"),jr=i=>i!==null&&typeof i=="object",Sy=i=>i===!0||i===!1,Ws=i=>{if(Vr(i)!=="object")return!1;const e=rl(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},wy=pt("Date"),Ry=pt("File"),Ty=pt("Blob"),Iy=pt("FileList"),by=i=>jr(i)&&qe(i.pipe),Py=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||qe(i.append)&&((e=Vr(i))==="formdata"||e==="object"&&qe(i.toString)&&i.toString()==="[object FormData]"))},Ay=pt("URLSearchParams"),Ly=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function as(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),xi(i))for(n=0,s=i.length;n<s;n++)e.call(null,i[n],n,i);else{const r=t?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let a;for(n=0;n<o;n++)a=r[n],e.call(null,i[a],a,i)}}function bh(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const Ph=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ah=i=>!zi(i)&&i!==Ph;function Zo(){const{caseless:i}=Ah(this)&&this||{},e={},t=(n,s)=>{const r=i&&bh(e,s)||s;Ws(e[r])&&Ws(n)?e[r]=Zo(e[r],n):Ws(n)?e[r]=Zo({},n):xi(n)?e[r]=n.slice():e[r]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&as(arguments[n],t);return e}const Fy=(i,e,t,{allOwnKeys:n}={})=>(as(e,(s,r)=>{t&&qe(s)?i[r]=Rh(s,t):i[r]=s},{allOwnKeys:n}),i),My=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),Oy=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},ky=(i,e,t,n)=>{let s,r,o;const a={};if(e=e||{},i==null)return e;do{for(s=Object.getOwnPropertyNames(i),r=s.length;r-- >0;)o=s[r],(!n||n(o,i,e))&&!a[o]&&(e[o]=i[o],a[o]=!0);i=t!==!1&&rl(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},Dy=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},Ny=i=>{if(!i)return null;if(xi(i))return i;let e=i.length;if(!Ih(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},Gy=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&rl(Uint8Array)),Vy=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let s;for(;(s=n.next())&&!s.done;){const r=s.value;e.call(i,r[0],r[1])}},By=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},jy=pt("HTMLFormElement"),Wy=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),Sc=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),zy=pt("RegExp"),Lh=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};as(t,(s,r)=>{e(s,r,i)!==!1&&(n[r]=s)}),Object.defineProperties(i,n)},Xy=i=>{Lh(i,(e,t)=>{if(qe(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(!!qe(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Uy=(i,e)=>{const t={},n=s=>{s.forEach(r=>{t[r]=!0})};return xi(i)?n(i):n(String(i).split(e)),t},Yy=()=>{},Ky=(i,e)=>(i=+i,Number.isFinite(i)?i:e),ho="abcdefghijklmnopqrstuvwxyz",wc="0123456789",Fh={DIGIT:wc,ALPHA:ho,ALPHA_DIGIT:ho+ho.toUpperCase()+wc},Hy=(i=16,e=Fh.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;i--;)t+=e[Math.random()*n|0];return t};function Zy(i){return!!(i&&qe(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const $y=i=>{const e=new Array(10),t=(n,s)=>{if(jr(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const r=xi(n)?[]:{};return as(n,(o,a)=>{const l=t(o,s+1);!zi(l)&&(r[a]=l)}),e[s]=void 0,r}}return n};return t(i,0)},qy=pt("AsyncFunction"),Jy=i=>i&&(jr(i)||qe(i))&&qe(i.then)&&qe(i.catch),I={isArray:xi,isArrayBuffer:Th,isBuffer:xy,isFormData:Py,isArrayBufferView:Cy,isString:Ey,isNumber:Ih,isBoolean:Sy,isObject:jr,isPlainObject:Ws,isUndefined:zi,isDate:wy,isFile:Ry,isBlob:Ty,isRegExp:zy,isFunction:qe,isStream:by,isURLSearchParams:Ay,isTypedArray:Gy,isFileList:Iy,forEach:as,merge:Zo,extend:Fy,trim:Ly,stripBOM:My,inherits:Oy,toFlatObject:ky,kindOf:Vr,kindOfTest:pt,endsWith:Dy,toArray:Ny,forEachEntry:Vy,matchAll:By,isHTMLForm:jy,hasOwnProperty:Sc,hasOwnProp:Sc,reduceDescriptors:Lh,freezeMethods:Xy,toObjectSet:Uy,toCamelCase:Wy,noop:Yy,toFiniteNumber:Ky,findKey:bh,global:Ph,isContextDefined:Ah,ALPHABET:Fh,generateString:Hy,isSpecCompliantForm:Zy,toJSONObject:$y,isAsyncFn:qy,isThenable:Jy};function te(i,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s)}I.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Mh=te.prototype,Oh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Oh[i]={value:i}});Object.defineProperties(te,Oh);Object.defineProperty(Mh,"isAxiosError",{value:!0});te.from=(i,e,t,n,s,r)=>{const o=Object.create(Mh);return I.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),te.call(o,i.message,e,t,n,s),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const Qy=null;function $o(i){return I.isPlainObject(i)||I.isArray(i)}function kh(i){return I.endsWith(i,"[]")?i.slice(0,-2):i}function Rc(i,e,t){return i?i.concat(e).map(function(s,r){return s=kh(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function ep(i){return I.isArray(i)&&!i.some($o)}const tp=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function Wr(i,e,t){if(!I.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=I.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,_){return!I.isUndefined(_[m])});const n=t.metaTokens,s=t.visitor||u,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(I.isDate(g))return g.toISOString();if(!l&&I.isBlob(g))throw new te("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(g)||I.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,_){let p=g;if(g&&!_&&typeof g=="object"){if(I.endsWith(m,"{}"))m=n?m:m.slice(0,-2),g=JSON.stringify(g);else if(I.isArray(g)&&ep(g)||(I.isFileList(g)||I.endsWith(m,"[]"))&&(p=I.toArray(g)))return m=kh(m),p.forEach(function(y,x){!(I.isUndefined(y)||y===null)&&e.append(o===!0?Rc([m],x,r):o===null?m:m+"[]",c(y))}),!1}return $o(g)?!0:(e.append(Rc(_,m,r),c(g)),!1)}const h=[],d=Object.assign(tp,{defaultVisitor:u,convertValue:c,isVisitable:$o});function f(g,m){if(!I.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),I.forEach(g,function(p,v){(!(I.isUndefined(p)||p===null)&&s.call(e,p,I.isString(v)?v.trim():v,m,d))===!0&&f(p,m?m.concat(v):[v])}),h.pop()}}if(!I.isObject(i))throw new TypeError("data must be an object");return f(i),e}function Tc(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ol(i,e){this._pairs=[],i&&Wr(i,this,e)}const Dh=ol.prototype;Dh.append=function(e,t){this._pairs.push([e,t])};Dh.toString=function(e){const t=e?function(n){return e.call(this,n,Tc)}:Tc;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function np(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nh(i,e,t){if(!e)return i;const n=t&&t.encode||np,s=t&&t.serialize;let r;if(s?r=s(e,t):r=I.isURLSearchParams(e)?e.toString():new ol(e,t).toString(n),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class ip{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Ic=ip,Gh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sp=typeof URLSearchParams<"u"?URLSearchParams:ol,rp=typeof FormData<"u"?FormData:null,op=typeof Blob<"u"?Blob:null,ap=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),lp=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ht={isBrowser:!0,classes:{URLSearchParams:sp,FormData:rp,Blob:op},isStandardBrowserEnv:ap,isStandardBrowserWebWorkerEnv:lp,protocols:["http","https","file","blob","url","data"]};function cp(i,e){return Wr(i,new ht.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,r){return ht.isNode&&I.isBuffer(t)?(this.append(n,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function up(i){return I.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hp(i){const e={},t=Object.keys(i);let n;const s=t.length;let r;for(n=0;n<s;n++)r=t[n],e[r]=i[r];return e}function Vh(i){function e(t,n,s,r){let o=t[r++];const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&I.isArray(s)?s.length:o,l?(I.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!I.isObject(s[o]))&&(s[o]=[]),e(t,n,s[o],r)&&I.isArray(s[o])&&(s[o]=hp(s[o])),!a)}if(I.isFormData(i)&&I.isFunction(i.entries)){const t={};return I.forEachEntry(i,(n,s)=>{e(up(n),s,t,0)}),t}return null}const dp={"Content-Type":void 0};function fp(i,e,t){if(I.isString(i))try{return(e||JSON.parse)(i),I.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const zr={transitional:Gh,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,r=I.isObject(e);if(r&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return s&&s?JSON.stringify(Vh(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return cp(e,this.formSerializer).toString();if((a=I.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Wr(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),fp(e)):e}],transformResponse:[function(e){const t=this.transitional||zr.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&I.isString(e)&&(n&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?te.from(a,te.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ht.classes.FormData,Blob:ht.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],function(e){zr.headers[e]={}});I.forEach(["post","put","patch"],function(e){zr.headers[e]=I.merge(dp)});const al=zr,gp=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mp=i=>{const e={};let t,n,s;return i&&i.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!t||e[t]&&gp[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},bc=Symbol("internals");function bi(i){return i&&String(i).trim().toLowerCase()}function zs(i){return i===!1||i==null?i:I.isArray(i)?i.map(zs):String(i)}function _p(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const yp=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function fo(i,e,t,n,s){if(I.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!I.isString(e)){if(I.isString(n))return e.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(e)}}function pp(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function vp(i,e){const t=I.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(s,r,o){return this[n].call(this,e,s,r,o)},configurable:!0})})}class Xr{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function r(a,l,c){const u=bi(l);if(!u)throw new Error("header name must be a non-empty string");const h=I.findKey(s,u);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=zs(a))}const o=(a,l)=>I.forEach(a,(c,u)=>r(c,u,l));return I.isPlainObject(e)||e instanceof this.constructor?o(e,t):I.isString(e)&&(e=e.trim())&&!yp(e)?o(mp(e),t):e!=null&&r(t,e,n),this}get(e,t){if(e=bi(e),e){const n=I.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return _p(s);if(I.isFunction(t))return t.call(this,s,n);if(I.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=bi(e),e){const n=I.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||fo(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function r(o){if(o=bi(o),o){const a=I.findKey(n,o);a&&(!t||fo(n,n[a],a,t))&&(delete n[a],s=!0)}}return I.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const r=t[n];(!e||fo(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,n={};return I.forEach(this,(s,r)=>{const o=I.findKey(n,r);if(o){t[o]=zs(s),delete t[r];return}const a=e?pp(r):String(r).trim();a!==r&&delete t[r],t[a]=zs(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return I.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&I.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[bc]=this[bc]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=bi(o);n[a]||(vp(s,o),n[a]=!0)}return I.isArray(e)?e.forEach(r):r(e),this}}Xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.freezeMethods(Xr.prototype);I.freezeMethods(Xr);const Lt=Xr;function go(i,e){const t=this||al,n=e||t,s=Lt.from(n.headers);let r=n.data;return I.forEach(i,function(a){r=a.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function Bh(i){return!!(i&&i.__CANCEL__)}function ls(i,e,t){te.call(this,i==null?"canceled":i,te.ERR_CANCELED,e,t),this.name="CanceledError"}I.inherits(ls,te,{__CANCEL__:!0});function xp(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new te("Request failed with status code "+t.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const Cp=ht.isStandardBrowserEnv?function(){return{write:function(t,n,s,r,o,a){const l=[];l.push(t+"="+encodeURIComponent(n)),I.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),I.isString(r)&&l.push("path="+r),I.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Ep(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Sp(i,e){return e?i.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):i}function jh(i,e){return i&&!Ep(e)?Sp(i,e):e}const wp=ht.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(r){let o=r;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(o){const a=I.isString(o)?s(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function Rp(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function Tp(i,e){i=i||10;const t=new Array(i),n=new Array(i);let s=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[r];o||(o=c),t[s]=l,n[s]=c;let h=r,d=0;for(;h!==s;)d+=t[h++],h=h%i;if(s=(s+1)%i,s===r&&(r=(r+1)%i),c-o<e)return;const f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}function Pc(i,e){let t=0;const n=Tp(50,250);return s=>{const r=s.loaded,o=s.lengthComputable?s.total:void 0,a=r-t,l=n(a),c=r<=o;t=r;const u={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-r)/l:void 0,event:s};u[e?"download":"upload"]=!0,i(u)}}const Ip=typeof XMLHttpRequest<"u",bp=Ip&&function(i){return new Promise(function(t,n){let s=i.data;const r=Lt.from(i.headers).normalize(),o=i.responseType;let a;function l(){i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}I.isFormData(s)&&(ht.isStandardBrowserEnv||ht.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(i.auth){const f=i.auth.username||"",g=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";r.set("Authorization","Basic "+btoa(f+":"+g))}const u=jh(i.baseURL,i.url);c.open(i.method.toUpperCase(),Nh(u,i.params,i.paramsSerializer),!0),c.timeout=i.timeout;function h(){if(!c)return;const f=Lt.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:f,config:i,request:c};xp(function(p){t(p),l()},function(p){n(p),l()},m),c=null}if("onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){!c||(n(new te("Request aborted",te.ECONNABORTED,i,c)),c=null)},c.onerror=function(){n(new te("Network Error",te.ERR_NETWORK,i,c)),c=null},c.ontimeout=function(){let g=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const m=i.transitional||Gh;i.timeoutErrorMessage&&(g=i.timeoutErrorMessage),n(new te(g,m.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,i,c)),c=null},ht.isStandardBrowserEnv){const f=(i.withCredentials||wp(u))&&i.xsrfCookieName&&Cp.read(i.xsrfCookieName);f&&r.set(i.xsrfHeaderName,f)}s===void 0&&r.setContentType(null),"setRequestHeader"in c&&I.forEach(r.toJSON(),function(g,m){c.setRequestHeader(m,g)}),I.isUndefined(i.withCredentials)||(c.withCredentials=!!i.withCredentials),o&&o!=="json"&&(c.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&c.addEventListener("progress",Pc(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Pc(i.onUploadProgress)),(i.cancelToken||i.signal)&&(a=f=>{!c||(n(!f||f.type?new ls(null,i,c):f),c.abort(),c=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const d=Rp(u);if(d&&ht.protocols.indexOf(d)===-1){n(new te("Unsupported protocol "+d+":",te.ERR_BAD_REQUEST,i));return}c.send(s||null)})},Xs={http:Qy,xhr:bp};I.forEach(Xs,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Pp={getAdapter:i=>{i=I.isArray(i)?i:[i];const{length:e}=i;let t,n;for(let s=0;s<e&&(t=i[s],!(n=I.isString(t)?Xs[t.toLowerCase()]:t));s++);if(!n)throw n===!1?new te(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(I.hasOwnProp(Xs,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!I.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Xs};function mo(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new ls(null,i)}function Ac(i){return mo(i),i.headers=Lt.from(i.headers),i.data=go.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Pp.getAdapter(i.adapter||al.adapter)(i).then(function(n){return mo(i),n.data=go.call(i,i.transformResponse,n),n.headers=Lt.from(n.headers),n},function(n){return Bh(n)||(mo(i),n&&n.response&&(n.response.data=go.call(i,i.transformResponse,n.response),n.response.headers=Lt.from(n.response.headers))),Promise.reject(n)})}const Lc=i=>i instanceof Lt?i.toJSON():i;function gi(i,e){e=e||{};const t={};function n(c,u,h){return I.isPlainObject(c)&&I.isPlainObject(u)?I.merge.call({caseless:h},c,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function s(c,u,h){if(I.isUndefined(u)){if(!I.isUndefined(c))return n(void 0,c,h)}else return n(c,u,h)}function r(c,u){if(!I.isUndefined(u))return n(void 0,u)}function o(c,u){if(I.isUndefined(u)){if(!I.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,h){if(h in e)return n(c,u);if(h in i)return n(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>s(Lc(c),Lc(u),!0)};return I.forEach(Object.keys(Object.assign({},i,e)),function(u){const h=l[u]||s,d=h(i[u],e[u],u);I.isUndefined(d)&&h!==a||(t[u]=d)}),t}const Wh="1.4.0",ll={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{ll[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const Fc={};ll.transitional=function(e,t,n){function s(r,o){return"[Axios v"+Wh+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(e===!1)throw new te(s(o," has been removed"+(t?" in "+t:"")),te.ERR_DEPRECATED);return t&&!Fc[o]&&(Fc[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}};function Ap(i,e,t){if(typeof i!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const r=n[s],o=e[r];if(o){const a=i[r],l=a===void 0||o(a,r,i);if(l!==!0)throw new te("option "+r+" must be "+l,te.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new te("Unknown option "+r,te.ERR_BAD_OPTION)}}const qo={assertOptions:Ap,validators:ll},zt=qo.validators;class cr{constructor(e){this.defaults=e,this.interceptors={request:new Ic,response:new Ic}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=gi(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:r}=t;n!==void 0&&qo.assertOptions(n,{silentJSONParsing:zt.transitional(zt.boolean),forcedJSONParsing:zt.transitional(zt.boolean),clarifyTimeoutError:zt.transitional(zt.boolean)},!1),s!=null&&(I.isFunction(s)?t.paramsSerializer={serialize:s}:qo.assertOptions(s,{encode:zt.function,serialize:zt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o;o=r&&I.merge(r.common,r[t.method]),o&&I.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),t.headers=Lt.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,h=0,d;if(!l){const g=[Ac.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),d=g.length,u=Promise.resolve(t);h<d;)u=u.then(g[h++],g[h++]);return u}d=a.length;let f=t;for(h=0;h<d;){const g=a[h++],m=a[h++];try{f=g(f)}catch(_){m.call(this,_);break}}try{u=Ac.call(this,f)}catch(g){return Promise.reject(g)}for(h=0,d=c.length;h<d;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=gi(this.defaults,e);const t=jh(e.baseURL,e.url);return Nh(t,e.params,e.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(e){cr.prototype[e]=function(t,n){return this.request(gi(n||{},{method:e,url:t,data:(n||{}).data}))}});I.forEach(["post","put","patch"],function(e){function t(n){return function(r,o,a){return this.request(gi(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}cr.prototype[e]=t(),cr.prototype[e+"Form"]=t(!0)});const Us=cr;class cl{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const n=this;this.promise.then(s=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](s);n._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(s);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,a){n.reason||(n.reason=new ls(r,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new cl(function(s){e=s}),cancel:e}}}const Lp=cl;function Fp(i){return function(t){return i.apply(null,t)}}function Mp(i){return I.isObject(i)&&i.isAxiosError===!0}const Jo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jo).forEach(([i,e])=>{Jo[e]=i});const Op=Jo;function zh(i){const e=new Us(i),t=Rh(Us.prototype.request,e);return I.extend(t,Us.prototype,e,{allOwnKeys:!0}),I.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return zh(gi(i,s))},t}const ve=zh(al);ve.Axios=Us;ve.CanceledError=ls;ve.CancelToken=Lp;ve.isCancel=Bh;ve.VERSION=Wh;ve.toFormData=Wr;ve.AxiosError=te;ve.Cancel=ve.CanceledError;ve.all=function(e){return Promise.all(e)};ve.spread=Fp;ve.isAxiosError=Mp;ve.mergeConfig=gi;ve.AxiosHeaders=Lt;ve.formToJSON=i=>Vh(I.isHTMLForm(i)?new FormData(i):i);ve.HttpStatusCode=Op;ve.default=ve;const Mc=ve;function Xh(i){const{t:e}=ca();function t(n){var l;let{name:s}=n;const r={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[s],o=i[`onClick:${s}`],a=o&&r?e(`$vuetify.input.${r}`,(l=i.label)!=null?l:""):void 0;return C(ut,{icon:i[`${s}Icon`],"aria-label":a,onClick:o},null)}return{InputIcon:t}}const kp=ee({text:String,clickable:Boolean,...Ae(),...Dt()},"v-label"),Uh=he()({name:"VLabel",props:kp(),setup(i,e){let{slots:t}=e;return ye(()=>{var n;return C("label",{class:["v-label",{"v-label--clickable":i.clickable},i.class],style:i.style},[i.text,(n=t.default)==null?void 0:n.call(t)])}),{}}}),Dp=ee({floating:Boolean,...Ae()},"v-field-label"),Ps=he()({name:"VFieldLabel",props:Dp(),setup(i,e){let{slots:t}=e;return ye(()=>C(Uh,{class:["v-field-label",{"v-field-label--floating":i.floating},i.class],style:i.style,"aria-hidden":i.floating||void 0},t)),{}}}),Yh=ee({focused:Boolean,"onUpdate:focused":ft()},"focus");function Kh(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:au();const t=Oe(i,"focused"),n=k(()=>({[`${e}--focused`]:t.value}));function s(){t.value=!0}function r(){t.value=!1}return{focusClasses:n,isFocused:t,focus:s,blur:r}}const Np=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Hh=ee({appendInnerIcon:Se,bgColor:String,clearable:Boolean,clearIcon:{type:Se,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:Se,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:i=>Np.includes(i)},"onClick:clear":ft(),"onClick:appendInner":ft(),"onClick:prependInner":ft(),...Ae(),...qd(),...xr(),...Dt()},"v-field"),Zh=he()({name:"VField",inheritAttrs:!1,props:{id:String,...Yh(),...Hh()},emits:{"update:focused":i=>!0,"update:modelValue":i=>!0},setup(i,e){let{attrs:t,emit:n,slots:s}=e;const{themeClasses:r}=An(i),{loaderClasses:o}=Jd(i),{focusClasses:a,isFocused:l,focus:c,blur:u}=Kh(i),{InputIcon:h}=Xh(i),{roundedClasses:d}=Cr(i),{rtlClasses:f}=ou(),g=k(()=>i.dirty||i.active),m=k(()=>!i.singleLine&&!!(i.label||s.label)),_=Ln(),p=k(()=>i.id||`input-${_}`),v=k(()=>`${p.value}-messages`),y=X(),x=X(),E=X(),S=k(()=>["plain","underlined"].includes(i.variant)),{backgroundColorClasses:w,backgroundColorStyles:P}=ga(ne(i,"bgColor")),{textColorClasses:O,textColorStyles:D}=ts(k(()=>i.error||i.disabled?void 0:g.value&&l.value?i.color:i.baseColor));ue(g,L=>{if(m.value){const V=y.value.$el,G=x.value.$el;requestAnimationFrame(()=>{const b=Ea(V),M=G.getBoundingClientRect(),R=M.x-b.x,N=M.y-b.y-(b.height/2-M.height/2),B=M.width/.75,K=Math.abs(B-b.width)>1?{maxWidth:Be(B)}:void 0,A=getComputedStyle(V),de=getComputedStyle(G),H=parseFloat(A.transitionDuration)*1e3||150,Q=parseFloat(de.getPropertyValue("--v-field-label-scale")),le=de.getPropertyValue("color");V.style.visibility="visible",G.style.visibility="hidden",qn(V,{transform:`translate(${R}px, ${N}px) scale(${Q})`,color:le,...K},{duration:H,easing:Ks,direction:L?"normal":"reverse"}).finished.then(()=>{V.style.removeProperty("visibility"),G.style.removeProperty("visibility")})})}},{flush:"post"});const T=k(()=>({isActive:g,isFocused:l,controlRef:E,blur:u,focus:c}));function F(L){L.target!==document.activeElement&&L.preventDefault()}return ye(()=>{var R,N,B,K;const L=i.variant==="outlined",V=s["prepend-inner"]||i.prependInnerIcon,G=!!(i.clearable||s.clear),b=!!(s["append-inner"]||i.appendInnerIcon||G),M=s.label?s.label({...T.value,label:i.label,props:{for:p.value}}):i.label;return C("div",ce({class:["v-field",{"v-field--active":g.value,"v-field--appended":b,"v-field--center-affix":(R=i.centerAffix)!=null?R:!S.value,"v-field--disabled":i.disabled,"v-field--dirty":i.dirty,"v-field--error":i.error,"v-field--flat":i.flat,"v-field--has-background":!!i.bgColor,"v-field--persistent-clear":i.persistentClear,"v-field--prepended":V,"v-field--reverse":i.reverse,"v-field--single-line":i.singleLine,"v-field--no-label":!M,[`v-field--variant-${i.variant}`]:!0},r.value,w.value,a.value,o.value,d.value,f.value,i.class],style:[P.value,D.value,i.style],onClick:F},t),[C("div",{class:"v-field__overlay"},null),C(Qd,{name:"v-field",active:!!i.loading,color:i.error?"error":i.color},{default:s.loader}),V&&C("div",{key:"prepend",class:"v-field__prepend-inner"},[i.prependInnerIcon&&C(h,{key:"prepend-icon",name:"prependInner"},null),(N=s["prepend-inner"])==null?void 0:N.call(s,T.value)]),C("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(i.variant)&&m.value&&C(Ps,{key:"floating-label",ref:x,class:[O.value],floating:!0,for:p.value},{default:()=>[M]}),C(Ps,{ref:y,for:p.value},{default:()=>[M]}),(B=s.default)==null?void 0:B.call(s,{...T.value,props:{id:p.value,class:"v-field__input","aria-describedby":v.value},focus:c,blur:u})]),G&&C(yu,{key:"clear"},{default:()=>[$e(C("div",{class:"v-field__clearable",onMousedown:A=>{A.preventDefault(),A.stopPropagation()}},[s.clear?s.clear():C(h,{name:"clear"},null)]),[[Qi,i.dirty]])]}),b&&C("div",{key:"append",class:"v-field__append-inner"},[(K=s["append-inner"])==null?void 0:K.call(s,T.value),i.appendInnerIcon&&C(h,{key:"append-icon",name:"appendInner"},null)]),C("div",{class:["v-field__outline",O.value]},[L&&C(Ee,null,[C("div",{class:"v-field__outline__start"},null),m.value&&C("div",{class:"v-field__outline__notch"},[C(Ps,{ref:x,floating:!0,for:p.value},{default:()=>[M]})]),C("div",{class:"v-field__outline__end"},null)]),S.value&&m.value&&C(Ps,{ref:x,floating:!0,for:p.value},{default:()=>[M]})])])}),{controlRef:E}}});function Gp(i){const e=Object.keys(Zh.props).filter(t=>!jd(t)&&t!=="class"&&t!=="style");return ua(i,e)}const Vp=ee({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ae(),...pr({transition:{component:pu,leaveAbsolute:!0,group:!0}})},"v-messages"),Bp=he()({name:"VMessages",props:Vp(),setup(i,e){let{slots:t}=e;const n=k(()=>vn(i.messages)),{textColorClasses:s,textColorStyles:r}=ts(k(()=>i.color));return ye(()=>C(vr,{transition:i.transition,tag:"div",class:["v-messages",s.value,i.class],style:[r.value,i.style],role:"alert","aria-live":"polite"},{default:()=>[i.active&&n.value.map((o,a)=>C("div",{class:"v-messages__message",key:`${a}-${n.value}`},[t.message?t.message({message:o}):o]))]})),{}}}),jp=Symbol.for("vuetify:form");function $h(){return kt(jp,null)}const Wp=ee({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Yh()},"validation");function zp(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:au(),t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ln();const n=Oe(i,"modelValue"),s=k(()=>i.validationValue===void 0?n.value:i.validationValue),r=$h(),o=X([]),a=Re(!0),l=k(()=>!!(vn(n.value===""?null:n.value).length||vn(s.value===""?null:s.value).length)),c=k(()=>{var x;return!!((x=i.disabled)!=null?x:r==null?void 0:r.isDisabled.value)}),u=k(()=>{var x;return!!((x=i.readonly)!=null?x:r==null?void 0:r.isReadonly.value)}),h=k(()=>i.errorMessages.length?vn(i.errorMessages).slice(0,Math.max(0,+i.maxErrors)):o.value),d=k(()=>{var S,w;let x=((S=i.validateOn)!=null?S:r==null?void 0:r.validateOn.value)||"input";x==="lazy"&&(x="input lazy");const E=new Set((w=x==null?void 0:x.split(" "))!=null?w:[]);return{blur:E.has("blur")||E.has("input"),input:E.has("input"),submit:E.has("submit"),lazy:E.has("lazy")}}),f=k(()=>i.error||i.errorMessages.length?!1:i.rules.length?a.value?o.value.length||d.value.lazy?null:!0:!o.value.length:!0),g=Re(!1),m=k(()=>({[`${e}--error`]:f.value===!1,[`${e}--dirty`]:l.value,[`${e}--disabled`]:c.value,[`${e}--readonly`]:u.value})),_=k(()=>{var x;return(x=i.name)!=null?x:He(t)});Wd(()=>{r==null||r.register({id:_.value,validate:y,reset:p,resetValidation:v})}),ha(()=>{r==null||r.unregister(_.value)}),la(async()=>{d.value.lazy||await y(!0),r==null||r.update(_.value,f.value,h.value)}),Gi(()=>d.value.input,()=>{ue(s,()=>{if(s.value!=null)y();else if(i.focused){const x=ue(()=>i.focused,E=>{E||y(),x()})}})}),Gi(()=>d.value.blur,()=>{ue(()=>i.focused,x=>{x||y()})}),ue(f,()=>{r==null||r.update(_.value,f.value,h.value)});function p(){n.value=null,Mt(v)}function v(){a.value=!0,d.value.lazy?o.value=[]:y(!0)}async function y(){var S;let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const E=[];g.value=!0;for(const w of i.rules){if(E.length>=+((S=i.maxErrors)!=null?S:1))break;const O=await(typeof w=="function"?w:()=>w)(s.value);if(O!==!0){if(typeof O!="string"){console.warn(`${O} is not a valid value. Rule functions must return boolean true or a string.`);continue}E.push(O)}}return o.value=E,g.value=!1,a.value=x,o.value}return{errorMessages:h,isDirty:l,isDisabled:c,isReadonly:u,isPristine:a,isValid:f,isValidating:g,reset:p,resetValidation:v,validate:y,validationClasses:m}}const qh=ee({id:String,appendIcon:Se,centerAffix:{type:Boolean,default:!0},prependIcon:Se,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:i=>["horizontal","vertical"].includes(i)},"onClick:prepend":ft(),"onClick:append":ft(),...Ae(),...ns(),...Wp()},"v-input"),Oc=he()({name:"VInput",props:{...qh()},emits:{"update:modelValue":i=>!0},setup(i,e){let{attrs:t,slots:n,emit:s}=e;const{densityClasses:r}=is(i),{InputIcon:o}=Xh(i),a=Ln(),l=k(()=>i.id||`input-${a}`),c=k(()=>`${l.value}-messages`),{errorMessages:u,isDirty:h,isDisabled:d,isReadonly:f,isPristine:g,isValid:m,isValidating:_,reset:p,resetValidation:v,validate:y,validationClasses:x}=zp(i,"v-input",l),E=k(()=>({id:l,messagesId:c,isDirty:h,isDisabled:d,isReadonly:f,isPristine:g,isValid:m,isValidating:_,reset:p,resetValidation:v,validate:y})),S=k(()=>{var w;return((w=i.errorMessages)==null?void 0:w.length)||!g.value&&u.value.length?u.value:i.hint&&(i.persistentHint||i.focused)?i.hint:i.messages});return ye(()=>{var T,F,L,V;const w=!!(n.prepend||i.prependIcon),P=!!(n.append||i.appendIcon),O=S.value.length>0,D=!i.hideDetails||i.hideDetails==="auto"&&(O||!!n.details);return C("div",{class:["v-input",`v-input--${i.direction}`,{"v-input--center-affix":i.centerAffix},r.value,x.value,i.class],style:i.style},[w&&C("div",{key:"prepend",class:"v-input__prepend"},[(T=n.prepend)==null?void 0:T.call(n,E.value),i.prependIcon&&C(o,{key:"prepend-icon",name:"prepend"},null)]),n.default&&C("div",{class:"v-input__control"},[(F=n.default)==null?void 0:F.call(n,E.value)]),P&&C("div",{key:"append",class:"v-input__append"},[i.appendIcon&&C(o,{key:"append-icon",name:"append"},null),(L=n.append)==null?void 0:L.call(n,E.value)]),D&&C("div",{class:"v-input__details"},[C(Bp,{id:c.value,active:O,messages:S.value},{message:n.message}),(V=n.details)==null?void 0:V.call(n,E.value)])])}),{reset:p,resetValidation:v,validate:y}}});const Xp=ee({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ae(),...pr({transition:{component:pu}})},"v-counter"),Up=he()({name:"VCounter",functional:!0,props:Xp(),setup(i,e){let{slots:t}=e;const n=k(()=>i.max?`${i.value} / ${i.max}`:String(i.value));return ye(()=>C(vr,{transition:i.transition},{default:()=>[$e(C("div",{class:["v-counter",i.class],style:i.style},[t.default?t.default({counter:n.value,max:i.max,value:i.value}):n.value]),[[Qi,i.active]])]})),{}}}),Yp=["color","file","time","date","datetime-local","week","month"],Jh=ee({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"},modelModifiers:Object,...qh(),...Hh()},"v-text-field"),kc=he()({name:"VTextField",directives:{Intersect:ef},inheritAttrs:!1,props:Jh(),emits:{"click:control":i=>!0,"mousedown:control":i=>!0,"update:focused":i=>!0,"update:modelValue":i=>!0},setup(i,e){let{attrs:t,emit:n,slots:s}=e;const r=Oe(i,"modelValue"),{isFocused:o,focus:a,blur:l}=Kh(i),c=k(()=>{var S;return typeof i.counterValue=="function"?i.counterValue(r.value):((S=r.value)!=null?S:"").toString().length}),u=k(()=>{if(t.maxlength)return t.maxlength;if(!(!i.counter||typeof i.counter!="number"&&typeof i.counter!="string"))return i.counter}),h=k(()=>["plain","underlined"].includes(i.variant));function d(S,w){var P,O;!i.autofocus||!S||(O=(P=w[0].target)==null?void 0:P.focus)==null||O.call(P)}const f=X(),g=X(),m=X(),_=k(()=>Yp.includes(i.type)||i.persistentPlaceholder||o.value||i.active);function p(){var S;m.value!==document.activeElement&&((S=m.value)==null||S.focus()),o.value||a()}function v(S){n("mousedown:control",S),S.target!==m.value&&(p(),S.preventDefault())}function y(S){p(),n("click:control",S)}function x(S){S.stopPropagation(),p(),Mt(()=>{r.value=null,Xd(i["onClick:clear"],S)})}function E(S){var P;const w=S.target;if(r.value=w.value,((P=i.modelModifiers)==null?void 0:P.trim)&&["text","search","password","tel","url"].includes(i.type)){const O=[w.selectionStart,w.selectionEnd];Mt(()=>{w.selectionStart=O[0],w.selectionEnd=O[1]})}}return ye(()=>{const S=!!(s.counter||i.counter||i.counterValue),w=!!(S||s.details),[P,O]=lu(t),[{modelValue:D,...T}]=Oc.filterProps(i),[F]=Gp(i);return C(Oc,ce({ref:f,modelValue:r.value,"onUpdate:modelValue":L=>r.value=L,class:["v-text-field",{"v-text-field--prefixed":i.prefix,"v-text-field--suffixed":i.suffix,"v-text-field--plain-underlined":["plain","underlined"].includes(i.variant)},i.class],style:i.style},P,T,{centerAffix:!h.value,focused:o.value}),{...s,default:L=>{let{id:V,isDisabled:G,isDirty:b,isReadonly:M,isValid:R}=L;return C(Zh,ce({ref:g,onMousedown:v,onClick:y,"onClick:clear":x,"onClick:prependInner":i["onClick:prependInner"],"onClick:appendInner":i["onClick:appendInner"],role:"textbox"},F,{id:V.value,active:_.value||b.value,dirty:b.value||i.dirty,disabled:G.value,focused:o.value,error:R.value===!1}),{...s,default:N=>{let{props:{class:B,...K}}=N;const A=$e(C("input",ce({ref:m,value:r.value,onInput:E,autofocus:i.autofocus,readonly:M.value,disabled:G.value,name:i.name,placeholder:i.placeholder,size:1,type:i.type,onFocus:p,onBlur:l},K,O),null),[[li("intersect"),{handler:d},null,{once:!0}]]);return C(Ee,null,[i.prefix&&C("span",{class:"v-text-field__prefix"},[i.prefix]),s.default?C("div",{class:B,"data-no-activator":""},[s.default(),A]):zd(A,{class:B}),i.suffix&&C("span",{class:"v-text-field__suffix"},[i.suffix])])}})},details:w?L=>{var V;return C(Ee,null,[(V=s.details)==null?void 0:V.call(s,L),S&&C(Ee,null,[C("span",null,null),C(Up,{active:i.persistentCounter||o.value,value:c.value,max:u.value},s.counter)])])}:void 0})}),Gr({},f,g,m)}});const Qh=Symbol.for("vuetify:selection-control-group"),ed=ee({color:String,disabled:Boolean,defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Se,trueIcon:Se,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:yr},...Ae(),...ns(),...Dt()},"selection-control-group"),Kp=ee({...ed({defaultsTarget:"VSelectionControl"})},"v-selection-control-group");he()({name:"VSelectionControlGroup",props:Kp(),emits:{"update:modelValue":i=>!0},setup(i,e){let{slots:t}=e;const n=Oe(i,"modelValue"),s=Ln(),r=k(()=>i.id||`v-selection-control-group-${s}`),o=k(()=>i.name||r.value),a=new Set;return bn(Qh,{modelValue:n,forceUpdate:()=>{a.forEach(l=>l())},onForceUpdate:l=>{a.add(l),rt(()=>{a.delete(l)})}}),da({[i.defaultsTarget]:{color:ne(i,"color"),disabled:ne(i,"disabled"),density:ne(i,"density"),error:ne(i,"error"),inline:ne(i,"inline"),modelValue:n,multiple:k(()=>!!i.multiple||i.multiple==null&&Array.isArray(n.value)),name:o,falseIcon:ne(i,"falseIcon"),trueIcon:ne(i,"trueIcon"),readonly:ne(i,"readonly"),ripple:ne(i,"ripple"),type:ne(i,"type"),valueComparator:ne(i,"valueComparator")}}),ye(()=>{var l;return C("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":i.inline},i.class],style:i.style,role:i.type==="radio"?"radiogroup":void 0},[(l=t.default)==null?void 0:l.call(t)])}),{}}});const td=ee({label:String,trueValue:null,falseValue:null,value:null,...Ae(),...ed()},"v-selection-control");function Hp(i){const e=kt(Qh,void 0),{densityClasses:t}=is(i),n=Oe(i,"modelValue"),s=k(()=>i.trueValue!==void 0?i.trueValue:i.value!==void 0?i.value:!0),r=k(()=>i.falseValue!==void 0?i.falseValue:!1),o=k(()=>!!i.multiple||i.multiple==null&&Array.isArray(n.value)),a=k({get(){const h=e?e.modelValue.value:n.value;return o.value?h.some(d=>i.valueComparator(d,s.value)):i.valueComparator(h,s.value)},set(h){if(i.readonly)return;const d=h?s.value:r.value;let f=d;o.value&&(f=h?[...vn(n.value),d]:vn(n.value).filter(g=>!i.valueComparator(g,s.value))),e?e.modelValue.value=f:n.value=f}}),{textColorClasses:l,textColorStyles:c}=ts(k(()=>a.value&&!i.error&&!i.disabled?i.color:void 0)),u=k(()=>a.value?i.trueIcon:i.falseIcon);return{group:e,densityClasses:t,trueValue:s,falseValue:r,model:a,textColorClasses:l,textColorStyles:c,icon:u}}const Zp=he()({name:"VSelectionControl",directives:{Ripple:_a},inheritAttrs:!1,props:td(),emits:{"update:modelValue":i=>!0},setup(i,e){let{attrs:t,slots:n}=e;const{group:s,densityClasses:r,icon:o,model:a,textColorClasses:l,textColorStyles:c,trueValue:u}=Hp(i),h=Ln(),d=k(()=>i.id||`input-${h}`),f=Re(!1),g=Re(!1),m=X();s==null||s.onForceUpdate(()=>{m.value&&(m.value.checked=a.value)});function _(y){f.value=!0,(!Po||Po&&y.target.matches(":focus-visible"))&&(g.value=!0)}function p(){f.value=!1,g.value=!1}function v(y){i.readonly&&s&&Mt(()=>s.forceUpdate()),a.value=y.target.checked}return ye(()=>{var S,w;const y=n.label?n.label({label:i.label,props:{for:d.value}}):i.label,[x,E]=lu(t);return C("div",ce({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":i.disabled,"v-selection-control--error":i.error,"v-selection-control--focused":f.value,"v-selection-control--focus-visible":g.value,"v-selection-control--inline":i.inline},r.value,i.class]},x,{style:i.style}),[C("div",{class:["v-selection-control__wrapper",l.value],style:c.value},[(S=n.default)==null?void 0:S.call(n),$e(C("div",{class:["v-selection-control__input"]},[o.value&&C(ut,{key:"icon",icon:o.value},null),C("input",ce({ref:m,checked:a.value,disabled:i.disabled,id:d.value,onBlur:p,onFocus:_,onInput:v,"aria-disabled":i.readonly,type:i.type,value:u.value,name:i.name,"aria-checked":i.type==="checkbox"?a.value:void 0},E),null),(w=n.input)==null?void 0:w.call(n,{model:a,textColorClasses:l,textColorStyles:c,props:{onFocus:_,onBlur:p,id:d.value}})]),[[li("ripple"),i.ripple&&[!i.disabled&&!i.readonly,null,["center","circle"]]]])]),y&&C(Uh,{for:d.value,clickable:!0},{default:()=>[y]})])}),{isFocused:f,input:m}}}),$p=ee({indeterminate:Boolean,indeterminateIcon:{type:Se,default:"$checkboxIndeterminate"},...td({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"v-checkbox-btn"),qp=he()({name:"VCheckboxBtn",props:$p(),emits:{"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,e){let{slots:t}=e;const n=Oe(i,"indeterminate"),s=Oe(i,"modelValue");function r(l){n.value&&(n.value=!1)}const o=k(()=>n.value?i.indeterminateIcon:i.falseIcon),a=k(()=>n.value?i.indeterminateIcon:i.trueIcon);return ye(()=>C(Zp,ce(i,{modelValue:s.value,"onUpdate:modelValue":[l=>s.value=l,r],class:["v-checkbox-btn",i.class],style:i.style,type:"checkbox",falseIcon:o.value,trueIcon:a.value,"aria-checked":n.value?"mixed":void 0}),t)),{}}});const nd=Symbol.for("vuetify:v-chip-group"),Jp=ee({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:yr},...Ae(),...af({selectedClass:"v-chip--selected"}),...yi(),...Dt(),...Er({variant:"tonal"})},"v-chip-group");he()({name:"VChipGroup",props:Jp(),emits:{"update:modelValue":i=>!0},setup(i,e){let{slots:t}=e;const{themeClasses:n}=An(i),{isSelected:s,select:r,next:o,prev:a,selected:l}=lf(i,nd);return da({VChip:{color:ne(i,"color"),disabled:ne(i,"disabled"),filter:ne(i,"filter"),variant:ne(i,"variant")}}),ye(()=>C(i.tag,{class:["v-chip-group",{"v-chip-group--column":i.column},n.value,i.class],style:i.style},{default:()=>{var c;return[(c=t.default)==null?void 0:c.call(t,{isSelected:s,select:r,next:o,prev:a,selected:l.value})]}})),{}}});const Qp=ee({activeClass:String,appendAvatar:String,appendIcon:Se,closable:Boolean,closeIcon:{type:Se,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Se,ripple:{type:Boolean,default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:ft(),onClickOnce:ft(),...ya(),...Ae(),...ns(),...pa(),...cf(),...xr(),...uu(),...tf(),...yi({tag:"span"}),...Dt(),...Er({variant:"tonal"})},"v-chip"),ev=he()({name:"VChip",directives:{Ripple:_a},props:Qp(),emits:{"click:close":i=>!0,"update:modelValue":i=>!0,"group:selected":i=>!0,click:i=>!0},setup(i,e){let{attrs:t,emit:n,slots:s}=e;const{t:r}=ca(),{borderClasses:o}=va(i),{colorClasses:a,colorStyles:l,variantClasses:c}=hu(i),{densityClasses:u}=is(i),{elevationClasses:h}=xa(i),{roundedClasses:d}=Cr(i),{sizeClasses:f}=nf(i),{themeClasses:g}=An(i),m=Oe(i,"modelValue"),_=uf(i,nd,!1),p=du(i,t),v=k(()=>i.link!==!1&&p.isLink.value),y=k(()=>!i.disabled&&i.link!==!1&&(!!_||i.link||p.isClickable.value)),x=k(()=>({"aria-label":r(i.closeLabel),onClick(w){m.value=!1,n("click:close",w)}}));function E(w){var P;n("click",w),y.value&&((P=p.navigate)==null||P.call(p,w),_==null||_.toggle())}function S(w){(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),E(w))}return()=>{const w=p.isLink.value?"a":i.tag,P=!!(i.appendIcon||i.appendAvatar),O=!!(P||s.append),D=!!(s.close||i.closable),T=!!(s.filter||i.filter)&&_,F=!!(i.prependIcon||i.prependAvatar),L=!!(F||s.prepend),V=!_||_.isSelected.value;return m.value&&$e(C(w,{class:["v-chip",{"v-chip--disabled":i.disabled,"v-chip--label":i.label,"v-chip--link":y.value,"v-chip--filter":T,"v-chip--pill":i.pill},g.value,o.value,V?a.value:void 0,u.value,h.value,d.value,f.value,c.value,_==null?void 0:_.selectedClass.value,i.class],style:[V?l.value:void 0,i.style],disabled:i.disabled||void 0,draggable:i.draggable,href:p.href.value,tabindex:y.value?0:void 0,onClick:E,onKeydown:y.value&&!v.value&&S},{default:()=>{var G,b;return[fu(y.value,"v-chip"),T&&C(yu,{key:"filter"},{default:()=>[$e(C("div",{class:"v-chip__filter"},[s.filter?$e(C(ct,{key:"filter-defaults",disabled:!i.filterIcon,defaults:{VIcon:{icon:i.filterIcon}}},null),[[li("slot"),s.filter,"default"]]):C(ut,{key:"filter-icon",icon:i.filterIcon},null)]),[[Qi,_.isSelected.value]])]}),L&&C("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?C(ct,{key:"prepend-defaults",disabled:!F,defaults:{VAvatar:{image:i.prependAvatar,start:!0},VIcon:{icon:i.prependIcon,start:!0}}},s.prepend):C(Ee,null,[i.prependIcon&&C(ut,{key:"prepend-icon",icon:i.prependIcon,start:!0},null),i.prependAvatar&&C(Ys,{key:"prepend-avatar",image:i.prependAvatar,start:!0},null)])]),C("div",{class:"v-chip__content"},[(b=(G=s.default)==null?void 0:G.call(s,{isSelected:_==null?void 0:_.isSelected.value,selectedClass:_==null?void 0:_.selectedClass.value,select:_==null?void 0:_.select,toggle:_==null?void 0:_.toggle,value:_==null?void 0:_.value.value,disabled:i.disabled}))!=null?b:i.text]),O&&C("div",{key:"append",class:"v-chip__append"},[s.append?C(ct,{key:"append-defaults",disabled:!P,defaults:{VAvatar:{end:!0,image:i.appendAvatar},VIcon:{end:!0,icon:i.appendIcon}}},s.append):C(Ee,null,[i.appendIcon&&C(ut,{key:"append-icon",end:!0,icon:i.appendIcon},null),i.appendAvatar&&C(Ys,{key:"append-avatar",end:!0,image:i.appendAvatar},null)])]),D&&C("div",ce({key:"close",class:"v-chip__close"},x.value),[s.close?C(ct,{key:"close-defaults",defaults:{VIcon:{icon:i.closeIcon,size:"x-small"}}},s.close):C(ut,{key:"close-icon",icon:i.closeIcon,size:"x-small"},null)])]}}),[[li("ripple"),y.value&&i.ripple,null]])}}});const tv=ee({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...Ae(),...Dt()},"v-divider"),nv=he()({name:"VDivider",props:tv(),setup(i,e){let{attrs:t}=e;const{themeClasses:n}=An(i),{textColorClasses:s,textColorStyles:r}=ts(ne(i,"color")),o=k(()=>{const a={};return i.length&&(a[i.vertical?"maxHeight":"maxWidth"]=Be(i.length)),i.thickness&&(a[i.vertical?"borderRightWidth":"borderTopWidth"]=Be(i.thickness)),a});return ye(()=>C("hr",{class:[{"v-divider":!0,"v-divider--inset":i.inset,"v-divider--vertical":i.vertical},n.value,s.value,i.class],style:[o.value,r.value,i.style],"aria-orientation":!t.role||t.role==="separator"?i.vertical?"vertical":"horizontal":void 0,role:`${t.role||"separator"}`},null)),{}}}),Qo=Symbol.for("vuetify:list");function id(){const i=kt(Qo,{hasPrepend:Re(!1),updateHasPrepend:()=>null}),e={hasPrepend:Re(!1),updateHasPrepend:t=>{t&&(e.hasPrepend.value=t)}};return bn(Qo,e),i}function sd(){return kt(Qo,null)}const iv={open:i=>{let{id:e,value:t,opened:n,parents:s}=i;if(t){const r=new Set;r.add(e);let o=s.get(e);for(;o!=null;)r.add(o),o=s.get(o);return r}else return n.delete(e),n},select:()=>null},rd={open:i=>{let{id:e,value:t,opened:n,parents:s}=i;if(t){let r=s.get(e);for(n.add(e);r!=null&&r!==e;)n.add(r),r=s.get(r);return n}else n.delete(e);return n},select:()=>null},sv={open:rd.open,select:i=>{let{id:e,value:t,opened:n,parents:s}=i;if(!t)return n;const r=[];let o=s.get(e);for(;o!=null;)r.push(o),o=s.get(o);return new Set(r)}},ul=i=>{const e={select:t=>{let{id:n,value:s,selected:r}=t;if(n=Pn(n),i&&!s){const o=Array.from(r.entries()).reduce((a,l)=>{let[c,u]=l;return u==="on"?[...a,c]:a},[]);if(o.length===1&&o[0]===n)return r}return r.set(n,s?"on":"off"),r},in:(t,n,s)=>{let r=new Map;for(const o of t||[])r=e.select({id:o,value:!0,selected:new Map(r),children:n,parents:s});return r},out:t=>{const n=[];for(const[s,r]of t.entries())r==="on"&&n.push(s);return n}};return e},od=i=>{const e=ul(i);return{select:n=>{let{selected:s,id:r,...o}=n;r=Pn(r);const a=s.has(r)?new Map([[r,s.get(r)]]):new Map;return e.select({...o,id:r,selected:a})},in:(n,s,r)=>{let o=new Map;return n!=null&&n.length&&(o=e.in(n.slice(0,1),s,r)),o},out:(n,s,r)=>e.out(n,s,r)}},rv=i=>{const e=ul(i);return{select:n=>{let{id:s,selected:r,children:o,...a}=n;return s=Pn(s),o.has(s)?r:e.select({id:s,selected:r,children:o,...a})},in:e.in,out:e.out}},ov=i=>{const e=od(i);return{select:n=>{let{id:s,selected:r,children:o,...a}=n;return s=Pn(s),o.has(s)?r:e.select({id:s,selected:r,children:o,...a})},in:e.in,out:e.out}},av=i=>{const e={select:t=>{let{id:n,value:s,selected:r,children:o,parents:a}=t;n=Pn(n);const l=new Map(r),c=[n];for(;c.length;){const h=c.shift();r.set(h,s?"on":"off"),o.has(h)&&c.push(...o.get(h))}let u=a.get(n);for(;u;){const h=o.get(u),d=h.every(g=>r.get(g)==="on"),f=h.every(g=>!r.has(g)||r.get(g)==="off");r.set(u,d?"on":f?"off":"indeterminate"),u=a.get(u)}return i&&!s&&Array.from(r.entries()).reduce((d,f)=>{let[g,m]=f;return m==="on"?[...d,g]:d},[]).length===0?l:r},in:(t,n,s)=>{let r=new Map;for(const o of t||[])r=e.select({id:o,value:!0,selected:new Map(r),children:n,parents:s});return r},out:(t,n)=>{const s=[];for(const[r,o]of t.entries())o==="on"&&!n.has(r)&&s.push(r);return s}};return e},Xi=Symbol.for("vuetify:nested"),ad={id:Re(),root:{register:()=>null,unregister:()=>null,parents:X(new Map),children:X(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:X(new Set),selected:X(new Map),selectedValues:X([])}},lv=ee({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),cv=i=>{let e=!1;const t=X(new Map),n=X(new Map),s=Oe(i,"opened",i.opened,h=>new Set(h),h=>[...h.values()]),r=k(()=>{if(typeof i.selectStrategy=="object")return i.selectStrategy;switch(i.selectStrategy){case"single-leaf":return ov(i.mandatory);case"leaf":return rv(i.mandatory);case"independent":return ul(i.mandatory);case"single-independent":return od(i.mandatory);case"classic":default:return av(i.mandatory)}}),o=k(()=>{if(typeof i.openStrategy=="object")return i.openStrategy;switch(i.openStrategy){case"list":return sv;case"single":return iv;case"multiple":default:return rd}}),a=Oe(i,"selected",i.selected,h=>r.value.in(h,t.value,n.value),h=>r.value.out(h,t.value,n.value));ha(()=>{e=!0});function l(h){const d=[];let f=h;for(;f!=null;)d.unshift(f),f=n.value.get(f);return d}const c=_r("nested"),u={id:Re(),root:{opened:s,selected:a,selectedValues:k(()=>{const h=[];for(const[d,f]of a.value.entries())f==="on"&&h.push(d);return h}),register:(h,d,f)=>{d&&h!==d&&n.value.set(h,d),f&&t.value.set(h,[]),d!=null&&t.value.set(d,[...t.value.get(d)||[],h])},unregister:h=>{var f;if(e)return;t.value.delete(h);const d=n.value.get(h);if(d){const g=(f=t.value.get(d))!=null?f:[];t.value.set(d,g.filter(m=>m!==h))}n.value.delete(h),s.value.delete(h)},open:(h,d,f)=>{c.emit("click:open",{id:h,value:d,path:l(h),event:f});const g=o.value.open({id:h,value:d,opened:new Set(s.value),children:t.value,parents:n.value,event:f});g&&(s.value=g)},openOnSelect:(h,d,f)=>{const g=o.value.select({id:h,value:d,selected:new Map(a.value),opened:new Set(s.value),children:t.value,parents:n.value,event:f});g&&(s.value=g)},select:(h,d,f)=>{c.emit("click:select",{id:h,value:d,path:l(h),event:f});const g=r.value.select({id:h,value:d,selected:new Map(a.value),children:t.value,parents:n.value,event:f});g&&(a.value=g),u.root.openOnSelect(h,d,f)},children:t,parents:n}};return bn(Xi,u),u.root},ld=(i,e)=>{const t=kt(Xi,ad),n=Symbol(Ln()),s=k(()=>{var o;return(o=i.value)!=null?o:n}),r={...t,id:s,open:(o,a)=>t.root.open(s.value,o,a),openOnSelect:(o,a)=>t.root.openOnSelect(s.value,o,a),isOpen:k(()=>t.root.opened.value.has(s.value)),parent:k(()=>t.root.parents.value.get(s.value)),select:(o,a)=>t.root.select(s.value,o,a),isSelected:k(()=>t.root.selected.value.get(Pn(s.value))==="on"),isIndeterminate:k(()=>t.root.selected.value.get(s.value)==="indeterminate"),isLeaf:k(()=>!t.root.children.value.get(s.value)),isGroupActivator:t.isGroupActivator};return!t.isGroupActivator&&t.root.register(s.value,t.id.value,e),ha(()=>{!t.isGroupActivator&&t.root.unregister(s.value)}),e&&bn(Xi,r),r},uv=()=>{const i=kt(Xi,ad);bn(Xi,{...i,isGroupActivator:!0})},hv=Ud({name:"VListGroupActivator",setup(i,e){let{slots:t}=e;return uv(),()=>{var n;return(n=t.default)==null?void 0:n.call(t)}}}),dv=ee({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Se,default:"$collapse"},expandIcon:{type:Se,default:"$expand"},prependIcon:Se,appendIcon:Se,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Ae(),...yi()},"v-list-group"),Dc=he()({name:"VListGroup",props:dv(),setup(i,e){let{slots:t}=e;const{isOpen:n,open:s,id:r}=ld(ne(i,"value"),!0),o=k(()=>`v-list-group--id-${String(r.value)}`),a=sd(),{isBooted:l}=hf();function c(f){s(!n.value,f)}const u=k(()=>({onClick:c,class:"v-list-group__header",id:o.value})),h=k(()=>n.value?i.collapseIcon:i.expandIcon),d=k(()=>({VListItem:{active:n.value,activeColor:i.activeColor,baseColor:i.baseColor,color:i.color,prependIcon:i.prependIcon||i.subgroup&&h.value,appendIcon:i.appendIcon||!i.subgroup&&h.value,title:i.title,value:i.value}}));return ye(()=>C(i.tag,{class:["v-list-group",{"v-list-group--prepend":a==null?void 0:a.hasPrepend.value,"v-list-group--fluid":i.fluid,"v-list-group--subgroup":i.subgroup,"v-list-group--open":n.value},i.class],style:i.style},{default:()=>[t.activator&&C(ct,{defaults:d.value},{default:()=>[C(hv,null,{default:()=>[t.activator({props:u.value,isOpen:n.value})]})]}),C(vr,{transition:{component:df},disabled:!l.value},{default:()=>{var f;return[$e(C("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[(f=t.default)==null?void 0:f.call(t)]),[[Qi,n.value]])]}})]})),{}}});const fv=gu("v-list-item-subtitle"),gv=gu("v-list-item-title"),mv=ee({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Se,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Se,ripple:{type:Boolean,default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:ft(),onClickOnce:ft(),...ya(),...Ae(),...ns(),...fa(),...pa(),...xr(),...uu(),...yi(),...Dt(),...Er({variant:"text"})},"v-list-item"),ur=he()({name:"VListItem",directives:{Ripple:_a},props:mv(),emits:{click:i=>!0},setup(i,e){let{attrs:t,slots:n,emit:s}=e;const r=du(i,t),o=k(()=>{var R;return(R=i.value)!=null?R:r.href.value}),{select:a,isSelected:l,isIndeterminate:c,isGroupActivator:u,root:h,parent:d,openOnSelect:f}=ld(o,!1),g=sd(),m=k(()=>{var R;return i.active!==!1&&(i.active||((R=r.isActive)==null?void 0:R.value)||l.value)}),_=k(()=>i.link!==!1&&r.isLink.value),p=k(()=>!i.disabled&&i.link!==!1&&(i.link||r.isClickable.value||i.value!=null&&!!g)),v=k(()=>i.rounded||i.nav),y=k(()=>{var R;return(R=i.color)!=null?R:i.activeColor}),x=k(()=>{var R;return{color:m.value&&(R=y.value)!=null?R:i.baseColor,variant:i.variant}});ue(()=>{var R;return(R=r.isActive)==null?void 0:R.value},R=>{R&&d.value!=null&&h.open(d.value,!0),R&&f(R)},{immediate:!0});const{themeClasses:E}=An(i),{borderClasses:S}=va(i),{colorClasses:w,colorStyles:P,variantClasses:O}=hu(x),{densityClasses:D}=is(i),{dimensionStyles:T}=ma(i),{elevationClasses:F}=xa(i),{roundedClasses:L}=Cr(v),V=k(()=>i.lines?`v-list-item--${i.lines}-line`:void 0),G=k(()=>({isActive:m.value,select:a,isSelected:l.value,isIndeterminate:c.value}));function b(R){var N;s("click",R),!(u||!p.value)&&((N=r.navigate)==null||N.call(r,R),i.value!=null&&a(!l.value,R))}function M(R){(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),b(R))}return ye(()=>{const R=_.value?"a":i.tag,N=n.title||i.title,B=n.subtitle||i.subtitle,K=!!(i.appendAvatar||i.appendIcon),A=!!(K||n.append),de=!!(i.prependAvatar||i.prependIcon),H=!!(de||n.prepend);return g==null||g.updateHasPrepend(H),i.activeColor&&Yd("active-color",["color","base-color"]),$e(C(R,{class:["v-list-item",{"v-list-item--active":m.value,"v-list-item--disabled":i.disabled,"v-list-item--link":p.value,"v-list-item--nav":i.nav,"v-list-item--prepend":!H&&(g==null?void 0:g.hasPrepend.value),[`${i.activeClass}`]:i.activeClass&&m.value},E.value,S.value,w.value,D.value,F.value,V.value,L.value,O.value,i.class],style:[P.value,T.value,i.style],href:r.href.value,tabindex:p.value?g?-2:0:void 0,onClick:b,onKeydown:p.value&&!_.value&&M},{default:()=>{var Q;return[fu(p.value||m.value,"v-list-item"),H&&C("div",{key:"prepend",class:"v-list-item__prepend"},[n.prepend?C(ct,{key:"prepend-defaults",disabled:!de,defaults:{VAvatar:{density:i.density,image:i.prependAvatar},VIcon:{density:i.density,icon:i.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var le;return[(le=n.prepend)==null?void 0:le.call(n,G.value)]}}):C(Ee,null,[i.prependAvatar&&C(Ys,{key:"prepend-avatar",density:i.density,image:i.prependAvatar},null),i.prependIcon&&C(ut,{key:"prepend-icon",density:i.density,icon:i.prependIcon},null)])]),C("div",{class:"v-list-item__content","data-no-activator":""},[N&&C(gv,{key:"title"},{default:()=>{var le,Te;return[(Te=(le=n.title)==null?void 0:le.call(n,{title:i.title}))!=null?Te:i.title]}}),B&&C(fv,{key:"subtitle"},{default:()=>{var le,Te;return[(Te=(le=n.subtitle)==null?void 0:le.call(n,{subtitle:i.subtitle}))!=null?Te:i.subtitle]}}),(Q=n.default)==null?void 0:Q.call(n,G.value)]),A&&C("div",{key:"append",class:"v-list-item__append"},[n.append?C(ct,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{density:i.density,image:i.appendAvatar},VIcon:{density:i.density,icon:i.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var le;return[(le=n.append)==null?void 0:le.call(n,G.value)]}}):C(Ee,null,[i.appendIcon&&C(ut,{key:"append-icon",density:i.density,icon:i.appendIcon},null),i.appendAvatar&&C(Ys,{key:"append-avatar",density:i.density,image:i.appendAvatar},null)])])]}}),[[li("ripple"),p.value&&i.ripple]])}),{}}}),_v=ee({color:String,inset:Boolean,sticky:Boolean,title:String,...Ae(),...yi()},"v-list-subheader"),yv=he()({name:"VListSubheader",props:_v(),setup(i,e){let{slots:t}=e;const{textColorClasses:n,textColorStyles:s}=ts(ne(i,"color"));return ye(()=>{const r=!!(t.default||i.title);return C(i.tag,{class:["v-list-subheader",{"v-list-subheader--inset":i.inset,"v-list-subheader--sticky":i.sticky},n.value,i.class],style:[{textColorStyles:s},i.style]},{default:()=>{var o,a;return[r&&C("div",{class:"v-list-subheader__text"},[(a=(o=t.default)==null?void 0:o.call(t))!=null?a:i.title])]}})}),{}}}),pv=ee({items:Array},"v-list-children"),cd=he()({name:"VListChildren",props:pv(),setup(i,e){let{slots:t}=e;return id(),()=>{var n,s,r;return(r=(n=t.default)==null?void 0:n.call(t))!=null?r:(s=i.items)==null?void 0:s.map(o=>{var g,m,_,p;let{children:a,props:l,type:c,raw:u}=o;if(c==="divider")return(m=(g=t.divider)==null?void 0:g.call(t,{props:l}))!=null?m:C(nv,l,null);if(c==="subheader")return(p=(_=t.subheader)==null?void 0:_.call(t,{props:l}))!=null?p:C(yv,l,null);const h={subtitle:t.subtitle?v=>{var y;return(y=t.subtitle)==null?void 0:y.call(t,{...v,item:u})}:void 0,prepend:t.prepend?v=>{var y;return(y=t.prepend)==null?void 0:y.call(t,{...v,item:u})}:void 0,append:t.append?v=>{var y;return(y=t.append)==null?void 0:y.call(t,{...v,item:u})}:void 0,title:t.title?v=>{var y;return(y=t.title)==null?void 0:y.call(t,{...v,item:u})}:void 0},[d,f]=Dc.filterProps(l);return a?C(Dc,ce({value:l==null?void 0:l.value},d),{activator:v=>{let{props:y}=v;return t.header?t.header({props:{...l,...y}}):C(ur,ce(l,y),h)},default:()=>C(cd,{items:a},t)}):t.item?t.item({props:l}):C(ur,l,h)})}}}),ud=ee({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"list-items");function hd(i,e){var a;const t=It(e,i.itemTitle,e),n=i.returnObject?e:It(e,i.itemValue,t),s=It(e,i.itemChildren),r=i.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?ua(e,["children"])[1]:e:void 0:It(e,i.itemProps),o={title:t,value:n,...r};return{title:String((a=o.title)!=null?a:""),value:o.value,props:o,children:Array.isArray(s)?dd(i,s):void 0,raw:e}}function dd(i,e){const t=[];for(const n of e)t.push(hd(i,n));return t}function vv(i){const e=k(()=>dd(i,i.items));return xv(e,t=>hd(i,t))}function xv(i,e){function t(s){return s.map(r=>{const o=i.value.find(a=>yr(r,a.value));return o!=null?o:e(r)})}function n(s){return s.map(r=>{let{value:o}=r;return o})}return{items:i,transformIn:t,transformOut:n}}function Cv(i){return typeof i=="string"||typeof i=="number"||typeof i=="boolean"}function Ev(i,e){const t=It(e,i.itemType,"item"),n=Cv(e)?e:It(e,i.itemTitle),s=It(e,i.itemValue,void 0),r=It(e,i.itemChildren),o=i.itemProps===!0?ua(e,["children"])[1]:It(e,i.itemProps),a={title:n,value:s,...o};return{type:t,title:a.title,value:a.value,props:a,children:t==="item"&&r?fd(i,r):void 0,raw:e}}function fd(i,e){const t=[];for(const n of e)t.push(Ev(i,n));return t}function Sv(i){return{items:k(()=>fd(i,i.items))}}const wv=ee({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...lv({selectStrategy:"single-leaf",openStrategy:"list"}),...ya(),...Ae(),...ns(),...fa(),...pa(),itemType:{type:String,default:"type"},...ud(),...xr(),...yi(),...Dt(),...Er({variant:"text"})},"v-list"),Rv=he()({name:"VList",props:wv(),emits:{"update:selected":i=>!0,"update:opened":i=>!0,"click:open":i=>!0,"click:select":i=>!0},setup(i,e){let{slots:t}=e;const{items:n}=Sv(i),{themeClasses:s}=An(i),{backgroundColorClasses:r,backgroundColorStyles:o}=ga(ne(i,"bgColor")),{borderClasses:a}=va(i),{densityClasses:l}=is(i),{dimensionStyles:c}=ma(i),{elevationClasses:u}=xa(i),{roundedClasses:h}=Cr(i),{open:d,select:f}=cv(i),g=k(()=>i.lines?`v-list--${i.lines}-line`:void 0),m=ne(i,"activeColor"),_=ne(i,"baseColor"),p=ne(i,"color");id(),da({VListGroup:{activeColor:m,baseColor:_,color:p},VListItem:{activeClass:ne(i,"activeClass"),activeColor:m,baseColor:_,color:p,density:ne(i,"density"),disabled:ne(i,"disabled"),lines:ne(i,"lines"),nav:ne(i,"nav"),variant:ne(i,"variant")}});const v=Re(!1),y=X();function x(O){v.value=!0}function E(O){v.value=!1}function S(O){var D;!v.value&&!(O.relatedTarget&&((D=y.value)==null?void 0:D.contains(O.relatedTarget)))&&P()}function w(O){if(!!y.value){if(O.key==="ArrowDown")P("next");else if(O.key==="ArrowUp")P("prev");else if(O.key==="Home")P("first");else if(O.key==="End")P("last");else return;O.preventDefault()}}function P(O){if(y.value)return Kd(y.value,O)}return ye(()=>C(i.tag,{ref:y,class:["v-list",{"v-list--disabled":i.disabled,"v-list--nav":i.nav},s.value,r.value,a.value,l.value,u.value,g.value,h.value,i.class],style:[o.value,c.value,i.style],role:"listbox","aria-activedescendant":void 0,onFocusin:x,onFocusout:E,onFocus:S,onKeydown:w},{default:()=>[C(cd,{items:n.value},t)]})),{open:d,select:f,focus:P}}});const Tv=ee({id:String,...cu(sl({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:wa}}),["absolute"])},"v-menu"),Iv=he()({name:"VMenu",props:Tv(),emits:{"update:modelValue":i=>!0},setup(i,e){let{slots:t}=e;const n=Oe(i,"modelValue"),{scopeId:s}=il(),r=Ln(),o=k(()=>i.id||`v-menu-${r}`),a=X(),l=kt(Yo,null),c=Re(0);bn(Yo,{register(){++c.value},unregister(){--c.value},closeParents(){setTimeout(()=>{c.value||(n.value=!1,l==null||l.closeParents())},40)}}),ue(n,d=>{d?l==null||l.register():l==null||l.unregister()});function u(){l==null||l.closeParents()}const h=k(()=>ce({"aria-haspopup":"menu","aria-expanded":String(n.value),"aria-owns":o.value},i.activatorProps));return ye(()=>{const[d]=lr.filterProps(i);return C(lr,ce({ref:a,class:["v-menu",i.class],style:i.style},d,{modelValue:n.value,"onUpdate:modelValue":f=>n.value=f,absolute:!0,activatorProps:h.value,"onClick:outside":u},s),{activator:t.activator,default:function(){for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return C(ct,{root:!0},{default:()=>{var _;return[(_=t.default)==null?void 0:_.call(t,...g)]}})}})}),Gr({id:o,\u03A8openChildren:c},a)}}),bv=ee({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Se,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:yr},...ud({itemChildren:!1})},"select"),Pv=ee({...bv(),...cu(Jh({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...pr({transition:{component:wa}})},"v-select"),Nc=he()({name:"VSelect",props:Pv(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:menu":i=>!0},setup(i,e){let{slots:t}=e;const{t:n}=ca(),s=X(),r=X(),o=Oe(i,"menu"),a=k({get:()=>o.value,set:T=>{var F;o.value&&!T&&((F=r.value)==null?void 0:F.\u03A8openChildren)||(o.value=T)}}),{items:l,transformIn:c,transformOut:u}=vv(i),h=Oe(i,"modelValue",[],T=>c(vn(T)),T=>{var L;const F=u(T);return i.multiple?F:(L=F[0])!=null?L:null}),d=$h(),f=k(()=>h.value.map(T=>l.value.find(F=>i.valueComparator(F.value,T.value))||T)),g=k(()=>f.value.map(T=>T.props.value)),m=Re(!1);let _="",p;const v=k(()=>i.hideSelected?l.value.filter(T=>!f.value.some(F=>F===T)):l.value),y=X();function x(T){i.openOnClear&&(a.value=!0)}function E(){i.hideNoData&&!l.value.length||i.readonly||(d==null?void 0:d.isReadonly.value)||(a.value=!a.value)}function S(T){var b,M,R,N;if(i.readonly||(d==null?void 0:d.isReadonly.value))return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(T.key)&&T.preventDefault(),["Enter","ArrowDown"," "].includes(T.key)&&(a.value=!0),["Escape","Tab"].includes(T.key)&&(a.value=!1),T.key==="ArrowDown"?(b=y.value)==null||b.focus("next"):T.key==="ArrowUp"?(M=y.value)==null||M.focus("prev"):T.key==="Home"?(R=y.value)==null||R.focus("first"):T.key==="End"&&((N=y.value)==null||N.focus("last"));const F=1e3;function L(B){const K=B.key.length===1,A=!B.ctrlKey&&!B.metaKey&&!B.altKey;return K&&A}if(i.multiple||!L(T))return;const V=performance.now();V-p>F&&(_=""),_+=T.key.toLowerCase(),p=V;const G=l.value.find(B=>B.title.toLowerCase().startsWith(_));G!==void 0&&(h.value=[G])}function w(T){if(i.multiple){const F=g.value.findIndex(L=>i.valueComparator(L,T.value));if(F===-1)h.value=[...h.value,T];else{const L=[...h.value];L.splice(F,1),h.value=L}}else h.value=[T],a.value=!1}function P(T){var F;(F=y.value)!=null&&F.$el.contains(T.relatedTarget)||(a.value=!1)}function O(){var T;m.value&&((T=s.value)==null||T.focus())}function D(T){m.value=!0}return ye(()=>{const T=!!(i.chips||t.chip),F=!!(!i.hideNoData||v.value.length||t.prepend||t.append||t["no-data"]),L=h.value.length>0,[V]=kc.filterProps(i),G=L||!m.value&&i.label&&!i.persistentPlaceholder?void 0:i.placeholder;return C(kc,ce({ref:s},V,{modelValue:h.value.map(b=>b.props.value).join(", "),"onUpdate:modelValue":b=>{b==null&&(h.value=[])},focused:m.value,"onUpdate:focused":b=>m.value=b,validationValue:h.externalValue,dirty:L,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!i.chips,[`v-select--${i.multiple?"multiple":"single"}`]:!0,"v-select--selected":h.value.length,"v-select--selection-slot":!!t.selection},i.class],style:i.style,readonly:!0,placeholder:G,"onClick:clear":x,"onMousedown:control":E,onBlur:P,onKeydown:S}),{...t,default:()=>C(Ee,null,[C(Iv,ce({ref:r,modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,activator:"parent",contentClass:"v-select__content",eager:i.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:i.transition,onAfterLeave:O},i.menuProps),{default:()=>[F&&C(Rv,{ref:y,selected:g.value,selectStrategy:i.multiple?"independent":"single-independent",onMousedown:b=>b.preventDefault(),onFocusin:D},{default:()=>{var b,M,R,N;return[!v.value.length&&!i.hideNoData&&((M=(b=t["no-data"])==null?void 0:b.call(t))!=null?M:C(ur,{title:n(i.noDataText)},null)),(R=t["prepend-item"])==null?void 0:R.call(t),v.value.map((B,K)=>{var de,H;const A=ce(B.props,{key:K,onClick:()=>w(B)});return(H=(de=t.item)==null?void 0:de.call(t,{item:B,index:K,props:A}))!=null?H:C(ur,A,{prepend:Q=>{let{isSelected:le}=Q;return C(Ee,null,[i.multiple&&!i.hideSelected?C(qp,{key:B.value,modelValue:le,ripple:!1,tabindex:"-1"},null):void 0,B.props.prependIcon&&C(ut,{icon:B.props.prependIcon},null)])}})}),(N=t["append-item"])==null?void 0:N.call(t)]}})]}),f.value.map((b,M)=>{var B,K;function R(A){A.stopPropagation(),A.preventDefault(),w(b)}const N={"onClick:close":R,onMousedown(A){A.preventDefault(),A.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return C("div",{key:b.value,class:"v-select__selection"},[T?t.chip?C(ct,{key:"chip-defaults",defaults:{VChip:{closable:i.closableChips,size:"small",text:b.title}}},{default:()=>{var A;return[(A=t.chip)==null?void 0:A.call(t,{item:b,index:M,props:N})]}}):C(ev,ce({key:"chip",closable:i.closableChips,size:"small",text:b.title},N),null):(K=(B=t.selection)==null?void 0:B.call(t,{item:b,index:M}))!=null?K:C("span",{class:"v-select__selection-text"},[b.title,i.multiple&&M<f.value.length-1&&C("span",{class:"v-select__selection-comma"},[Zt(",")])])])})]),"append-inner":function(){var N;for(var b=arguments.length,M=new Array(b),R=0;R<b;R++)M[R]=arguments[R];return C(Ee,null,[(N=t["append-inner"])==null?void 0:N.call(t,...M),i.menuIcon?C(ut,{class:"v-select__menu-icon",icon:i.menuIcon},null):void 0])}})}),Gr({isFocused:m,menu:a,select:w},s)}}),Av=J("div",null,[J("div",{class:"text-overline mb-1"},[J("h2",null,"Resumo")])],-1),Lv={key:0,class:"empty"},Fv=J("div",null,"Nenhum ponto ou pol\xEDgono inserido.",-1),Mv=[Fv],Ov={key:1,class:"table-container"},kv=J("thead",null,[J("tr",null,[J("th",{class:"text-center column-id"},"ID"),J("th",{class:"column-population"},"Popula\xE7\xE3o"),J("th",{class:"column-impact"},"Impacto")])],-1),Dv={class:"text-center column-id"},Nv={class:"column-population"},Gv=["onChange","onUpdate:modelValue"],Vv={class:"column-impact"},Bv=["onChange","onUpdate:modelValue"],jv={key:2,style:{"margin-top":"14px"}},Wv={style:{"margin-top":"10px",display:"flex","column-gap":"5px"}},zv=es({__name:"Form",props:{featuresObjectUpdate:{type:En,required:!0},featuresObjectUpdate2:{type:En,required:!0},changed:Boolean},emits:["sendResponse"],setup(i,{emit:e}){const t=i;Gu();let n=X([]),s=X(!0),r=X("Aviso"),o=X("Par\xE2metros inv\xE1lidos ou sem pontos inseridos"),a=X([]),l=X(),c=X(),u=["MCLP","P-Medianas"];function h(){return n.value.length>0}function d(p){if(p instanceof In)return p.getInteriorPoint().getCoordinates();if(p instanceof xh)return p.getCenter();if(p instanceof At)return p.getCoordinates()}const f=new Uo({dataProjection:"EPSG:4326"});function g(p,v,y){t.featuresObjectUpdate.getFeatures()[v].set(p,y),n.value=t.featuresObjectUpdate.getFeatures().map(x=>({id:x.get("id"),pop:x.get("pop"),impacto:x.get("impacto")})),n.value.sort((x,E)=>x.id-E.id)}function m(p){var v=p.getFeatures(),y=[],x=[];v.forEach(function(P){var O=d(P.getGeometry());y.push(O),x.push({id:P.get("id"),pop:P.get("pop"),impacto:P.get("impacto")})});var E=new Dr(y);let S=new it(E);var w=S.getProperties();return w.novoCampo=x,S.setProperties(w),S}ue(()=>t.changed,p=>{n.value=t.featuresObjectUpdate.getFeatures().map(y=>({id:y.get("id"),pop:y.get("pop"),impacto:y.get("impacto")})),n.value.sort((y,x)=>y.id-x.id);const v=n.value.length;a.value=Array.from({length:v},(y,x)=>x+1),console.log(v)});function _(){if(!h()){s.value=!s.value;return}if(l.value===void 0){s.value=!s.value,o.value="Escolha uma quantidade de pontos";return}if(c.value===void 0){s.value=!s.value,o.value="Escolha um modelo para o c\xE1lculo";return}var p=m(t.featuresObjectUpdate),v=m(t.featuresObjectUpdate2),y=f.writeFeaturesObject([p,v]);y.features[1].properties={p:l.value},console.log(y),c.value=="MCLP"?Mc.post("https://alocasensoresplatformapinew-upfpc35ezq-rj.a.run.app/maxcover",y).then(x=>{console.log(x.data),e("sendResponse",x)}).catch(x=>{console.error(x)}):Mc.post("https://alocasensoresplatformapinew-upfpc35ezq-rj.a.run.app/medianas",y).then(x=>{console.log(x.data),e("sendResponse",x)}).catch(x=>{console.error(x)})}return(p,v)=>{const y=Hd("v-simple-table");return _e(),Ze(Ee,null,[C(Ca,{class:"mx-auto",variant:"outlined"},{default:se(()=>[C(_u,null,{default:se(()=>[Av,h()?Mi("",!0):(_e(),Ze("div",Lv,Mv)),h()?(_e(),Ze("div",Ov,[C(y,{class:"elevation-1 custom-table"},{default:se(()=>[kv,J("tbody",null,[(_e(!0),Ze(Ee,null,Ai(He(n),(x,E)=>(_e(),Ze("tr",{key:x.id},[J("td",Dv,mn(x.id),1),J("td",Nv,[$e(J("input",{onChange:S=>g("pop",E,x.pop),"onUpdate:modelValue":S=>x.pop=S,type:"number",class:"custom-input"},null,40,Gv),[[Ol,x.pop]])]),J("td",Vv,[$e(J("input",{onChange:S=>g("impacto",E,x.impacto),"onUpdate:modelValue":S=>x.impacto=S,type:"number",class:"custom-input"},null,40,Bv),[[Ol,x.impacto]])])]))),128))])]),_:1})])):Mi("",!0),h()?(_e(),Ze("div",jv,[C(Ao,null,{default:se(()=>[C($n,{cols:"6"},{default:se(()=>[C(Nc,{dense:"",outlined:"",items:He(a),modelValue:He(l),"onUpdate:modelValue":v[0]||(v[0]=x=>kl(l)?l.value=x:l=x),label:"Pontos de aloca\xE7\xE3o"},null,8,["items","modelValue"])]),_:1}),C($n,{cols:"6"},{default:se(()=>[C(Nc,{dense:"",outlined:"",modelValue:He(c),"onUpdate:modelValue":v[1]||(v[1]=x=>kl(c)?c.value=x:c=x),items:He(u),label:"Modelo para c\xE1lculo"},null,8,["modelValue","items"])]),_:1})]),_:1})])):Mi("",!0),J("div",Wv,[C(fn,{onClick:v[2]||(v[2]=x=>_()),variant:"tonal"},{default:se(()=>[Zt("Enviar")]),_:1})])]),_:1})]),_:1}),C(py,{titulo:He(r),mensagem:He(o),open:He(s)},null,8,["titulo","mensagem","open"])],64)}}});const Xv=J("div",{class:"text-overline mb-1"},[J("h2",null,"Ferramentas")],-1),Uv={class:"view"},Yv=J("div",{class:"text-overline mb-1"}," Modo ",-1),Kv={class:"view"},Hv={key:0},Zv=J("div",{class:"text-overline mb-1"},"Selecionar Geometria",-1),$v={class:"opcoes"},qv={key:1},Jv=J("div",{class:"text-overline mb-1"},"Selecionar tipo do ponto",-1),Qv={class:"opcoes"},e0=J("div",{class:"text-overline mb-1"}," Remover ",-1),t0=es({__name:"MenuOptionsMap",emits:["nomeDoEvento1","removerAllEmit","changeView","changePointType"],setup(i,{emit:e}){const t=X([{label:"Polygon",isActive:!0},{label:"Circle",isActive:!1},{label:"Point",isActive:!1}]),n=X([{label:"Inserir",isActive:!0},{label:"Edi\xE7\xE3o",isActive:!1},{label:"Remover",isActive:!1}]),s=X([{label:"Demanda",isActive:!0},{label:"Aloca\xE7\xE3o",isActive:!1}]),r=X([{label:"Sat\xE9lite",isActive:!1},{label:"OSM",isActive:!0}]);function o(c,u){u.forEach((d,f)=>{d.isActive=f===c}),e("nomeDoEvento1",{selectedView:r,selectedMode:n,selectedGeometryOption:t})}function a(c,u){let h;u.forEach((d,f)=>{d.isActive=f===c,f===c&&(h=u[f])}),e("changeView",h)}function l(c,u){let h;u.forEach((d,f)=>{d.isActive=f===c,f===c&&(h=u[f])}),e("changePointType",h)}return(c,u)=>(_e(),Ht(Ca,{class:"mx-auto",variant:"outlined"},{default:se(()=>[C(_u,null,{default:se(()=>[J("div",null,[Xv,J("div",null,[J("div",Uv,[(_e(!0),Ze(Ee,null,Ai(r.value,(h,d)=>(_e(),Ht(fn,{variant:"tonal",onClick:f=>a(d,r.value),key:d,class:vs({active:h.isActive})},{default:se(()=>[Zt(mn(h.label),1)]),_:2},1032,["onClick","class"]))),128))]),J("div",null,[Yv,J("div",Kv,[(_e(!0),Ze(Ee,null,Ai(n.value,(h,d)=>(_e(),Ht(fn,{onClick:f=>o(d,n.value),class:vs({active:h.isActive}),variant:"tonal"},{default:se(()=>[Zt(mn(h.label),1)]),_:2},1032,["onClick","class"]))),256))])]),n.value[0].isActive?(_e(),Ze("div",Hv,[Zv,J("div",$v,[(_e(!0),Ze(Ee,null,Ai(t.value,(h,d)=>(_e(),Ht(fn,{variant:"tonal",onClick:f=>o(d,t.value),key:d,class:vs({active:h.isActive})},{default:se(()=>[Zt(mn(h.label),1)]),_:2},1032,["onClick","class"]))),128))])])):Mi("",!0),n.value[0].isActive?(_e(),Ze("div",qv,[Jv,J("div",Qv,[(_e(!0),Ze(Ee,null,Ai(s.value,(h,d)=>(_e(),Ht(fn,{variant:"tonal",onClick:f=>l(d,s.value),key:d,class:vs({active:h.isActive})},{default:se(()=>[Zt(mn(h.label),1)]),_:2},1032,["onClick","class"]))),128))])])):Mi("",!0),J("div",null,[e0,J("div",null,[C(fn,{onClick:u[0]||(u[0]=h=>e("removerAllEmit")),variant:"tonal"},{default:se(()=>[Zt(" Remover Todos ")]),_:1})])])])])]),_:1})]),_:1}))}});class hl{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=We(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new hl({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return z()}getImage(e){return z()}getHitDetectionImage(){return z()}getPixelRatio(e){return 1}getImageState(){return z()}getImageSize(){return z()}getOrigin(){return z()}getSize(){return z()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=We(e)}listenImageChange(e){z()}load(){z()}unlistenImageChange(e){z()}}const gd=hl;function dt(i){return Array.isArray(i)?gh(i):i}const As="ol-hidden",Ur="ol-unselectable",dl="ol-control",Gc="ol-collapsed",n0=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Vc=["style","variant","weight","size","lineHeight","family"],md=function(i){const e=i.match(n0);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=Vc.length;n<s;++n){const r=e[n+1];r!==void 0&&(t[Vc[n]]=r)}return t.families=t.family.split(/,\s?/),t},_d="10px sans-serif",Ft="#000",hr="round",Ui=[],Yi=0,mi="round",Ki=10,Hi="#000",Zi="center",dr="middle",yn=[0,0,0,0],$i=1,Rt=new yt;let Hn=null,ea;const ta={},i0=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10\uF013";let r,o;function a(c,u,h){let d=!0;for(let f=0;f<n;++f){const g=t[f];if(o=fr(c+" "+u+" "+e+g,s),h!=g){const m=fr(c+" "+u+" "+e+h+","+g,s);d=d&&m!=o}}return!!d}function l(){let c=!0;const u=Rt.getKeys();for(let h=0,d=u.length;h<d;++h){const f=u[h];Rt.get(f)<100&&(a.apply(this,f.split(`
`))?(pi(ta),Hn=null,ea=void 0,Rt.set(f,100)):(Rt.set(f,Rt.get(f)+1,!0),c=!1))}c&&(clearInterval(r),r=void 0)}return function(c){const u=md(c);if(!u)return;const h=u.families;for(let d=0,f=h.length;d<f;++d){const g=h[d],m=u.style+`
`+u.weight+`
`+g;Rt.get(m)===void 0&&(Rt.set(m,100,!0),a(u.style,u.weight,g)||(Rt.set(m,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),s0=function(){let i;return function(e){let t=ta[e];if(t==null){if(Aa){const n=md(e),s=yd(e,"\u017Dg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);ta[e]=t}return t}}();function yd(i,e){return Hn||(Hn=ke(1,1)),i!=ea&&(Hn.font=i,ea=Hn.font),Hn.measureText(e)}function fr(i,e){return yd(i,e).width}function Bc(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,r)=>Math.max(s,fr(i,r)),0);return t[e]=n,n}function r0(i,e){const t=[],n=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const d=e[c+1]||i.font,f=fr(d,h);t.push(f),o+=f;const g=s0(d);n.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:t,heights:n,lineWidths:s}}function o0(i,e,t,n,s,r,o,a,l,c,u){i.save(),t!==1&&(i.globalAlpha*=t),e&&i.setTransform.apply(i,e),n.contextInstructions?(i.translate(l,c),i.scale(u[0],u[1]),a0(n,i)):u[0]<0||u[1]<0?(i.translate(l,c),i.scale(u[0],u[1]),i.drawImage(n,s,r,o,a,0,0,o,a)):i.drawImage(n,s,r,o,a,l,c,o*u[0],a*u[1]),i.restore()}function a0(i,e){const t=i.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class fl extends gd{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new fl({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const n=this.renderOptions_,s=ke(n.size*e,n.size*e);this.draw_(n,s,e),t=s.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return pe.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const S=s;s=r,r=S}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),u=s-c,h=Math.sqrt(l*l+u*u),d=h/l;if(e==="miter"&&d<=n)return d*t;const f=t/2/d,g=t/2*(u/h),_=Math.sqrt((s+f)*(s+f)+g*g)-s;if(this.radius2_===void 0||e==="bevel")return _*2;const p=s*Math.sin(a),v=Math.sqrt(s*s-p*p),y=r-v,E=Math.sqrt(p*p+y*y)/p;if(E<=n){const S=E*t/2-r-s;return 2*Math.max(_,S)}return _*2}createRenderOptions(){let e=mi,t=0,n=null,s=0,r,o=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=Hi),r=dt(r),o=this.stroke_.getWidth(),o===void 0&&(o=$i),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=mi),t=this.stroke_.getMiterLimit(),t===void 0&&(t=Ki));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+a);return{strokeStyle:r,strokeWidth:o,size:c,lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Ft),t.fillStyle=dt(s),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),n=0;if(typeof t=="string"&&(t=tr(t)),t===null?n=1:Array.isArray(t)&&(n=t.length===4?t[3]:1),n===0){const s=ke(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=r+a*o,c=a%2===0?n:s;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ft,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const pd=fl;class gl extends pd{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new gl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const ml=gl;class _l{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new _l({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const tn=_l;class l0{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,n){const s=jc(e,t,n);return s in this.cache_?this.cache_[s]:null}set(e,t,n,s){const r=jc(e,t,n);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function jc(i,e,t){const n=t?fh(t):"null";return e+":"+i+":"+n}const gr=new l0;let Pi=null;class c0 extends Ir{constructor(e,t,n,s,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===pe.LOADED){Pi||(Pi=ke(1,1,void 0,{willReadFrequently:!0})),Pi.drawImage(this.image_,0,0);try{Pi.getImageData(0,0,1,1),this.tainted_=!1}catch{Pi=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Y.CHANGE)}handleImageError_(){this.imageState_=pe.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=pe.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=ke(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===pe.IDLE){this.image_||this.initializeImage_(),this.imageState_=pe.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Au(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==pe.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const s=n.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=fh(this.color_),s.fillRect(0,0,n.width/e,n.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function u0(i,e,t,n,s,r){let o=gr.get(e,n,r);return o||(o=new c0(i,e,t,n,s,r),gr.set(e,n,r,o)),o}class yl extends gd{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;$(!(a!==void 0&&o),4),$(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||U(o)),$(a!==void 0&&a.length>0,6),$(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const l=e.src!==void 0?pe.IDLE:pe.LOADED;if(this.color_=e.color!==void 0?tr(e.color):null,this.iconImage_=u0(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.width_=e.width,this.height_=e.height,this.width_!==void 0||this.height_!==void 0){const c=this.getImage(1),u=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};c.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):c.addEventListener("load",u)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(this.width_!==void 0||this.height_!==void 0)&&(e=void 0),new yl({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,t){const n=this.getImage(1);e!==void 0&&t!==void 0?super.setScale([e/n.width,t/n.height]):e!==void 0?super.setScale([e/n.width,e/n.width]):t!==void 0?super.setScale([t/n.height,t/n.height]):super.setScale([1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const t=this.getImage(1);if(t){const n=Array.isArray(e)?e[0]:e;n!==void 0&&(this.width_=n*t.width);const s=Array.isArray(e)?e[1]:e;s!==void 0&&(this.height_=s*t.height)}}listenImageChange(e){this.iconImage_.addEventListener(Y.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Y.CHANGE,e)}}const vd=yl;class pl{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new pl({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const nn=pl;class Jt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Wc,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Jt({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Wc,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function h0(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:($(typeof i.getZIndex=="function",41),t=[i]),e=function(){return t}}return e}let _o=null;function d0(i,e){if(!_o){const t=new tn({color:"rgba(255,255,255,0.4)"}),n=new nn({color:"#3399CC",width:1.25});_o=[new Jt({image:new ml({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return _o}function vl(){const i={},e=[255,255,255,1],t=[0,153,255,1],n=3;return i.Polygon=[new Jt({fill:new tn({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Jt({stroke:new nn({color:e,width:n+2})}),new Jt({stroke:new nn({color:t,width:n})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Jt({image:new ml({radius:n*2,fill:new tn({color:t}),stroke:new nn({color:e,width:n/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function Wc(i){return i.getGeometry()}const ri=Jt,f0="#333";class xl{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=We(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new tn({color:f0}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new xl({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=We(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const g0=xl;class m0 extends ba{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){z()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;rn(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),ja(s,n)}forEachFeatureAtCoordinate(e,t,n,s,r,o,a,l){let c;const u=t.viewState;function h(x,E,S,w){return r.call(o,E,x?S:null,w)}const d=u.projection,f=Mu(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&s){const x=d.getExtent(),E=ae(x);g.push([-E,0],[E,0])}const m=t.layerStatesArray,_=m.length,p=[],v=[];for(let x=0;x<g.length;x++)for(let E=_-1;E>=0;--E){const S=m[E],w=S.layer;if(w.hasRenderer()&&Qa(S,u)&&a.call(l,w)){const P=w.getRenderer(),O=w.getSource();if(P&&O){const D=O.getWrapX()?f:e,T=h.bind(null,S.managed);v[0]=D[0]+g[x][0],v[1]=D[1]+g[x][1],c=P.forEachFeatureAtCoordinate(v,t,n,T,p)}if(c)return c}}if(p.length===0)return;const y=1/p.length;return p.forEach((x,E)=>x.distanceSq+=E*y),p.sort((x,E)=>x.distanceSq-E.distanceSq),p.some(x=>c=x.callback(x.feature,x.layer,x.geometry)),c}hasFeatureAtCoordinate(e,t,n,s,r,o){return this.forEachFeatureAtCoordinate(e,t,n,s,Ot,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(e){z()}scheduleExpireIconCache(e){gr.canExpireCache()&&e.postRenderFunctions.push(_0)}}function _0(i,e){gr.expire()}const y0=m0;class p0 extends y0{constructor(e){super(e),this.fontChangeListenerKey_=Z(Rt,di.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Ur+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new dh(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){re(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(en.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=e.viewState;this.children_.length=0;const s=[];let r=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!Qa(l,n)||u!="ready"&&u!="undefined"){c.unrender();continue}const h=c.render(e,r);!h||(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in c&&s.push(c))}for(let o=s.length-1;o>=0;--o)s[o].renderDeclutter(e);Yf(this.element_,this.children_),this.dispatchRenderEvent(en.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}const v0=p0;class Kt extends Qe{constructor(e,t){super(e),this.layer=t}}const yo={LAYERS:"layers"};class Cl extends rh{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(yo.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new ze(n.slice(),{unique:!0}):$(typeof n.getArray=="function",43):n=new ze(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(re),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Z(e,fe.ADD,this.handleLayersAdd_,this),Z(e,fe.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(re);pi(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const r=t[n];this.registerLayerListeners_(r),this.dispatchEvent(new Kt("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[Z(e,di.PROPERTYCHANGE,this.handleLayerChange_,this),Z(e,Y.CHANGE,this.handleLayerChange_,this)];e instanceof Cl&&t.push(Z(e,"addlayer",this.handleLayerGroupAdd_,this),Z(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[U(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Kt("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Kt("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Kt("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=U(t);this.listenerKeys_[n].forEach(re),delete this.listenerKeys_[n],this.dispatchEvent(new Kt("removelayer",t)),this.changed()}getLayers(){return this.get(yo.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new Kt("removelayer",n[s]))}this.set(yo.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=ki(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return t}getSourceState(){return"ready"}}const _i=Cl;class x0 extends Qe{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}const Zn=x0;class C0 extends Zn{constructor(e,t,n,s,r,o){super(e,t,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Tt=C0,q={SINGLECLICK:"singleclick",CLICK:Y.CLICK,DBLCLICK:Y.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},na={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class E0 extends Ir{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Z(n,na.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Z(n,na.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Y.TOUCHMOVE,this.boundHandleTouchMove_,Pu?{passive:!1}:!1)}emulateClick_(e){let t=new Tt(q.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Tt(q.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Tt(q.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==q.POINTERUP||t.type==q.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==q.POINTERDOWN||t.type==q.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Tt(q.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(re),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Tt(q.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Z(n,q.POINTERMOVE,this.handlePointerMove_,this),Z(n,q.POINTERUP,this.handlePointerUp_,this),Z(this.element_,q.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Z(this.element_.getRootNode(),q.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Tt(q.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Tt(q.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(re(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Y.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(re(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(re),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const S0=E0,Yt={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ie={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class w0 extends yt{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){ko(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&ko(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)re(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ci&&this.listenerKeys.push(Z(e,Yt.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const El=w0;class R0 extends El{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Y.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Ur+" "+dl+(this.collapsed_&&this.collapsible_?" "+Gc:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(e)))),n=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Nt(t,this.renderedAttributions_)){Uf(this.ulElement_);for(let s=0,r=t.length;s<r;++s){const o=document.createElement("li");o.innerHTML=t[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Gc),this.collapsed_?Wl(this.collapseLabel_,this.label_):Wl(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const T0=R0;class I0 extends El{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"\u21E7",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(Y.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Ur+" "+dl,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(As)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:vi}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(As);!r&&n===0?this.element.classList.add(As):r&&n!==0&&this.element.classList.remove(As)}this.label_.style.transform=s}this.rotation_=n}}const b0=I0;class P0 extends El{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(Y.CLICK,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Y.CLICK,this.handleClick_.bind(this,-n),!1);const d=t+" "+Ur+" "+dl,f=this.element;f.className=d,f.appendChild(u),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:vi})):n.setZoom(r)}}}const A0=P0;function L0(i){i=i||{};const e=new ze;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new A0(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new b0(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new T0(i.attributionOptions)),e}const ia={ACTIVE:"active"};class F0 extends yt{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ia.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(ia.ACTIVE,e)}setMap(e){this.map_=e}}function M0(i,e,t){const n=i.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:Gf,center:i.getConstrainedCenter(s)})}}function Sl(i,e,t,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+e),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:vi})}const Ci=F0;class O0 extends Ci{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==q.DBLCLICK){const n=e.originalEvent,s=e.map,r=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();Sl(a,o,r,this.duration_),n.preventDefault(),t=!0}return!t}}const k0=O0;class D0 extends Ci{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==q.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==q.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==q.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==q.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function wl(i){const e=i.length;let t=0,n=0;for(let s=0;s<e;s++)t+=i[s].clientX,n+=i[s].clientY;return{clientX:t/e,clientY:n/e}}const ln=D0;function sa(i){const e=arguments;return function(t){let n=!0;for(let s=0,r=e.length;s<r&&(n=n&&e[s](t),!!n);++s);return n}}const N0=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},G0=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},V0=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},xd=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?V0(i):!0},mr=Ot,Cd=function(i){const e=i.originalEvent;return e.button==0&&!(Wf&&zf&&e.ctrlKey)},ra=On,Ed=function(i){return i.type==q.SINGLECLICK},Rl=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Tl=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Sd=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},po=function(i){const e=i.originalEvent;return $(e!==void 0,56),e.pointerType=="mouse"},wd=function(i){const e=i.originalEvent;return $(e!==void 0,56),e.isPrimary&&e.button===0};class B0 extends ln{constructor(e){super({stopDown:On}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:sa(Rl,wd);this.condition_=e.onFocusOnly?sa(xd,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(wl(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();ug(r,a.getResolution()),Fa(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:vi})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const j0=B0;class W0 extends ln{constructor(e){e=e||{},super({stopDown:On}),this.condition_=e.condition?e.condition:G0,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!po(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Ka)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return po(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return po(e)&&Cd(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const z0=W0;class X0 extends ba{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new In([s])}getGeometry(){return this.geometry_}}const U0=X0,Ls={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class vo extends Qe{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class Y0 extends ln{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new U0(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Cd,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],r=n[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new vo(Ls.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new vo(t?Ls.BOXEND:Ls.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new vo(Ls.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}const K0=Y0;class H0 extends K0{constructor(e){e=e||{};const t=e.condition?e.condition:Tl;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:vi})}}const Z0=H0,hn={LEFT:37,UP:38,RIGHT:39,DOWN:40};class $0 extends Ci{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Rl(t)&&Sd(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Y.KEYDOWN){const n=e.originalEvent,s=n.keyCode;if(this.condition_(e)&&(s==hn.DOWN||s==hn.LEFT||s==hn.RIGHT||s==hn.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==hn.DOWN?c=-a:s==hn.LEFT?l=-a:s==hn.RIGHT?l=a:c=a;const u=[l,c];Fa(u,o.getRotation()),M0(o,u,this.duration_),n.preventDefault(),t=!0}}return!t}}const q0=$0;class J0 extends Ci{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:Sd,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Y.KEYDOWN||e.type==Y.KEYPRESS){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==="+"||s==="-")){const r=e.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();Sl(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}const Q0=J0;class ex{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const tx=ex;class nx extends Ci{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:mr;this.condition_=e.onFocusOnly?sa(xd,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Y.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==Y.WHEEL&&(r=s.deltaY,Bf&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=bu),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-ge(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Sl(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const ix=nx;class sx extends ln{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=On),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==Ka&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(wl(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const rx=sx;class ox extends ln{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=On),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(wl(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const ax=ox;function lx(i){i=i||{};const e=new ze,t=new tx(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new z0),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new k0({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new j0({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new rx),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new ax({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new q0),e.push(new Q0({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new ix({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new Z0({duration:i.zoomDuration})),e}function Rd(i){if(i instanceof kr){i.setMapInternal(null);return}i instanceof _i&&i.getLayers().forEach(Rd)}function Td(i,e){if(i instanceof kr){i.setMapInternal(e);return}if(i instanceof _i){const t=i.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)Td(t[n],e)}}class cx extends yt{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=ux(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:bu,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=mt(),this.pixelToCoordinateTransform_=mt(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||L0(),this.interactions=t.interactions||lx({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new __(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ie.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ie.VIEW,this.handleViewChanged_),this.addChangeListener(Ie.SIZE,this.handleSizeChanged_),this.addChangeListener(Ie.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof at)&&e.view.then(function(s){n.setView(new at(s))}),this.controls.addEventListener(fe.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(fe.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(fe.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(fe.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(fe.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(fe.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Td(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:Ot,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof _i?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Ot,r=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(Ie.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return hi(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ce(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ie.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof ze){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=oe(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ce(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ie.SIZE)}getView(){return this.get(Ie.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return y_(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new Tt(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===na.POINTERDOWN||n===Y.WHEEL||n===Y.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[be.ANIMATING]||o[be.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(en.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(en.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Zn(Yt.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Zn(Yt.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let s=0,r=n.length;s<r;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)re(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Y.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Y.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ko(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new v0(this)),this.mapBrowserEventHandler_=new S0(this,this.moveTolerance_);for(const r in q)this.mapBrowserEventHandler_.addEventListener(q[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Y.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Y.WHEEL,this.boundHandleBrowserEvent_,Pu?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Z(n,Y.KEYDOWN,this.handleBrowserEvent,this),Z(n,Y.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(re(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(re(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Z(e,di.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Z(e,Y.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(re),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Kt("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Z(e,di.PROPERTYCHANGE,this.render,this),Z(e,Y.CHANGE,this.render,this),Z(e,"addlayer",this.handleLayerAdd_,this),Z(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Rd(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(t!==void 0&&tc(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Mo(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:U(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=Mo(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Ia(this.previousExtent_)&&!Vi(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Zn(Yt.MOVESTART,this,s)),this.previousExtent_=rs(this.previousExtent_)),this.previousExtent_&&!r.viewHints[be.ANIMATING]&&!r.viewHints[be.INTERACTING]&&!Vi(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Zn(Yt.MOVEEND,this,r)),Cu(r.extent,this.previousExtent_))),this.dispatchEvent(new Zn(Yt.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(Yt.LOADSTART)||this.hasListener(Yt.LOADEND)||this.hasListener(en.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Kt("removelayer",t)),this.set(Ie.LAYERGROUP,e)}setSize(e){this.set(Ie.SIZE,e)}setTarget(e){this.set(Ie.TARGET,e)}setView(e){if(!e||e instanceof at){this.set(Ie.VIEW,e);return}this.set(Ie.VIEW,new at);const t=this;e.then(function(n){t.setView(new at(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(t=[r,o],!tc(t)&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&ku("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Nt(t,n))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(t=[parseInt(n.width,10),parseInt(n.height,10)]),e.setViewportSize(t)}}}function ux(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new _i({layers:i.layers});t[Ie.LAYERGROUP]=n,t[Ie.TARGET]=i.target,t[Ie.VIEW]=i.view instanceof at?i.view:new at;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new ze(i.controls.slice()):($(typeof i.controls.getArray=="function",47),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new ze(i.interactions.slice()):($(typeof i.interactions.getArray=="function",48),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new ze(i.overlays.slice()):($(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new ze,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}const hx=cx;function zc(i){return new ri({fill:qi(i,""),stroke:Ji(i,""),text:dx(i),image:fx(i)})}function qi(i,e){const t=i[e+"fill-color"];if(!!t)return new tn({color:t})}function Ji(i,e){const t=i[e+"stroke-width"],n=i[e+"stroke-color"];if(!(!t&&!n))return new nn({width:t,color:n,lineCap:i[e+"stroke-line-cap"],lineJoin:i[e+"stroke-line-join"],lineDash:i[e+"stroke-line-dash"],lineDashOffset:i[e+"stroke-line-dash-offset"],miterLimit:i[e+"stroke-miter-limit"]})}function dx(i){const e=i["text-value"];return e?new g0({text:e,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],repeat:i["text-repeat"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:qi(i,"text-"),backgroundFill:qi(i,"text-background-"),stroke:Ji(i,"text-"),backgroundStroke:Ji(i,"text-background-")}):void 0}function fx(i){const e=i["icon-src"],t=i["icon-img"];if(e||t)return new vd({src:e,img:t,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const n=i["shape-points"];if(n){const r="shape-";return new pd({points:n,fill:qi(i,r),stroke:Ji(i,r),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const s=i["circle-radius"];if(s){const r="circle-";return new ml({radius:s,fill:qi(i,r),stroke:Ji(i,r),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const Xc={RENDER_ORDER:"renderOrder"};class gx extends kr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Xc.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new ih(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Xc.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=d0;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof ri)t=e;else if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r){const o=e[r];o instanceof ri?s[r]=o:s[r]=zc(o)}t=s}else t=zc(e);this.style_=t,this.styleFunction_=e===null?void 0:h0(this.style_),this.changed()}}const mx=gx,cs={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Fs=[cs.FILL],Qt=[cs.STROKE],pn=[cs.BEGIN_PATH],Uc=[cs.CLOSE_PATH],W=cs;class _x{drawCustom(e,t,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Id=_x;class yx extends Id{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=t)s[0]=e[a],s[1]=e[a+1],Sr(n,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,n,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=s);let u=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,g,m,_;for(g=t+s;g<n;g+=s)d[0]=e[g],d[1]=e[g+1],_=Lo(c,d),_!==m?(f&&(a[l++]=u,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):_===xe.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,u=d[0],h=d[1],m=_;return(r&&f||g===t+s)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,t,n,s,r){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(e,t,l,s,!1,!1);r.push(c),t=l}return t}drawCustom(e,t,n,s){this.beginGeometry(e,t);const r=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,h,d;switch(r){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),h=[];const f=e.getEndss();d=0;for(let g=0,m=f.length;g<m;++g){const _=[];d=this.drawCustomCoordinates_(l,d,f[g],o,_),h.push(_)}this.instructions.push([W.CUSTOM,a,h,e,n,Vo]),this.hitDetectionInstructions.push([W.CUSTOM,a,h,e,s||n,Vo]);break;case"Polygon":case"MultiLineString":u=[],l=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([W.CUSTOM,a,u,e,n,Wi]),this.hitDetectionInstructions.push([W.CUSTOM,a,u,e,s||n,Wi]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([W.CUSTOM,a,c,e,n,qt]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,s||n,qt]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([W.CUSTOM,a,c,e,n,qt]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,s||n,qt]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([W.CUSTOM,a,c,e,n]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,s||n]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[W.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[W.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,r,o=-1;for(t=0;t<n;++t)s=e[t],r=s[0],r==W.END_GEOMETRY?o=t:r==W.BEGIN_GEOMETRY&&(s[2]=t,Ff(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillStyle=dt(s||Ft)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=dt(s||Hi);const r=t.getLineCap();n.lineCap=r!==void 0?r:hr;const o=t.getLineDash();n.lineDash=o?o.slice():Ui;const a=t.getLineDashOffset();n.lineDashOffset=a||Yi;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:mi;const c=t.getWidth();n.lineWidth=c!==void 0?c:$i;const u=t.getMiterLimit();n.miterLimit=u!==void 0?u:Ki,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[W.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(!0),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[W.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||r!=e.currentLineDash&&!Nt(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[W.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Cu(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;ss(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const us=yx;class px extends us{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([W.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([W.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const vx=px;class xx extends us{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),a=[W.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ui,Yi],pn);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Qt),this.endGeometry(t)}drawMultiLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],pn);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Qt),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Qt),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Qt),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(pn)}}const Cx=xx;class Ex extends us{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=n.length;this.instructions.push(pn),this.hitDetectionInstructions.push(pn);for(let c=0;c<l;++c){const u=n[c],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,u,s,!0,!a),f=[W.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(Uc),this.hitDetectionInstructions.push(Uc)),t=u}return o&&(this.instructions.push(Fs),this.hitDetectionInstructions.push(Fs)),a&&(this.instructions.push(Qt),this.hitDetectionInstructions.push(Qt)),t}drawCircle(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ft]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[W.CIRCLE,l];this.instructions.push(pn,c),this.hitDetectionInstructions.push(pn,c),n.fillStyle!==void 0&&(this.instructions.push(Fs),this.hitDetectionInstructions.push(Fs)),n.strokeStyle!==void 0&&(this.instructions.push(Qt),this.hitDetectionInstructions.push(Qt)),this.endGeometry(t)}drawPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ft]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ft]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=dn(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const Yc=Ex;function Sx(i,e,t,n,s){const r=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+s<n;){const[c,u]=l.slice(-2),h=e[o+s],d=e[o+s+1],f=Math.sqrt((h-c)*(h-c)+(d-u)*(d-u));if(a+=f,a>=i){const g=(i-a+f)/f,m=je(c,h,g),_=je(u,d,g);l.push(m,_),r.push(l),l=[m,_],a==i&&(o+=s),a=0}else if(a<i)l.push(e[o+s],e[o+s+1]),o+=s;else{const g=f-a,m=je(c,h,g/f),_=je(u,d,g/f);l.push(m,_),r.push(l),l=[m,_],a=0,o+=s}}return a>0&&r.push(l),r}function wx(i,e,t,n,s){let r=t,o=t,a=0,l=0,c=t,u,h,d,f,g,m,_,p,v,y;for(h=t;h<n;h+=s){const x=e[h],E=e[h+1];g!==void 0&&(v=x-g,y=E-m,f=Math.sqrt(v*v+y*y),_!==void 0&&(l+=d,u=Math.acos((_*v+p*y)/(d*f)),u>i&&(l>a&&(a=l,r=c,o=h),l=0,c=h-s)),d=f,_=v,p=y),g=x,m=E}return l+=f,l>a?[c,h]:[r,o]}const Di={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Rx extends us{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Pe(this.getBufferedMaxExtent(),e.getExtent()))return;let h;if(c=e.getFlatCoordinates(),l=="LineString")h=[c.length];else if(l=="MultiLineString")h=e.getEnds();else if(l=="Polygon")h=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=e.getEndss();h=[];for(let _=0,p=m.length;_<p;++_)h.push(m[_][0])}this.beginGeometry(e,t);const d=r.repeat,f=d?void 0:r.textAlign;let g=0;for(let m=0,_=h.length;m<_;++m){let p;d?p=Sx(d*this.resolution,c,g,h[m],u):p=[c.slice(g,h[m])];for(let v=0,y=p.length;v<y;++v){const x=p[v];let E=0,S=x.length;if(f==null){const P=wx(r.maxAngle,x,0,x.length,2);E=P[0],S=P[1]}for(let P=E;P<S;P+=u)o.push(x[P],x[P+1]);const w=o.length;g=h[m],this.drawChars_(a,w),a=w}}this.endGeometry(t)}else{let h=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),r.overflow||h.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const _=e.getFlatInteriorPoints();c=[];for(let p=0,v=_.length;p<v;p+=3)r.overflow||h.push(_[p+2]/this.resolution),c.push(_[p],_[p+1]);if(c.length===0)return;u=2;break}const d=this.appendFlatPointCoordinates(c,u);if(d===a)return;if(h&&(d-a)/2!==c.length/u){let _=a/2;h=h.filter((p,v)=>{const y=o[(_+v)*2]===c[v*u]&&o[(_+v)*2+1]===c[v*u+1];return y||--_,y})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=r.padding;if(f!=yn&&(r.scale[0]<0||r.scale[1]<0)){let _=r.padding[0],p=r.padding[1],v=r.padding[2],y=r.padding[3];r.scale[0]<0&&(p=-p,y=-y),r.scale[1]<0&&(_=-_,v=-v),f=[_,p,v,y]}const g=this.pixelRatio;this.instructions.push([W.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==yn?yn:f.map(function(_){return _*g}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const m=1/g;this.hitDetectionInstructions.push([W.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,f,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||Zi,justify:t.justify,textBaseline:t.textBaseline||dr,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Di[s.textBaseline],u=this.textOffsetY_*l,h=this.text_,d=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([W.DRAW_CHARS,e,t,c,s.overflow,a,s.maxAngle,l,u,r,d*l,h,o,1]),this.hitDetectionInstructions.push([W.DRAW_CHARS,e,t,c,s.overflow,a,s.maxAngle,1,u,r,d,h,o,1/l])}setTextStyle(e,t){let n,s,r;if(!e)this.text_="";else{const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=dt(o.getColor()||Ft)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),p=a.getMiterLimit();r.lineCap=a.getLineCap()||hr,r.lineDash=g?g.slice():Ui,r.lineDashOffset=m===void 0?Yi:m,r.lineJoin=a.getLineJoin()||mi,r.lineWidth=_===void 0?$i:_,r.miterLimit=p===void 0?Ki:p,r.strokeStyle=dt(a.getColor()||Hi)}n=this.textState_;const l=e.getFont()||_d;i0(l);const c=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||dr,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||yn,n.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:U(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+U(s.fillStyle):""}this.declutterImageWithText_=t}}const Tx={Circle:Yc,Default:us,Image:vx,LineString:Cx,Polygon:Yc,Text:Rx};class Ix{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const r=n[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let r=s[t];if(r===void 0){const o=Tx[t];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r}return r}}const Kc=Ix;function bx(i,e,t,n,s,r,o,a,l,c,u,h){let d=i[e],f=i[e+1],g=0,m=0,_=0,p=0;function v(){g=d,m=f,e+=n,d=i[e],f=i[e+1],p+=_,_=Math.sqrt((d-g)*(d-g)+(f-m)*(f-m))}do v();while(e<t-n&&p+_<r);let y=_===0?0:(r-p)/_;const x=je(g,d,y),E=je(m,f,y),S=e-n,w=p,P=r+a*l(c,s,u);for(;e<t-n&&p+_<P;)v();y=_===0?0:(P-p)/_;const O=je(g,d,y),D=je(m,f,y);let T;if(h){const b=[x,E,O,D];Wa(b,0,4,2,h,b,b),T=b[0]>b[2]}else T=x>O;const F=Math.PI,L=[],V=S+n===e;e=S,_=0,p=w,d=i[e],f=i[e+1];let G;if(V){v(),G=Math.atan2(f-m,d-g),T&&(G+=G>0?-F:F);const b=(O+x)/2,M=(D+E)/2;return L[0]=[b,M,(P-r)/2,G,s],L}s=s.replace(/\n/g," ");for(let b=0,M=s.length;b<M;){v();let R=Math.atan2(f-m,d-g);if(T&&(R+=R>0?-F:F),G!==void 0){let H=R-G;if(H+=H>F?-2*F:H<-F?2*F:0,Math.abs(H)>o)return null}G=R;const N=b;let B=0;for(;b<M;++b){const H=T?M-b-1:b,Q=a*l(c,s[H],u);if(e+n<t&&p+_<r+B+Q/2)break;B+=Q}if(b===N)continue;const K=T?s.substring(M-N,M-b):s.substring(N,b);y=_===0?0:(r+B/2-p)/_;const A=je(g,d,y),de=je(m,f,y);L.push([A,de,B/2,R,K]),r+=B}return L}const Un=Xe(),Xt=[],St=[],wt=[],Ut=[];function Hc(i){return i[3].declutterBox}const Px=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Zc(i,e){return(e==="start"||e==="end")&&!Px.test(i)&&(e=e==="start"?"left":"right"),Di[e]}function Ax(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class Lx{constructor(e,t,n,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=mt(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,n,s){const r=e+t+n+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=Array.isArray(e),d=l.justify?Di[l.justify]:Zc(Array.isArray(e)?e[0]:e,l.textAlign||Zi),f=s&&o.lineWidth?o.lineWidth:0,g=h?e:e.split(`
`).reduce(Ax,[]),{width:m,height:_,widths:p,heights:v,lineWidths:y}=r0(l,g),x=m+f,E=[],S=(x+2)*u[0],w=(_+f)*u[1],P={width:S<0?Math.floor(S):Math.ceil(S),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:E};(u[0]!=1||u[1]!=1)&&E.push("scale",u),s&&(E.push("strokeStyle",o.strokeStyle),E.push("lineWidth",f),E.push("lineCap",o.lineCap),E.push("lineJoin",o.lineJoin),E.push("miterLimit",o.miterLimit),E.push("setLineDash",[o.lineDash]),E.push("lineDashOffset",o.lineDashOffset)),n&&E.push("fillStyle",a.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const O=.5-d;let D=d*x+O*f;const T=[],F=[];let L=0,V=0,G=0,b=0,M;for(let R=0,N=g.length;R<N;R+=2){const B=g[R];if(B===`
`){V+=L,L=0,D=d*x+O*f,++b;continue}const K=g[R+1]||l.font;K!==M&&(s&&T.push("font",K),n&&F.push("font",K),M=K),L=Math.max(L,v[G]);const A=[B,D+O*p[G]+d*(p[G]-y[b]),.5*(f+L)+V];D+=p[G],s&&T.push("strokeText",A),n&&F.push("fillText",A),++G}return Array.prototype.push.apply(E,T),Array.prototype.push.apply(E,F),this.labels_[r]=P,P}replayTextBackground_(e,t,n,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,r,o,a,l,c,u,h,d,f,g,m,_){a*=d[0],l*=d[1];let p=n-a,v=s-l;const y=r+c>e?e-c:r,x=o+u>t?t-u:o,E=g[3]+y*d[0]+g[1],S=g[0]+x*d[1]+g[2],w=p-g[3],P=v-g[0];(m||h!==0)&&(Xt[0]=w,Ut[0]=w,Xt[1]=P,St[1]=P,St[0]=w+E,wt[0]=St[0],wt[1]=P+S,Ut[1]=wt[1]);let O;return h!==0?(O=rn(mt(),n,s,1,1,h,-n,-s),Ce(O,Xt),Ce(O,St),Ce(O,wt),Ce(O,Ut),ot(Math.min(Xt[0],St[0],wt[0],Ut[0]),Math.min(Xt[1],St[1],wt[1],Ut[1]),Math.max(Xt[0],St[0],wt[0],Ut[0]),Math.max(Xt[1],St[1],wt[1],Ut[1]),Un)):ot(Math.min(w,w+E),Math.min(P,P+S),Math.max(w,w+E),Math.max(P,P+S),Un),f&&(p=Math.round(p),v=Math.round(v)),{drawImageX:p,drawImageY:v,drawImageW:y,drawImageH:x,originX:c,originY:u,declutterBox:{minX:Un[0],minY:Un[1],maxX:Un[2],maxY:Un[3],value:_},canvasTransform:O,scale:d}}replayImageOrLabel_(e,t,n,s,r,o,a){const l=!!(o||a),c=s.declutterBox,u=e.canvas,h=a?a[2]*s.scale[0]/2:0;return c.minX-h<=u.width/t&&c.maxX+h>=0&&c.minY-h<=u.height/t&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,Xt,St,wt,Ut,o,a),o0(e,s.canvasTransform,r,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const t=Ce(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const r=this.textStates[t],o=this.createLabel(e,t,s,n),a=this.strokeStates[n],l=this.pixelRatio,c=Zc(Array.isArray(e)?e[0]:e,r.textAlign||Zi),u=Di[r.textBaseline||dr],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*r.scale[0],f=c*d+2*(.5-c)*h,g=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:f,anchorY:g}}execute_(e,t,n,s,r,o,a,l){let c;this.pixelCoordinates_&&Nt(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Cn(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),am(this.renderedTransform_,n));let u=0;const h=s.length;let d=0,f,g,m,_,p,v,y,x,E,S,w,P,O=0,D=0,T=null,F=null;const L=this.coordinateCache_,V=this.viewRotation_,G=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,b={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:V},M=this.instructions!=s||this.overlaps?0:200;let R,N,B,K;for(;u<h;){const A=s[u];switch(A[0]){case W.BEGIN_GEOMETRY:R=A[1],K=A[3],R.getGeometry()?a!==void 0&&!Pe(a,K.getExtent())?u=A[2]+1:++u:u=A[2];break;case W.BEGIN_PATH:O>M&&(this.fill_(e),O=0),D>M&&(e.stroke(),D=0),!O&&!D&&(e.beginPath(),_=NaN,p=NaN),++u;break;case W.CIRCLE:d=A[1];const H=c[d],Q=c[d+1],le=c[d+2],Te=c[d+3],we=le-H,vt=Te-Q,kn=Math.sqrt(we*we+vt*vt);e.moveTo(H+kn,Q),e.arc(H,Q,kn,0,2*Math.PI,!0),++u;break;case W.CLOSE_PATH:e.closePath(),++u;break;case W.CUSTOM:d=A[1],f=A[2];const hs=A[3],Dn=A[4],ds=A.length==6?A[5]:void 0;b.geometry=hs,b.feature=R,u in L||(L[u]=[]);const Gt=L[u];ds?ds(c,d,f,2,Gt):(Gt[0]=c[d],Gt[1]=c[d+1],Gt.length=2),Dn(Gt,b),++u;break;case W.DRAW_IMAGE:d=A[1],f=A[2],x=A[3],g=A[4],m=A[5];let Ei=A[6];const Vt=A[7],fs=A[8],gs=A[9],ms=A[10];let Nn=A[11];const Yr=A[12];let De=A[13];const Ue=A[14],et=A[15];if(!x&&A.length>=20){E=A[19],S=A[20],w=A[21],P=A[22];const Ge=this.drawLabelWithPointPlacement_(E,S,w,P);x=Ge.label,A[3]=x;const Bn=A[23];g=(Ge.anchorX-Bn)*this.pixelRatio,A[4]=g;const Ye=A[24];m=(Ge.anchorY-Ye)*this.pixelRatio,A[5]=m,Ei=x.height,A[6]=Ei,De=x.width,A[13]=De}let xt;A.length>25&&(xt=A[25]);let Gn,cn,Bt;A.length>17?(Gn=A[16],cn=A[17],Bt=A[18]):(Gn=yn,cn=!1,Bt=!1),ms&&G?Nn+=V:!ms&&!G&&(Nn-=V);let Vn=0;for(;d<f;d+=2){if(xt&&xt[Vn++]<De/this.pixelRatio)continue;const Ge=this.calculateImageOrLabelDimensions_(x.width,x.height,c[d],c[d+1],De,Ei,g,m,fs,gs,Nn,Yr,r,Gn,cn||Bt,R),Bn=[e,t,x,Ge,Vt,cn?T:null,Bt?F:null];if(l){if(Ue==="none")continue;if(Ue==="obstacle"){l.insert(Ge.declutterBox);continue}else{let Ye,Ct;if(et){const Ve=f-d;if(!et[Ve]){et[Ve]=Bn;continue}if(Ye=et[Ve],delete et[Ve],Ct=Hc(Ye),l.collides(Ct))continue}if(l.collides(Ge.declutterBox))continue;Ye&&(l.insert(Ct),this.replayImageOrLabel_.apply(this,Ye)),l.insert(Ge.declutterBox)}}this.replayImageOrLabel_.apply(this,Bn)}++u;break;case W.DRAW_CHARS:const _s=A[1],Le=A[2],Kr=A[3],Fd=A[4];P=A[5];const Md=A[6],bl=A[7],Pl=A[8];w=A[9];const Hr=A[10];E=A[11],S=A[12];const Al=[A[13],A[13]],Zr=this.textStates[S],Si=Zr.font,wi=[Zr.scale[0]*bl,Zr.scale[1]*bl];let Ri;Si in this.widths_?Ri=this.widths_[Si]:(Ri={},this.widths_[Si]=Ri);const Ll=vh(c,_s,Le,2),Fl=Math.abs(wi[0])*Bc(Si,E,Ri);if(Fd||Fl<=Ll){const Ge=this.textStates[S].textAlign,Bn=(Ll-Fl)*Di[Ge],Ye=bx(c,_s,Le,2,E,Bn,Md,Math.abs(wi[0]),Bc,Si,Ri,G?0:this.viewRotation_);e:if(Ye){const Ct=[];let Ve,ys,ps,Ne,Ke;if(w)for(Ve=0,ys=Ye.length;Ve<ys;++Ve){Ke=Ye[Ve],ps=Ke[4],Ne=this.createLabel(ps,S,"",w),g=Ke[2]+(wi[0]<0?-Hr:Hr),m=Kr*Ne.height+(.5-Kr)*2*Hr*wi[1]/wi[0]-Pl;const Et=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,Ke[0],Ke[1],Ne.width,Ne.height,g,m,0,0,Ke[3],Al,!1,yn,!1,R);if(l&&l.collides(Et.declutterBox))break e;Ct.push([e,t,Ne,Et,1,null,null])}if(P)for(Ve=0,ys=Ye.length;Ve<ys;++Ve){Ke=Ye[Ve],ps=Ke[4],Ne=this.createLabel(ps,S,P,""),g=Ke[2],m=Kr*Ne.height-Pl;const Et=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,Ke[0],Ke[1],Ne.width,Ne.height,g,m,0,0,Ke[3],Al,!1,yn,!1,R);if(l&&l.collides(Et.declutterBox))break e;Ct.push([e,t,Ne,Et,1,null,null])}l&&l.load(Ct.map(Hc));for(let Et=0,Od=Ct.length;Et<Od;++Et)this.replayImageOrLabel_.apply(this,Ct[Et])}}++u;break;case W.END_GEOMETRY:if(o!==void 0){R=A[1];const Ge=o(R,K);if(Ge)return Ge}++u;break;case W.FILL:M?O++:this.fill_(e),++u;break;case W.MOVE_TO_LINE_TO:for(d=A[1],f=A[2],N=c[d],B=c[d+1],v=N+.5|0,y=B+.5|0,(v!==_||y!==p)&&(e.moveTo(N,B),_=v,p=y),d+=2;d<f;d+=2)N=c[d],B=c[d+1],v=N+.5|0,y=B+.5|0,(d==f-2||v!==_||y!==p)&&(e.lineTo(N,B),_=v,p=y);++u;break;case W.SET_FILL_STYLE:T=A,this.alignFill_=A[2],O&&(this.fill_(e),O=0,D&&(e.stroke(),D=0)),e.fillStyle=A[1],++u;break;case W.SET_STROKE_STYLE:F=A,D&&(e.stroke(),D=0),this.setStrokeStyle_(e,A),++u;break;case W.STROKE:M?D++:e.stroke(),++u;break;default:++u;break}}O&&this.fill_(e),D&&e.stroke()}execute(e,t,n,s,r,o){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,n,s,r){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,s,r)}}const Fx=Lx,xo=["Polygon","Circle","LineString","Image","Text","Default"];class Mx{constructor(e,t,n,s,r,o){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=mt(),this.createExecutors_(r)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e){for(const t in e){let n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);const s=e[t];for(const r in s){const o=s[r];n[r]=new Fx(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,r,o){s=Math.round(s);const a=s*2+1,l=rn(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=ke(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Xe(),Oi(h,e),ss(h,t*(this.renderBuffer_+s),h));const d=Ox(s);let f;function g(E,S){const w=u.getImageData(0,0,a,a).data;for(let P=0,O=d.length;P<O;P++)if(w[d[P]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(E)){const D=(d[P]-3)/4,T=s-D%a,F=s-(D/a|0),L=r(E,S,T*T+F*F);if(L)return L}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Rn);let _,p,v,y,x;for(_=m.length-1;_>=0;--_){const E=m[_].toString();for(v=this.executorsByZIndex_[E],p=xo.length-1;p>=0;--p)if(f=xo[p],y=v[f],y!==void 0&&(x=y.executeHitDetection(u,l,n,g,h),x))return x}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],r=t[2],o=t[3],a=[n,s,n,o,r,o,r,s];return Cn(a,0,8,2,e,a),a}isEmpty(){return ui(this.executorsByZIndex_)}execute(e,t,n,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Rn),this.maxExtent_&&(e.save(),this.clip(e,n)),o=o||xo;let c,u,h,d,f,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(f=this.executorsByZIndex_[m],h=0,d=o.length;h<d;++h){const _=o[h];g=f[_],g!==void 0&&g.execute(e,t,n,s,r,a)}}this.maxExtent_&&e.restore()}}const Co={};function Ox(i){if(Co[i]!==void 0)return Co[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let r=0;r<=i;++r)for(let o=0;o<=i;++o){const a=r*r+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+r)*e+(i+o))*4+3),r>0&&l.push(((i-r)*e+(i+o))*4+3),o>0&&(l.push(((i+r)*e+(i-o))*4+3),r>0&&l.push(((i-r)*e+(i-o))*4+3))}const s=[];for(let r=0,o=n.length;r<o;++r)n[r]&&s.push(...n[r]);return Co[i]=s,s}const $c=Mx;class kx extends Id{constructor(e,t,n,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?Pr(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=mt()}drawImages_(e,t,n,s){if(!this.image_)return;const r=Cn(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=r.length;u<h;u+=2){const d=r[u]-this.imageAnchorX_,f=r[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,m=f+this.imageAnchorY_;rn(a,g,m,1,1,c,-g,-m),o.setTransform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Cn(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=s){const l=r[t]+this.textOffsetX_,c=r[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,n,s,r){const o=this.context_,a=Cn(e,t,n,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),n}drawRings_(e,t,n,s){for(let r=0,o=n.length;r<o;++r)t=this.moveToLineTo_(e,t,n[r],s,!0);return t}drawCircle(e){if(!!Pe(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=gm(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(n*n+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);!n||!Pe(this.extent_,n.getExtent())||(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Pe(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(!!Pe(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Pe(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Pe(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=r.length;a<l;++a){const c=r[a];s=this.drawRings_(n,s,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Nt(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:Zi;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:dt(n||Ft)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=r||Ui;this.strokeState_={lineCap:s!==void 0?s:hr,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Yi)*this.pixelRatio_,lineJoin:a!==void 0?a:mi,lineWidth:(l!==void 0?l:$i)*this.pixelRatio_,miterLimit:c!==void 0?c:Ki,strokeStyle:dt(n||Hi)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:dt(f||Ft)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),g=n.getLineCap(),m=n.getLineDash(),_=n.getLineDashOffset(),p=n.getLineJoin(),v=n.getWidth(),y=n.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:hr,lineDash:m||Ui,lineDashOffset:_||Yi,lineJoin:p!==void 0?p:mi,lineWidth:v!==void 0?v:$i,miterLimit:y!==void 0?y:Ki,strokeStyle:dt(f||Hi)}}const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:s!==void 0?s:_d,textAlign:h!==void 0?h:Zi,textBaseline:d!==void 0?d:dr},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,g,m)=>f+=m%2?" ":g,""):u:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const Dx=kx,lt=.5;function Nx(i,e,t,n,s,r,o){const a=i[0]*lt,l=i[1]*lt,c=ke(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,h=new Dx(c,lt,s,null,o),d=t.length,f=Math.floor((256*256*256-1)/d),g={};for(let _=1;_<=d;++_){const p=t[_-1],v=p.getStyleFunction()||n;if(!n)continue;let y=v(p,r);if(!y)continue;Array.isArray(y)||(y=[y]);const E=(_*f).toString(16).padStart(7,"#00000");for(let S=0,w=y.length;S<w;++S){const P=y[S],O=P.getGeometryFunction()(p);if(!O||!Pe(s,O.getExtent()))continue;const D=P.clone(),T=D.getFill();T&&T.setColor(E);const F=D.getStroke();F&&(F.setColor(E),F.setLineDash(null)),D.setText(void 0);const L=P.getImage();if(L&&L.getOpacity()!==0){const M=L.getImageSize();if(!M)continue;const R=ke(M[0],M[1],void 0,{alpha:!1}),N=R.canvas;R.fillStyle=E,R.fillRect(0,0,N.width,N.height),D.setImage(new vd({img:N,imgSize:M,anchor:L.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}const V=D.getZIndex()||0;let G=g[V];G||(G={},g[V]=G,G.Polygon=[],G.Circle=[],G.LineString=[],G.Point=[]);const b=O.getType();if(b==="GeometryCollection"){const M=O.getGeometriesArrayRecursive();for(let R=0,N=M.length;R<N;++R){const B=M[R];G[B.getType().replace("Multi","")].push(B,D)}}else G[b.replace("Multi","")].push(O,D)}}const m=Object.keys(g).map(Number).sort(Rn);for(let _=0,p=m.length;_<p;++_){const v=g[m[_]];for(const y in v){const x=v[y];for(let E=0,S=x.length;E<S;E+=2){h.setStyle(x[E+1]);for(let w=0,P=e.length;w<P;++w)h.setTransform(e[w]),h.drawGeometry(x[E])}}}return c.getImageData(0,0,u.width,u.height)}function Gx(i,e,t){const n=[];if(t){const s=Math.floor(Math.round(i[0])*lt),r=Math.floor(Math.round(i[1])*lt),o=(ge(s,0,t.width-1)+ge(r,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&n.push(e[u/h-1])}return n}const Vx=.5,bd={Point:Hx,LineString:Ux,Polygon:$x,MultiPoint:Zx,MultiLineString:Yx,MultiPolygon:Kx,GeometryCollection:Xx,Circle:Wx};function Bx(i,e){return parseInt(U(i),10)-parseInt(U(e),10)}function jx(i,e){const t=oa(i,e);return t*t}function oa(i,e){return Vx*i/e}function Wx(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function qc(i,e,t,n,s,r,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();c==pe.LOADED||c==pe.ERROR?l.unlistenImageChange(s):(c==pe.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return zx(i,e,t,n,r,o),a}function zx(i,e,t,n,s,r){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(n,s);if(t.getRenderer())Pd(i,a,t,e);else{const c=bd[a.getType()];c(i,a,t,e,r)}}function Pd(i,e,t,n){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let o=0,a=r.length;o<a;++o)Pd(i,r[o],t,n);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function Xx(i,e,t,n,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=bd[r[o].getType()];l(i,r[o],t,n,s)}}function Ux(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function Yx(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function Kx(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(o||r){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function Hx(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=pe.LOADED)return;let l=i;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(e,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(r,a),c.drawPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,n)}}function Zx(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=pe.LOADED)return;let l=i;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(e,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(r,a),c.drawMultiPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,n)}}function $x(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}class qx extends mh{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Xe(),this.wrappedRenderedExtent_=Xe(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,u=l.getExtent(),h=this.getLayer().getSource(),d=t.pixelRatio,f=t.viewHints,g=!(f[be.ANIMATING]||f[be.INTERACTING]),m=this.compositionContext_,_=Math.round(t.size[0]*d),p=Math.round(t.size[1]*d),v=h.getWrapX()&&l.canWrapX(),y=v?ae(u):null,x=v?Math.ceil((s[2]-u[2])/y)+1:1;let E=v?Math.floor((s[0]-u[0])/y):0;do{const S=this.getRenderTransform(o,a,c,d,_,p,E*y);e.execute(m,1,S,c,g,void 0,n)}while(++E<x)}setupCompositionContext_(){if(this.opacity_!==1){const e=ke(this.context.canvas.width,this.context.canvas.height,_c);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,br(this.compositionContext_),_c.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const n=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];lm(this.pixelTransform,1/n,1/n),ja(this.inversePixelTransform,this.pixelTransform);const r=Ju(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!c||c.isEmpty()))return null;const u=Math.round(e.size[0]*n),h=Math.round(e.size[1]*n);a.width!=u||a.height!=h?(a.width=u,a.height=h,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,u,h),this.preRender(o,e);const d=e.viewState,f=d.projection;this.opacity_=s.opacity,this.setupCompositionContext_();let g=!1,m=!0;if(s.extent&&this.clipping){const _=$t(s.extent,f);m=Pe(_,e.extent),g=m&&!Jn(_,e.extent),g&&this.clipUnrotated(this.compositionContext_,e,_)}return m&&this.renderWorlds(l,e),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];Ce(this.pixelTransform,n);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=n[0]*lt,d=n[1]*lt;u.push(this.getRenderTransform(s,r,o,lt,h,d,0).slice());const f=c.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Jn(g,l)){let m=l[0];const _=ae(g);let p=0,v;for(;m<g[0];)--p,v=_*p,u.push(this.getRenderTransform(s,r,o,lt,h,d,v).slice()),m+=_;for(p=0,m=l[2];m>g[2];)++p,v=_*p,u.push(this.getRenderTransform(s,r,o,lt,h,d,v).slice()),m-=_}this.hitDetectionImageData_=Nx(n,u,this.renderedFeatures_,c.getStyleFunction(),l,r,o)}t(Gx(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,m){const _=U(f),p=c[_];if(p){if(p!==!0&&m<p.distanceSq){if(m===0)return c[_]=!0,r.splice(r.lastIndexOf(p),1),s(f,l,g);p.geometry=g,p.distanceSq=m}}else{if(m===0)return c[_]=!0,s(f,l,g);r.push(c[_]={feature:f,layer:l,geometry:g,distanceSq:m,callback:s})}};let h;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>h=f.forEachFeatureAtCoordinate(e,o,a,n,u,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[be.ANIMATING],r=e.viewHints[be.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,d=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=Bx);const _=c.center.slice(),p=ss(l,g*h),v=p.slice(),y=[p.slice()],x=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!Jn(x,e.extent)){const b=ae(x),M=Math.max(ae(p)/2,b);p[0]=x[0]-M,p[2]=x[2]+M,Mu(_,u);const R=Ru(y[0],u);R[0]<x[0]&&R[2]<x[2]?y.push([R[0]+b,R[1],R[2]+b,R[3]]):R[0]>x[0]&&R[2]>x[2]&&y.push([R[0]-b,R[1],R[2]-b,R[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&Jn(this.wrappedRenderedExtent_,p))return Nt(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const E=new Kc(oa(h,d),p,h,d);let S;this.getLayer().getDeclutter()&&(S=new Kc(oa(h,d),p,h,d));const w=gt();let P;if(w){for(let b=0,M=y.length;b<M;++b){const R=y[b],N=ji(R,u);n.loadFeatures(N,xg(h,u),w)}P=Ar(w,u)}else for(let b=0,M=y.length;b<M;++b)n.loadFeatures(y[b],h,u);const O=jx(h,d);let D=!0;const T=b=>{let M;const R=b.getStyleFunction()||t.getStyleFunction();if(R&&(M=R(b,h)),M){const N=this.renderFeature(b,O,M,E,P,S);D=D&&!N}},F=ji(p,u),L=n.getFeaturesInExtent(F);m&&L.sort(m);for(let b=0,M=L.length;b<M;++b)T(L[b]);this.renderedFeatures_=L,this.ready=D;const V=E.finish(),G=new $c(p,h,d,n.getOverlaps(),V,t.getRenderBuffer());return S&&(this.declutterExecutorGroup=new $c(p,h,d,n.getOverlaps(),S.finish(),t.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedExtent_=v,this.wrappedRenderedExtent_=p,this.renderedCenter_=_,this.renderedProjection_=u,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,r,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,c=n.length;l<c;++l)a=qc(s,e,n[l],t,this.boundHandleStyleImageChange_,r,o)||a;else a=qc(s,e,n,t,this.boundHandleStyleImageChange_,r,o);return a}}const Jx=qx;class Qx extends mx{constructor(e){super(e)}createRenderer(){return new Jx(this)}}const oi=Qx,Ms={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Os extends Qe{constructor(e,t){super(e),this.feature=t}}function eC(i,e){const t=[];for(let n=0;n<e.length;++n){const r=e[n].getGeometry();Ad(i,r,t)}return t}function ks(i,e){return bt(i[0],i[1],e[0],e[1])}function ei(i,e){const t=i.length;return e<0?i[e+t]:e>=t?i[e-t]:i[e]}function Ds(i,e,t){let n,s;e<t?(n=e,s=t):(n=t,s=e);const r=Math.ceil(n),o=Math.floor(s);if(r>o){const l=ti(i,n),c=ti(i,s);return ks(l,c)}let a=0;if(n<r){const l=ti(i,n),c=ei(i,r);a+=ks(l,c)}if(o<s){const l=ei(i,o),c=ti(i,s);a+=ks(l,c)}for(let l=r;l<o-1;++l){const c=ei(i,l),u=ei(i,l+1);a+=ks(c,u)}return a}function Ad(i,e,t){if(e instanceof Sn){Ns(i,e.getCoordinates(),!1,t);return}if(e instanceof el){const n=e.getCoordinates();for(let s=0,r=n.length;s<r;++s)Ns(i,n[s],!1,t);return}if(e instanceof In){const n=e.getCoordinates();for(let s=0,r=n.length;s<r;++s)Ns(i,n[s],!0,t);return}if(e instanceof nl){const n=e.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length;a<l;++a)Ns(i,o[a],!0,t)}return}if(e instanceof _h){const n=e.getGeometries();for(let s=0;s<n.length;++s)Ad(i,n[s],t);return}}const Eo={index:-1,endIndex:NaN};function tC(i,e,t,n){const s=i[0],r=i[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const d=e.targets[h],f=d.coordinates;let g=1/0,m;for(let _=0;_<f.length-1;++_){const p=f[_],v=f[_+1],y=Ld(s,r,p,v);y.squaredDistance<g&&(g=y.squaredDistance,m=_+y.along)}g<o&&(o=g,d.ring&&e.targetIndex===h&&(d.endIndex>d.startIndex?m<d.startIndex&&(m+=f.length):d.endIndex<d.startIndex&&m>d.startIndex&&(m-=f.length)),l=m,a=h)}const c=e.targets[a];let u=c.ring;if(e.targetIndex===a&&u){const h=ti(c.coordinates,l),d=t.getPixelFromCoordinate(h);qs(d,e.startPx)>n&&(u=!1)}if(u){const h=c.coordinates,d=h.length,f=c.startIndex,g=l;if(f<g){const m=Ds(h,f,g);Ds(h,f,g-d)<m&&(l-=d)}else{const m=Ds(h,f,g);Ds(h,f,g+d)<m&&(l+=d)}}return Eo.index=a,Eo.endIndex=l,Eo}function Ns(i,e,t,n){const s=i[0],r=i[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],u=Ld(s,r,l,c);if(u.squaredDistance===0){const h=o+u.along;n.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const So={along:0,squaredDistance:0};function Ld(i,e,t,n){const s=t[0],r=t[1],o=n[0],a=n[1],l=o-s,c=a-r;let u=0,h=s,d=r;return(l!==0||c!==0)&&(u=ge(((i-s)*l+(e-r)*c)/(l*l+c*c),0,1),h+=l*u,d+=c*u),So.along=u,So.squaredDistance=Pr(bt(i,e,h,d),10),So}function ti(i,e){const t=i.length;let n=Math.floor(e);const s=e-n;n>=t?n-=t:n<0&&(n+=t);let r=n+1;r>=t&&(r-=t);const o=i[n],a=o[0],l=o[1],c=i[r],u=c[0]-a,h=c[1]-l;return[a+u*s,l+h*s]}class nC extends ln{constructor(e){const t=e;t.stopDown||(t.stopDown=On),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=sC(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Ot,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const s=this.mode_;if(s==="Circle")n=function(r,o,a){const l=o||new xh([NaN,NaN]),c=oe(r[0],a),u=Pt(c,oe(r[r.length-1],a));l.setCenterAndRadius(c,Math.sqrt(u),this.geometryLayout_);const h=gt();return h&&l.transform(a,h),l};else{let r;s==="Point"?r=At:s==="LineString"?r=Sn:s==="Polygon"&&(r=In),n=function(o,a,l){return a?s==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new r(o,this.geometryLayout_),a}}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new oi({source:new En({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:iC(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Rl,this.freehandCondition_,e.freehand?this.freehandCondition_=mr:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Tl,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(ia.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=mr:t=e:t=ra,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===Y.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===q.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===q.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===q.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===q.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===q.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===q.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===q.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Tt(q.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),s=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),r=Me([n,s]),o=this.traceSource_.getFeaturesInExtent(r);if(o.length===0)return;const a=eC(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,s=e.startIndex<=t;n===s?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const s=Math.ceil(e);let r=Math.floor(t);r===t&&(r-=1),n=r-s+1}else{const s=Math.floor(e);let r=Math.ceil(t);r===t&&(r+=1),n=s-r+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const s=[];if(t<n){const r=Math.ceil(t);let o=Math.floor(n);o===n&&(o-=1);for(let a=r;a<=o;++a)s.push(ei(e.coordinates,a))}else{const r=Math.floor(t);let o=Math.ceil(n);o===n&&(o+=1);for(let a=r;a>=o;--a)s.push(ei(e.coordinates,a))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&qs(t.startPx,e.pixel)<this.snapTolerance_)return;const n=tC(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[n.index];this.addTracedCoordinates_(a,a.startIndex,n.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,n.endIndex)}t.targetIndex=n.index;const s=t.targets[t.targetIndex];s.endIndex=n.endIndex;const r=ti(s.coordinates,s.endIndex),o=this.getMap().getPixelFromCoordinate(r);e.coordinate=r,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,s=t[0]-n[0],r=t[1]-n[1],o=s*s+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let s=!1,r=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")n=!0;else if(o==="Circle")n=this.sketchCoords_.length===2;else if(o==="LineString")s=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;s=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],t?r=[a[0][0]]:r=[a[0][0],a[0][a[0].length-2]]}if(s){const a=this.getMap();for(let l=0,c=r.length;l<c;l++){const u=r[l],h=a.getPixelFromCoordinate(u),d=e[0]-h[0],f=e[1]-h[1],g=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(d*d+f*f)<=g,n){this.finishCoordinate_=u;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new it(new At(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new it);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new Sn(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=Js(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new it(new Sn(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new it,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new Os(Ms.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),s=t.getView().getProjection(),r=Js(this.geometryLayout_);let o,a;for(;e.length<r;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let s,r;const o=this.mode_;o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),this.geometryFunction_(r,t,n)):o==="Polygon"&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),s&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),s=this.mode_;for(let r=0;r<e;++r){let o;if(s==="LineString"||s==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,n)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const n=e.getGeometry(),s=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,s)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,s),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Dr([t])):this.type_==="MultiLineString"?e.setGeometry(new el([t])):this.type_==="MultiPolygon"&&e.setGeometry(new nl([t])),this.dispatchEvent(new Os(Ms.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Os(Ms.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let s;if(t==="LineString"||t==="Circle")s=this.sketchCoords_;else if(t==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&s.shift(),s.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const r=e[e.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new it(new At(s)),this.updateSketchFeatures_(),this.dispatchEvent(new Os(Ms.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function iC(){const i=vl();return function(e,t){return i[e.getGeometry().getType()]}}function sC(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const wo=nC,Jc=0,Ni=1,Qc=[0,0,0,0],ai=[],Ro={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class To extends Qe{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}class rC extends ln{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:wd,this.defaultDeleteCondition_=function(n){return N0(n)&&Ed(n)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:mr,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Qs,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new oi({source:new En({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:aC(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new ze(this.source_.getFeatures()),this.source_.addEventListener(Fe.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Fe.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(fe.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(fe.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const s=this.SEGMENT_WRITERS_[t.getType()];s&&s(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(Y.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new ze;const n=this.featuresBeingModified_.getArray();for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0,l=o.length;a<l;++a){const c=o[a].feature;c&&!n.includes(c)&&this.featuresBeingModified_.push(c)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new To(Ro.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(Y.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(s){e===s.feature&&n.push(s)});for(let s=n.length-1;s>=0;--s){const r=n[s];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);t.remove(r)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const n=t.getCoordinates(),s={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),s)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s],a={feature:e,geometry:t,depth:[s],index:s,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length-1;s<r;++s){const o=n.slice(s,s+2),a={feature:e,geometry:t,index:s,segment:o};this.rBush_.insert(Me(o),a)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:t,depth:[s],index:a,segment:c};this.rBush_.insert(Me(c),u)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:t,depth:[s],index:a,segment:c};this.rBush_.insert(Me(c),u)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let u=0,h=c.length-1;u<h;++u){const d=c.slice(u,u+2),f={feature:e,geometry:t,depth:[a,s],index:u,segment:d};this.rBush_.insert(Me(d),f)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),s={feature:e,geometry:t,index:Jc,segment:[n,n]},r={feature:e,geometry:t,index:Ni,segment:[n,n]},o=[s,r];s.featureSegments=o,r.featureSegments=o,this.rBush_.insert(Vs(n),s);let a=t;const l=gt();if(l&&this.getMap()){const c=this.getMap().getView().getProjection();a=a.clone().transform(l,c),a=jo(a).transform(c,l)}this.rBush_.insert(a.getExtent(),r)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let s=0;s<n.length;++s){const r=n[s],o=this.SEGMENT_WRITERS_[r.getType()];o(e,r)}}createOrUpdateVertexFeature_(e,t,n){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new it(new At(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",t),s.set("geometries",n),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==q.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=q.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==q.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],s=[];for(let r=0,o=this.dragSegments_.length;r<o;++r){const a=this.dragSegments_[r],l=a[0],c=l.feature;n.includes(c)||n.push(c);const u=l.geometry;s.includes(u)||s.push(u);const h=l.depth;let d;const f=l.segment,g=a[1];for(;t.length<u.getStride();)t.push(f[g][t.length]);switch(u.getType()){case"Point":d=t,f[0]=t,f[1]=t;break;case"MultiPoint":d=u.getCoordinates(),d[l.index]=t,f[0]=t,f[1]=t;break;case"LineString":d=u.getCoordinates(),d[l.index+g]=t,f[g]=t;break;case"MultiLineString":d=u.getCoordinates(),d[h[0]][l.index+g]=t,f[g]=t;break;case"Polygon":d=u.getCoordinates(),d[h[0]][l.index+g]=t,f[g]=t;break;case"MultiPolygon":d=u.getCoordinates(),d[h[1]][h[0]][l.index+g]=t,f[g]=t;break;case"Circle":if(f[0]=t,f[1]=t,l.index===Jc)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const m=e.map.getView().getProjection();let _=qs(oe(u.getCenter(),m),oe(t,m));const p=gt();if(p){const v=u.clone().transform(p,m);v.setRadius(_),_=v.transform(m,p).getRadius()}u.setRadius(_),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(u,d)}this.createOrUpdateVertexFeature_(t,n,s)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){const s=e.map.getView().getProjection(),r=[],o=n.getGeometry().getCoordinates(),a=Me([o]),l=this.rBush_.getInExtent(a),c={};l.sort(oC);for(let u=0,h=l.length;u<h;++u){const d=l[u],f=d.segment;let g=U(d.geometry);const m=d.depth;if(m&&(g+="-"+m.join("-")),c[g]||(c[g]=new Array(2)),d.geometry.getType()==="Circle"&&d.index===Ni){const _=tu(t,d,s);nt(_,o)&&!c[g][0]&&(this.dragSegments_.push([d,0]),c[g][0]=d);continue}if(nt(f[0],o)&&!c[g][0]){this.dragSegments_.push([d,0]),c[g][0]=d;continue}if(nt(f[1],o)&&!c[g][1]){if(c[g][0]&&c[g][0].index===0){let _=d.geometry.getCoordinates();switch(d.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":_=_[m[1]];case"Polygon":if(d.index!==_[m[0]].length-2)continue;break}}this.dragSegments_.push([d,1]),c[g][1]=d;continue}U(f)in this.vertexSegments_&&!c[g][0]&&!c[g][1]&&this.insertVertexCondition_(e)&&r.push(d)}r.length&&this.willModifyFeatures_(e,[r]);for(let u=r.length-1;u>=0;--u)this.insertVertex_(r[u],o)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],s=n.geometry;if(s.getType()==="Circle"){const r=s.getCenter(),o=n.featureSegments[0],a=n.featureSegments[1];o.segment[0]=r,o.segment[1]=r,a.segment[0]=r,a.segment[1]=r,this.rBush_.update(Vs(r),o);let l=s;const c=gt();if(c){const u=e.map.getView().getProjection();l=l.clone().transform(c,u),l=jo(l).transform(u,c)}this.rBush_.update(l.getExtent(),a)}else this.rBush_.update(Me(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new To(Ro.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,n){const s=n||t.getCoordinateFromPixel(e),r=t.getView().getProjection(),o=function(c,u){return eu(s,c,r)-eu(s,u,r)};let a,l;if(this.hitDetection_){const c=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,h,d)=>{const f=d||u.getGeometry();if(f.getType()==="Point"&&u instanceof it&&this.features_.getArray().includes(u)){l=f;const g=l.getFlatCoordinates().slice(0,2);a=[{feature:u,geometry:l,segment:[g,g]}]}return!0},{layerFilter:c})}if(!a){const c=$t(Vs(s,Qc),r),u=t.getView().getResolution()*this.pixelTolerance_,h=ji(ss(c,u,Qc),r);a=this.rBush_.getInExtent(h)}if(a&&a.length>0){const c=a.sort(o)[0],u=c.segment;let h=tu(s,c,r);const d=t.getPixelFromCoordinate(h);let f=qs(e,d);if(l||f<=this.pixelTolerance_){const g={};if(g[U(u)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-s[0],this.delta_[1]=h[1]-s[1]),c.geometry.getType()==="Circle"&&c.index===Ni)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[c.feature],[c.geometry]);else{const m=t.getPixelFromCoordinate(u[0]),_=t.getPixelFromCoordinate(u[1]),p=Pt(d,m),v=Pt(d,_);f=Math.sqrt(Math.min(p,v)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(h=p>v?u[1]:u[0]),this.createOrUpdateVertexFeature_(h,[c.feature],[c.geometry]);const y={};y[U(c.geometry)]=!0;for(let x=1,E=a.length;x<E;++x){const S=a[x].segment;if(nt(u[0],S[0])&&nt(u[1],S[1])||nt(u[0],S[1])&&nt(u[1],S[0])){const w=U(a[x].geometry);w in y||(y[w]=!0,g[U(S)]=!0)}else break}}this.vertexSegments_=g;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,s=e.feature,r=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<r.getStride();)t.push(0);switch(r.getType()){case"MultiLineString":l=r.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"Polygon":l=r.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=r.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=r.getCoordinates(),l.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(r,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(r,a,o,1);const u={segment:[n[0],t],feature:s,geometry:r,depth:o,index:a};c.insert(Me(u.segment),u),this.dragSegments_.push([u,1]);const h={segment:[t,n[1]],feature:s,geometry:r,depth:o,index:a+1};c.insert(Me(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=q.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new To(Ro.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let n=!1,s,r,o,a,l,c,u,h,d,f,g;for(l=e.length-1;l>=0;--l)o=e[l],f=o[0],g=U(f.feature),f.depth&&(g+="-"+f.depth.join("-")),g in t||(t[g]={}),o[1]===0?(t[g].right=f,t[g].index=f.index):o[1]==1&&(t[g].left=f,t[g].index=f.index+1);for(g in t){switch(d=t[g].right,u=t[g].left,c=t[g].index,h=c-1,u!==void 0?f=u:f=d,h<0&&(h=0),a=f.geometry,r=a.getCoordinates(),s=r,n=!1,a.getType()){case"MultiLineString":r[f.depth[0]].length>2&&(r[f.depth[0]].splice(c,1),n=!0);break;case"LineString":r.length>2&&(r.splice(c,1),n=!0);break;case"MultiPolygon":s=s[f.depth[1]];case"Polygon":s=s[f.depth[0]],s.length>4&&(c==s.length-1&&(c=0),s.splice(c,1),n=!0,c===0&&(s.pop(),s.push(s[0]),h=s.length-1));break}if(n){this.setGeometryCoordinates_(a,r);const m=[];if(u!==void 0&&(this.rBush_.remove(u),m.push(u.segment[0])),d!==void 0&&(this.rBush_.remove(d),m.push(d.segment[1])),u!==void 0&&d!==void 0){const _={depth:f.depth,feature:f.feature,geometry:f.geometry,index:h,segment:m};this.rBush_.insert(Me(_.segment),_)}this.updateSegmentIndices_(a,c,f.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,s){this.rBush_.forEachInExtent(e.getExtent(),function(r){r.geometry===e&&(n===void 0||r.depth===void 0||Nt(r.depth,n))&&r.index>t&&(r.index+=s)})}}function oC(i,e){return i.index-e.index}function eu(i,e,t){const n=e.geometry;if(n.getType()==="Circle"){let r=n;if(e.index===Ni){const o=gt();o&&(r=r.clone().transform(o,t));const a=Pt(r.getCenter(),oe(i,t)),l=Math.sqrt(a)-r.getRadius();return l*l}}const s=oe(i,t);return ai[0]=oe(e.segment[0],t),ai[1]=oe(e.segment[1],t),hg(s,ai)}function tu(i,e,t){const n=e.geometry;if(n.getType()==="Circle"&&e.index===Ni){let r=n;const o=gt();return o&&(r=r.clone().transform(o,t)),hi(r.getClosestPoint(oe(i,t)),t)}const s=oe(i,t);return ai[0]=oe(e.segment[0],t),ai[1]=oe(e.segment[1],t),hi(La(s,ai),t)}function aC(){const i=vl();return function(e,t){return i.Point}}const nu=rC,lC={SELECT:"select"};class cC extends Qe{constructor(e,t,n,s){super(e),this.selected=t,this.deselected=n,this.mapBrowserEvent=s}}const Gs={};class Il extends Ci{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:Ed,this.addCondition_=e.addCondition?e.addCondition:ra,this.removeCondition_=e.removeCondition?e.removeCondition:ra,this.toggleCondition_=e.toggleCondition?e.toggleCondition:Tl,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Ot,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:uC(),this.features_=e.features||new ze;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(s){return n.includes(s)}}else t=Ot;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[U(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[U(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(fe.ADD,this.boundAddFeature_),this.features_.addEventListener(fe.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(fe.ADD,this.boundAddFeature_),this.features_.removeEventListener(fe.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const n=this.getMap().getAllLayers().find(function(s){if(s instanceof oi&&s.getSource()&&s.getSource().hasFeature(t))return s});n&&this.addFeatureLayerAssociation_(t,n)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=U(e);t in Gs||(Gs[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let s=t.length-1;s>=0;--s){const r=t[s];if(r!==this&&r instanceof Il&&r.getStyle()&&r.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(r.getStyle());return}}const n=U(e);e.setStyle(Gs[n]),delete Gs[n]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[U(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),n=this.removeCondition_(e),s=this.toggleCondition_(e),r=!t&&!n&&!s,o=e.map,a=this.getFeatures(),l=[],c=[];if(r){pi(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof it)||!this.filter_(u,h)))return this.addFeatureLayerAssociation_(u,h),c.push(u),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const h=a.item(u),d=c.indexOf(h);d>-1?c.splice(d,1):(a.remove(h),l.push(h))}c.length!==0&&a.extend(c)}else{o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof it)||!this.filter_(u,h)))return(t||s)&&!a.getArray().includes(u)?(this.addFeatureLayerAssociation_(u,h),c.push(u)):(n||s)&&a.getArray().includes(u)&&(l.push(u),this.removeFeatureLayerAssociation_(u)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=l.length-1;u>=0;--u)a.remove(l[u]);a.extend(c)}return(c.length>0||l.length>0)&&this.dispatchEvent(new cC(lC.SELECT,c,l,e)),!0}}function uC(){const i=vl();return st(i.Polygon,i.LineString),st(i.GeometryCollection,i.LineString),function(e){return e.getGeometry()?i[e.getGeometry().getType()]:null}}const hC=Il;function iu(i){if(i.feature)return i.feature;if(i.element)return i.element}const Io=[];class dC extends ln{constructor(e){e=e||{};const t=e;t.handleDownEvent||(t.handleDownEvent=Ot),t.stopDown||(t.stopDown=On),super(t),this.source_=e.source?e.source:null,this.vertex_=e.vertex!==void 0?e.vertex:!0,this.edge_=e.edge!==void 0?e.edge:!0,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.rBush_=new Qs,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(e,t){t=t!==void 0?t:!0;const n=U(e),s=e.getGeometry();if(s){const r=this.GEOMETRY_SEGMENTERS_[s.getType()];if(r){this.indexedFeaturesExtents_[n]=s.getExtent(Xe());const o=[];if(r(o,s),o.length===1)this.rBush_.insert(Me(o[0]),{feature:e,segment:o[0]});else if(o.length>1){const a=o.map(c=>Me(c)),l=o.map(c=>({feature:e,segment:c}));this.rBush_.load(a,l)}}}t&&(this.featureChangeListenerKeys_[n]=Z(e,Y.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}handleEvent(e){const t=this.snapTo(e.pixel,e.coordinate,e.map);return t&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),super.handleEvent(e)}handleFeatureAdd_(e){const t=iu(e);this.addFeature(t)}handleFeatureRemove_(e){const t=iu(e);this.removeFeature(t)}handleFeatureChange_(e){const t=e.target;if(this.handlingDownUpSequence){const n=U(t);n in this.pendingFeatures_||(this.pendingFeatures_[n]=t)}else this.updateFeature_(t)}handleUpEvent(e){const t=Object.values(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(e,t){const n=t!==void 0?t:!0,s=U(e),r=this.indexedFeaturesExtents_[s];if(r){const o=this.rBush_,a=[];o.forEachInExtent(r,function(l){e===l.feature&&a.push(l)});for(let l=a.length-1;l>=0;--l)o.remove(a[l])}n&&(re(this.featureChangeListenerKeys_[s]),delete this.featureChangeListenerKeys_[s])}setMap(e){const t=this.getMap(),n=this.featuresListenerKeys_,s=this.getFeatures_();t&&(n.forEach(re),n.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(re),this.featureChangeListenerKeys_={}),super.setMap(e),e&&(this.features_?n.push(Z(this.features_,fe.ADD,this.handleFeatureAdd_,this),Z(this.features_,fe.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(Z(this.source_,Fe.ADDFEATURE,this.handleFeatureAdd_,this),Z(this.source_,Fe.REMOVEFEATURE,this.handleFeatureRemove_,this)),s.forEach(r=>this.addFeature(r)))}snapTo(e,t,n){const s=n.getView().getProjection(),r=oe(t,s),o=ji(ss(Me([r]),n.getView().getResolution()*this.pixelTolerance_),s),a=this.rBush_.getInExtent(o),l=a.length;if(l===0)return null;let c,u=1/0;const h=this.pixelTolerance_*this.pixelTolerance_,d=()=>{if(c){const f=n.getPixelFromCoordinate(c);if(Pt(e,f)<=h)return{vertex:c,vertexPixel:[Math.round(f[0]),Math.round(f[1])]}}return null};if(this.vertex_){for(let g=0;g<l;++g){const m=a[g];m.feature.getGeometry().getType()!=="Circle"&&m.segment.forEach(_=>{const p=oe(_,s),v=Pt(r,p);v<u&&(c=_,u=v)})}const f=d();if(f)return f}if(this.edge_){for(let g=0;g<l;++g){let m=null;const _=a[g];if(_.feature.getGeometry().getType()==="Circle"){let p=_.feature.getGeometry();const v=gt();v&&(p=p.clone().transform(v,s)),m=cg(r,p)}else{const[p,v]=_.segment;v&&(Io[0]=oe(p,s),Io[1]=oe(v,s),m=La(r,Io))}if(m){const p=Pt(r,m);p<u&&(c=hi(m,s),u=p)}}const f=d();if(f)return f}return null}updateFeature_(e){this.removeFeature(e,!1),this.addFeature(e,!1)}segmentCircleGeometry_(e,t){const n=this.getMap().getView().getProjection();let s=t;const r=gt();r&&(s=s.clone().transform(r,n));const o=jo(s);r&&o.transform(n,r);const a=o.getCoordinates()[0];for(let l=0,c=a.length-1;l<c;++l)e.push(a.slice(l,l+2))}segmentGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let s=0;s<n.length;++s){const r=this.GEOMETRY_SEGMENTERS_[n[s].getType()];r&&r(e,n[s])}}segmentLineStringGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length-1;s<r;++s)e.push(n.slice(s,s+2))}segmentMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length-1;a<l;++a)e.push(o.slice(a,a+2))}}segmentMultiPointGeometry_(e,t){t.getCoordinates().forEach(n=>{e.push([n])})}segmentMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let u=0,h=c.length-1;u<h;++u)e.push(c.slice(u,u+2))}}}segmentPointGeometry_(e,t){e.push([t.getCoordinates()])}segmentPolygonGeometry_(e,t){const n=t.getCoordinates();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,l=o.length-1;a<l;++a)e.push(o.slice(a,a+2))}}}const fC=dC;const gC=J("div",{id:"map",class:"map"},null,-1),mC=J("br",null,null,-1),_C=es({__name:"Map",emits:["featuresObjectUpdate","changed"],setup(i,{emit:e}){X(!1),X();let t,n,s,r,o,a,l=null,c,u,h,d,f,g,m,_=X(!0),p=X(!1),v=1;a=X(!0),f=X("Polygon");function y(){if(f.value=="edi\xE7\xE3o"){o.getFeatures().clear(),t.addInteraction(r),t.addInteraction(g),t.addInteraction(o),t.removeInteraction(n);return}if(f.value=="remover"){t.removeInteraction(r),t.removeInteraction(g),t.removeInteraction(n),o.getFeatures().clear(),t.addInteraction(o);return}t.removeInteraction(o),t.removeInteraction(r),t.removeInteraction(g),t.removeInteraction(n),p.value?n=new wo({source:d,type:f.value,style:m}):n=new wo({source:h,type:f.value,style:s}),n.on("drawend",D=>{t.removeInteraction(o),l!=null&&l.clear(),a.value=!a.value,D.feature.set("id",v),D.feature.set("pop",1),D.feature.set("impacto",1),v+=1}),t.addInteraction(n)}const x=D=>{p.value=D.label==="Aloca\xE7\xE3o",y()},E=D=>{l!=null&&l.clear();var T=new oi({source:new En,style:function(V){return new ri({fill:new tn({color:"rgba(255, 0, 0, 0.5)"}),stroke:new nn({color:"red",width:2})})}});let F=new Uo,L=F.readFeature(D.data.features[0]);T.getSource().addFeature(L),L=F.readFeature(D.data.features[1]),T.getSource().addFeature(L),l=T.getSource(),t.addLayer(T)},S=D=>{let T=D.label,F;T==="OSM"?F=new _i({layers:[new oo({source:new ac}),c,u]}):F=new _i({layers:[new oo({source:new E_({layer:"watercolor"})}),c,u]}),t.setLayerGroup(F)},w=D=>{let T=D.selectedGeometryOption.value;for(let F=0;F<T.length;F++)if(T[F].isActive===!0){f.value=T[F].label;break}if(D.selectedMode.value[1].isActive){f.value="edi\xE7\xE3o";return}if(D.selectedMode.value[2].isActive){f.value="remover";return}},P=()=>{l!=null&&l.clear(),h.clear(),d.clear()};function O(){Gu(),s=new ri({fill:new tn({color:"rgba(255, 255, 255, 0.4)"}),stroke:new nn({color:"#3399CC",width:2})}),m=new ri({fill:new tn({color:"rgba(0, 255, 0, 1)"}),stroke:new nn({color:"#ff99CC",width:2})}),h=new En({wrapX:!1}),d=new En({wrapX:!1}),c=new oi({source:h,style:{"fill-color":"rgba(255, 255, 255, 1)","stroke-color":"#ffcc33","stroke-width":2,"circle-radius":7,"circle-fill-color":"#ffcc33"}}),u=new oi({source:d,style:{"fill-color":"rgba(0, 255, 255, 1)","stroke-color":"#ffccff","stroke-width":2,"circle-radius":7,"circle-fill-color":"#00ccff"}}),r=new nu({source:h}),g=new nu({source:d}),o=new hC,n=new wo({source:h,type:f.value,style:s});const D=new fC({source:h});n.on("drawend",T=>{t.removeInteraction(o),a.value=!a.value,T.feature.set("id",v),T.feature.set("pop",1),T.feature.set("impacto",1),v+=1}),o.on("select",function(T){T.selected[0]&&f=="remover"&&(l!=null&&l.clear(),h.removeFeature(T.selected[0]),d.removeFeature(T.selected[0]),_.value=!_.value,e("changed",_))}),h.on("change",function(){let F=new Uo().writeFeatures(h.getFeatures()),L=JSON.parse(F);_.value=!_.value,e("featuresObjectUpdate",h),e("changed",_),console.log(L)}),t=new hx({target:"map",layers:[new oo({source:new ac}),c,u],view:new at({center:[-46.6361,-23.5505],zoom:12}),interactions:[n,D,o]}),r.on("modifystart",function(T){l!=null&&l.clear()}),g.on("modifystart",function(T){l!=null&&l.clear()})}return ue(()=>f.value,D=>{y()},{deep:!0}),la(O),(D,T)=>(_e(),Ht(mu,null,{default:se(()=>[C(Ao,null,{default:se(()=>[C($n,{cols:"12",md:"8"},{default:se(()=>[gC,mC]),_:1}),C($n,{cols:"12",md:"4"},{default:se(()=>[C(Ao,null,{default:se(()=>[C($n,{cols:"12"},{default:se(()=>[C(t0,{onChangePointType:x,onChangeView:S,onNomeDoEvento1:w,onRemoverAllEmit:P})]),_:1}),C($n,{cols:"12"},{default:se(()=>[C(zv,{onSendResponse:E,changed:He(_),featuresObjectUpdate:He(h),featuresObjectUpdate2:He(d)},null,8,["changed","featuresObjectUpdate","featuresObjectUpdate2"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const CC=es({__name:"Home",setup(i){return(e,t)=>(_e(),Ht(_C))}});export{CC as default};
